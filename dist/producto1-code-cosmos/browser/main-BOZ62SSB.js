var KE=Object.defineProperty,YN=Object.defineProperties;var JN=Object.getOwnPropertyDescriptors;var qE=Object.getOwnPropertySymbols;var ZN=Object.prototype.hasOwnProperty,XN=Object.prototype.propertyIsEnumerable;var GE=(t,e,n)=>e in t?KE(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,F=(t,e)=>{for(var n in e||={})ZN.call(e,n)&&GE(t,n,e[n]);if(qE)for(var n of qE(e))XN.call(e,n)&&GE(t,n,e[n]);return t},se=(t,e)=>YN(t,JN(e));var eM=(t,e)=>{for(var n in e)KE(t,n,{get:e[n],enumerable:!0})};var A=(t,e,n)=>new Promise((r,i)=>{var s=l=>{try{a(n.next(l))}catch(u){i(u)}},o=l=>{try{a(n.throw(l))}catch(u){i(u)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(s,o);a((n=n.apply(t,e)).next())});function QE(t,e){return Object.is(t,e)}var nt=null,bl=!1,Cl=1,Zn=Symbol("SIGNAL");function me(t){let e=nt;return nt=t,e}function YE(){return nt}var ra={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xf(t){if(bl)throw new Error("");if(nt===null)return;nt.consumerOnSignalRead(t);let e=nt.nextProducerIndex++;if(Al(nt),e<nt.producerNode.length&&nt.producerNode[e]!==t&&na(nt)){let n=nt.producerNode[e];Sl(n,nt.producerIndexOfThis[e])}nt.producerNode[e]!==t&&(nt.producerNode[e]=t,nt.producerIndexOfThis[e]=na(nt)?eI(t,nt,e):0),nt.producerLastReadVersion[e]=t.version}function tM(){Cl++}function JE(t){if(!(na(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===Cl)){if(!t.producerMustRecompute(t)&&!tp(t)){t.dirty=!1,t.lastCleanEpoch=Cl;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=Cl}}function ZE(t){if(t.liveConsumerNode===void 0)return;let e=bl;bl=!0;try{for(let n of t.liveConsumerNode)n.dirty||nM(n)}finally{bl=e}}function XE(){return nt?.consumerAllowSignalWrites!==!1}function nM(t){t.dirty=!0,ZE(t),t.consumerMarkedDirty?.(t)}function Dl(t){return t&&(t.nextProducerIndex=0),me(t)}function ep(t,e){if(me(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(na(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)Sl(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function tp(t){Al(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(JE(n),r!==n.version))return!0}return!1}function np(t){if(Al(t),na(t))for(let e=0;e<t.producerNode.length;e++)Sl(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function eI(t,e,n){if(tI(t),t.liveConsumerNode.length===0&&nI(t))for(let r=0;r<t.producerNode.length;r++)t.producerIndexOfThis[r]=eI(t.producerNode[r],t,r);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function Sl(t,e){if(tI(t),t.liveConsumerNode.length===1&&nI(t))for(let r=0;r<t.producerNode.length;r++)Sl(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];Al(i),i.producerIndexOfThis[r]=e}}function na(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Al(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function tI(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function nI(t){return t.producerNode!==void 0}function rI(t){let e=Object.create(rM);e.computation=t;let n=()=>{if(JE(e),Xf(e),e.value===Tl)throw e.error;return e.value};return n[Zn]=e,n}var Jf=Symbol("UNSET"),Zf=Symbol("COMPUTING"),Tl=Symbol("ERRORED"),rM=se(F({},ra),{value:Jf,dirty:!0,error:null,equal:QE,producerMustRecompute(t){return t.value===Jf||t.value===Zf},producerRecomputeValue(t){if(t.value===Zf)throw new Error("Detected cycle in computations.");let e=t.value;t.value=Zf;let n=Dl(t),r;try{r=t.computation()}catch(i){r=Tl,t.error=i}finally{ep(t,n)}if(e!==Jf&&e!==Tl&&r!==Tl&&t.equal(e,r)){t.value=e;return}t.value=r,t.version++}});function iM(){throw new Error}var iI=iM;function sI(){iI()}function oI(t){iI=t}var sM=null;function aI(t){let e=Object.create(lI);e.value=t;let n=()=>(Xf(e),e.value);return n[Zn]=e,n}function rp(t,e){XE()||sI(),t.equal(t.value,e)||(t.value=e,oM(t))}function cI(t,e){XE()||sI(),rp(t,e(t.value))}var lI=se(F({},ra),{equal:QE,value:void 0});function oM(t){t.version++,tM(),ZE(t),sM?.()}function q(t){return typeof t=="function"}function os(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var xl=os(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function si(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Ue=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(q(r))try{r()}catch(s){e=s instanceof xl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{uI(s)}catch(o){e=e??[],o instanceof xl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new xl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)uI(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&si(n,e)}remove(e){let{_finalizers:n}=this;n&&si(n,e),e instanceof t&&e._removeParent(this)}};Ue.EMPTY=(()=>{let t=new Ue;return t.closed=!0,t})();var ip=Ue.EMPTY;function Rl(t){return t instanceof Ue||t&&"closed"in t&&q(t.remove)&&q(t.add)&&q(t.unsubscribe)}function uI(t){q(t)?t():t.unsubscribe()}var un={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var as={setTimeout(t,e,...n){let{delegate:r}=as;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=as;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Nl(t){as.setTimeout(()=>{let{onUnhandledError:e}=un;if(e)e(t);else throw t})}function ia(){}var dI=sp("C",void 0,void 0);function hI(t){return sp("E",void 0,t)}function fI(t){return sp("N",t,void 0)}function sp(t,e,n){return{kind:t,value:e,error:n}}var oi=null;function cs(t){if(un.useDeprecatedSynchronousErrorHandling){let e=!oi;if(e&&(oi={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=oi;if(oi=null,n)throw r}}else t()}function pI(t){un.useDeprecatedSynchronousErrorHandling&&oi&&(oi.errorThrown=!0,oi.error=t)}var ai=class extends Ue{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Rl(e)&&e.add(this)):this.destination=lM}static create(e,n,r){return new ls(e,n,r)}next(e){this.isStopped?ap(fI(e),this):this._next(e)}error(e){this.isStopped?ap(hI(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ap(dI,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},aM=Function.prototype.bind;function op(t,e){return aM.call(t,e)}var cp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Ml(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Ml(r)}else Ml(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Ml(n)}}},ls=class extends ai{constructor(e,n,r){super();let i;if(q(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&un.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&op(e.next,s),error:e.error&&op(e.error,s),complete:e.complete&&op(e.complete,s)}):i=e}this.destination=new cp(i)}};function Ml(t){un.useDeprecatedSynchronousErrorHandling?pI(t):Nl(t)}function cM(t){throw t}function ap(t,e){let{onStoppedNotification:n}=un;n&&as.setTimeout(()=>n(t,e))}var lM={closed:!0,next:ia,error:cM,complete:ia};var us=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Vt(t){return t}function lp(...t){return up(t)}function up(t){return t.length===0?Vt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var he=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=dM(n)?n:new ls(n,r,i);return cs(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=gI(r),new r((i,s)=>{let o=new ls({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[us](){return this}pipe(...n){return up(n)(this)}toPromise(n){return n=gI(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function gI(t){var e;return(e=t??un.Promise)!==null&&e!==void 0?e:Promise}function uM(t){return t&&q(t.next)&&q(t.error)&&q(t.complete)}function dM(t){return t&&t instanceof ai||uM(t)&&Rl(t)}function dp(t){return q(t?.lift)}function pe(t){return e=>{if(dp(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function fe(t,e,n,r,i){return new hp(t,e,n,r,i)}var hp=class extends ai{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function ds(){return pe((t,e)=>{let n=null;t._refCount++;let r=fe(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var hs=class extends he{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,dp(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ue;let n=this.getSubject();e.add(this.source.subscribe(fe(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ue.EMPTY)}return e}refCount(){return ds()(this)}};var mI=os(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ct=(()=>{class t extends he{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new Pl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new mI}next(n){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){cs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?ip:(this.currentObservers=null,s.push(n),new Ue(()=>{this.currentObservers=null,si(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new he;return n.source=this,n}}return t.create=(e,n)=>new Pl(e,n),t})(),Pl=class extends ct{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:ip}};var lt=class extends ct{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var fp={now(){return(fp.delegate||Date).now()},delegate:void 0};var Ol=class extends Ue{constructor(e,n){super()}schedule(e,n=0){return this}};var sa={setInterval(t,e,...n){let{delegate:r}=sa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=sa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var fs=class extends Ol{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return sa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&sa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,si(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var ps=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};ps.now=fp.now;var gs=class extends ps{constructor(e,n=ps.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var pp=new gs(fs);var kl=class extends fs{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var Fl=class extends gs{};var gp=new Fl(kl);var Ut=new he(t=>t.complete());function _I(t){return t&&q(t.schedule)}function yI(t){return t[t.length-1]}function Ll(t){return q(yI(t))?t.pop():void 0}function Dr(t){return _I(yI(t))?t.pop():void 0}function mp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function wI(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(f){try{u(r.next(f))}catch(p){o(p)}}function l(f){try{u(r.throw(f))}catch(p){o(p)}}function u(f){f.done?s(f.value):i(f.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function vI(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ci(t){return this instanceof ci?(this.v=t,this):new ci(t)}function EI(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(y){return function(b){return Promise.resolve(b).then(y,p)}}function a(y,b){r[y]&&(i[y]=function(N){return new Promise(function(P,B){s.push([y,N,P,B])>1||l(y,N)})},b&&(i[y]=b(i[y])))}function l(y,b){try{u(r[y](b))}catch(N){m(s[0][3],N)}}function u(y){y.value instanceof ci?Promise.resolve(y.value.v).then(f,p):m(s[0][2],y)}function f(y){l("next",y)}function p(y){l("throw",y)}function m(y,b){y(b),s.shift(),s.length&&l(s[0][0],s[0][1])}}function II(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof vI=="function"?vI(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var Vl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Ul(t){return q(t?.then)}function Bl(t){return q(t[us])}function jl(t){return Symbol.asyncIterator&&q(t?.[Symbol.asyncIterator])}function $l(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function hM(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Hl=hM();function zl(t){return q(t?.[Hl])}function Wl(t){return EI(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield ci(n.read());if(i)return yield ci(void 0);yield yield ci(r)}}finally{n.releaseLock()}})}function ql(t){return q(t?.getReader)}function Ye(t){if(t instanceof he)return t;if(t!=null){if(Bl(t))return fM(t);if(Vl(t))return pM(t);if(Ul(t))return gM(t);if(jl(t))return bI(t);if(zl(t))return mM(t);if(ql(t))return _M(t)}throw $l(t)}function fM(t){return new he(e=>{let n=t[us]();if(q(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function pM(t){return new he(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function gM(t){return new he(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Nl)})}function mM(t){return new he(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function bI(t){return new he(e=>{yM(t,e).catch(n=>e.error(n))})}function _M(t){return bI(Wl(t))}function yM(t,e){var n,r,i,s;return wI(this,void 0,void 0,function*(){try{for(n=II(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Nt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Sr(t,e=0){return pe((n,r)=>{n.subscribe(fe(r,i=>Nt(r,t,()=>r.next(i),e),()=>Nt(r,t,()=>r.complete(),e),i=>Nt(r,t,()=>r.error(i),e)))})}function Ar(t,e=0){return pe((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function CI(t,e){return Ye(t).pipe(Ar(e),Sr(e))}function TI(t,e){return Ye(t).pipe(Ar(e),Sr(e))}function DI(t,e){return new he(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function SI(t,e){return new he(n=>{let r;return Nt(n,e,()=>{r=t[Hl](),Nt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>q(r?.return)&&r.return()})}function Gl(t,e){if(!t)throw new Error("Iterable cannot be null");return new he(n=>{Nt(n,e,()=>{let r=t[Symbol.asyncIterator]();Nt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function AI(t,e){return Gl(Wl(t),e)}function xI(t,e){if(t!=null){if(Bl(t))return CI(t,e);if(Vl(t))return DI(t,e);if(Ul(t))return TI(t,e);if(jl(t))return Gl(t,e);if(zl(t))return SI(t,e);if(ql(t))return AI(t,e)}throw $l(t)}function ze(t,e){return e?xI(t,e):Ye(t)}function G(...t){let e=Dr(t);return ze(t,e)}function ms(t,e){let n=q(t)?t:()=>t,r=i=>i.error(n());return new he(e?i=>e.schedule(r,0,i):r)}function _p(t){return!!t&&(t instanceof he||q(t.lift)&&q(t.subscribe))}var Xn=os(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ce(t,e){return pe((n,r)=>{let i=0;n.subscribe(fe(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:vM}=Array;function wM(t,e){return vM(e)?t(...e):t(e)}function Kl(t){return ce(e=>wM(t,e))}var{isArray:EM}=Array,{getPrototypeOf:IM,prototype:bM,keys:CM}=Object;function Ql(t){if(t.length===1){let e=t[0];if(EM(e))return{args:e,keys:null};if(TM(e)){let n=CM(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function TM(t){return t&&typeof t=="object"&&IM(t)===bM}function Yl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Jl(...t){let e=Dr(t),n=Ll(t),{args:r,keys:i}=Ql(t);if(r.length===0)return ze([],e);let s=new he(DM(r,e,i?o=>Yl(i,o):Vt));return n?s.pipe(Kl(n)):s}function DM(t,e,n=Vt){return r=>{RI(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let l=0;l<i;l++)RI(e,()=>{let u=ze(t[l],e),f=!1;u.subscribe(fe(r,p=>{s[l]=p,f||(f=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function RI(t,e,n){t?Nt(n,t,e):e()}function NI(t,e,n,r,i,s,o,a){let l=[],u=0,f=0,p=!1,m=()=>{p&&!l.length&&!u&&e.complete()},y=N=>u<r?b(N):l.push(N),b=N=>{s&&e.next(N),u++;let P=!1;Ye(n(N,f++)).subscribe(fe(e,B=>{i?.(B),s?y(B):e.next(B)},()=>{P=!0},void 0,()=>{if(P)try{for(u--;l.length&&u<r;){let B=l.shift();o?Nt(e,o,()=>b(B)):b(B)}m()}catch(B){e.error(B)}}))};return t.subscribe(fe(e,y,()=>{p=!0,m()})),()=>{a?.()}}function rt(t,e,n=1/0){return q(e)?rt((r,i)=>ce((s,o)=>e(r,s,i,o))(Ye(t(r,i))),n):(typeof e=="number"&&(n=e),pe((r,i)=>NI(r,i,t,n)))}function yp(t=1/0){return rt(Vt,t)}function MI(){return yp(1)}function _s(...t){return MI()(ze(t,Dr(t)))}function Zl(t){return new he(e=>{Ye(t()).subscribe(e)})}function vp(...t){let e=Ll(t),{args:n,keys:r}=Ql(t),i=new he(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),l=o,u=o;for(let f=0;f<o;f++){let p=!1;Ye(n[f]).subscribe(fe(s,m=>{p||(p=!0,u--),a[f]=m},()=>l--,void 0,()=>{(!l||!p)&&(u||s.next(r?Yl(r,a):a),s.complete())}))}});return e?i.pipe(Kl(e)):i}function dn(t,e){return pe((n,r)=>{let i=0;n.subscribe(fe(r,s=>t.call(e,s,i++)&&r.next(s)))})}function xr(t){return pe((e,n)=>{let r=null,i=!1,s;r=e.subscribe(fe(n,void 0,void 0,o=>{s=Ye(t(o,xr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function PI(t,e,n,r,i){return(s,o)=>{let a=n,l=e,u=0;s.subscribe(fe(o,f=>{let p=u++;l=a?t(l,f,p):(a=!0,f),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function ys(t,e){return q(e)?rt(t,e,1):rt(t,1)}function Rr(t){return pe((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function er(t){return t<=0?()=>Ut:pe((e,n)=>{let r=0;e.subscribe(fe(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function wp(t){return ce(()=>t)}function Xl(t=SM){return pe((e,n)=>{let r=!1;e.subscribe(fe(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function SM(){return new Xn}function oa(t){return pe((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function xn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dn((i,s)=>t(i,s,r)):Vt,er(1),n?Rr(e):Xl(()=>new Xn))}function vs(t){return t<=0?()=>Ut:pe((e,n)=>{let r=[];e.subscribe(fe(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ep(t,e){let n=arguments.length>=2;return r=>r.pipe(t?dn((i,s)=>t(i,s,r)):Vt,vs(1),n?Rr(e):Xl(()=>new Xn))}function Ip(t,e){return pe(PI(t,e,arguments.length>=2,!0))}function bp(...t){let e=Dr(t);return pe((n,r)=>{(e?_s(t,n,e):_s(t,n)).subscribe(r)})}function hn(t,e){return pe((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(fe(r,l=>{i?.unsubscribe();let u=0,f=s++;Ye(t(l,f)).subscribe(i=fe(r,p=>r.next(e?e(l,p,f,u++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Cp(t){return pe((e,n)=>{Ye(t).subscribe(fe(n,()=>n.complete(),ia)),!n.closed&&e.subscribe(n)})}function it(t,e,n){let r=q(t)||e||n?{next:t,error:e,complete:n}:t;return r?pe((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(fe(s,l=>{var u;(u=r.next)===null||u===void 0||u.call(r,l),s.next(l)},()=>{var l;a=!1,(l=r.complete)===null||l===void 0||l.call(r),s.complete()},l=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,l),s.error(l)},()=>{var l,u;a&&((l=r.unsubscribe)===null||l===void 0||l.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):Vt}var y0="https://g.co/ng/security#xss",j=class extends Error{constructor(e,n){super(Dg(e,n)),this.code=e}};function Dg(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _a(t){return{toString:t}.toString()}var eu="__parameters__";function AM(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function v0(t,e,n){return _a(()=>{let r=AM(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(l,u,f){let p=l.hasOwnProperty(eu)?l[eu]:Object.defineProperty(l,eu,{value:[]})[eu];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}function Ae(t){for(let e in t)if(t[e]===Ae)return e;throw Error("Could not find renamed property on target object.")}function xM(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function Ct(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(Ct).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function OI(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var RM=Ae({__forward_ref__:Ae});function Fn(t){return t.__forward_ref__=Fn,t.toString=function(){return Ct(this())},t}function bt(t){return w0(t)?t():t}function w0(t){return typeof t=="function"&&t.hasOwnProperty(RM)&&t.__forward_ref__===Fn}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function vi(t){return{providers:t.providers||[],imports:t.imports||[]}}function Ou(t){return kI(t,I0)||kI(t,b0)}function E0(t){return Ou(t)!==null}function kI(t,e){return t.hasOwnProperty(e)?t[e]:null}function NM(t){let e=t&&(t[I0]||t[b0]);return e||null}function FI(t){return t&&(t.hasOwnProperty(LI)||t.hasOwnProperty(MM))?t[LI]:null}var I0=Ae({\u0275prov:Ae}),LI=Ae({\u0275inj:Ae}),b0=Ae({ngInjectableDef:Ae}),MM=Ae({ngInjectorDef:Ae}),U=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function C0(t){return t&&!!t.\u0275providers}var PM=Ae({\u0275cmp:Ae}),OM=Ae({\u0275dir:Ae}),kM=Ae({\u0275pipe:Ae}),FM=Ae({\u0275mod:Ae}),lu=Ae({\u0275fac:Ae}),la=Ae({__NG_ELEMENT_ID__:Ae}),VI=Ae({__NG_ENV_ID__:Ae});function ku(t){return typeof t=="string"?t:t==null?"":String(t)}function LM(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ku(t)}function VM(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new j(-200,t)}function Sg(t,e){throw new j(-201,!1)}var ie=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ie||{}),Vp;function T0(){return Vp}function Mt(t){let e=Vp;return Vp=t,e}function D0(t,e,n){let r=Ou(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ie.Optional)return null;if(e!==void 0)return e;Sg(t,"Injector")}var UM={},ua=UM,Up="__NG_DI_FLAG__",uu="ngTempTokenPath",BM="ngTokenPath",jM=/\n/gm,$M="\u0275",UI="__source",bs;function HM(){return bs}function Nr(t){let e=bs;return bs=t,e}function zM(t,e=ie.Default){if(bs===void 0)throw new j(-203,!1);return bs===null?D0(t,void 0,e):bs.get(t,e&ie.Optional?null:void 0,e)}function te(t,e=ie.Default){return(T0()||zM)(bt(t),e)}function L(t,e=ie.Default){return te(t,Fu(e))}function Fu(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Bp(t){let e=[];for(let n=0;n<t.length;n++){let r=bt(t[n]);if(Array.isArray(r)){if(r.length===0)throw new j(900,!1);let i,s=ie.Default;for(let o=0;o<r.length;o++){let a=r[o],l=WM(a);typeof l=="number"?l===-1?i=a.token:s|=l:i=a}e.push(te(i,s))}else e.push(te(r))}return e}function S0(t,e){return t[Up]=e,t.prototype[Up]=e,t}function WM(t){return t[Up]}function qM(t,e,n,r){let i=t[uu];throw e[UI]&&i.unshift(e[UI]),t.message=GM(`
`+t.message,i,n,r),t[BM]=i,t[uu]=null,t}function GM(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==$M?t.slice(2):t;let i=Ct(e);if(Array.isArray(e))i=e.map(Ct).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):Ct(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(jM,`
  `)}`}var Pe=S0(v0("Optional"),8);var A0=S0(v0("SkipSelf"),4);function ui(t,e){let n=t.hasOwnProperty(lu);return n?t[lu]:null}function Ag(t,e){t.forEach(n=>Array.isArray(n)?Ag(n,e):e(n))}function x0(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function du(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function KM(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function QM(t,e,n){let r=ya(t,e);return r>=0?t[r|1]=n:(r=~r,KM(t,r,e,n)),r}function Tp(t,e){let n=ya(t,e);if(n>=0)return t[n|1]}function ya(t,e){return YM(t,e,1)}function YM(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var Ts={},qt=[],Ds=new U(""),R0=new U("",-1),N0=new U(""),hu=class{get(e,n=ua){if(n===ua){let r=new Error(`NullInjectorError: No provider for ${Ct(e)}!`);throw r.name="NullInjectorError",r}return n}},M0=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(M0||{}),Mn=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Mn||{}),Or=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Or||{});function JM(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function jp(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];XM(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function ZM(t){return t===3||t===4||t===6}function XM(t){return t.charCodeAt(0)===64}function da(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?BI(t,n,i,null,e[++r]):BI(t,n,i,null,null))}}return t}function BI(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var P0="ng-template";function eP(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&JM(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(xg(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function xg(t){return t.type===4&&t.value!==P0}function tP(t,e,n){let r=t.type===4&&!n?P0:t.value;return e===r}function nP(t,e,n){let r=4,i=t.attrs,s=i!==null?sP(i):0,o=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!o&&!fn(r)&&!fn(l))return!1;if(o&&fn(l))continue;o=!1,r=l|r&1;continue}if(!o)if(r&4){if(r=2|r&1,l!==""&&!tP(t,l,n)||l===""&&e.length===1){if(fn(r))return!1;o=!0}}else if(r&8){if(i===null||!eP(t,i,l,n)){if(fn(r))return!1;o=!0}}else{let u=e[++a],f=rP(l,i,xg(t),n);if(f===-1){if(fn(r))return!1;o=!0;continue}if(u!==""){let p;if(f>s?p="":p=i[f+1].toLowerCase(),r&2&&u!==p){if(fn(r))return!1;o=!0}}}}return fn(r)||o}function fn(t){return(t&1)===0}function rP(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return oP(e,t)}function iP(t,e,n=!1){for(let r=0;r<e.length;r++)if(nP(t,e[r],n))return!0;return!1}function sP(t){for(let e=0;e<t.length;e++){let n=t[e];if(ZM(n))return e}return t.length}function oP(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function jI(t,e){return t?":not("+e.trim()+")":e}function aP(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!fn(o)&&(e+=jI(s,i),i=""),r=o,s=s||!fn(r);n++}return i!==""&&(e+=jI(s,i)),e}function cP(t){return t.map(aP).join(",")}function lP(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!fn(i))break;i=s}r++}return{attrs:e,classes:n}}function Ln(t){return _a(()=>{let e=V0(t),n=se(F({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===M0.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Mn.Emulated,styles:t.styles||qt,_:null,schemas:t.schemas||null,tView:null,id:""});U0(n);let r=t.dependencies;return n.directiveDefs=HI(r,!1),n.pipeDefs=HI(r,!0),n.id=hP(n),n})}function uP(t){return di(t)||O0(t)}function dP(t){return t!==null}function wi(t){return _a(()=>({type:t.type,bootstrap:t.bootstrap||qt,declarations:t.declarations||qt,imports:t.imports||qt,exports:t.exports||qt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $I(t,e){if(t==null)return Ts;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Or.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Or.None?[r,a]:r,e[s]=o):n[s]=r}return n}function We(t){return _a(()=>{let e=V0(t);return U0(e),e})}function Rg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function di(t){return t[PM]||null}function O0(t){return t[OM]||null}function k0(t){return t[kM]||null}function F0(t){let e=di(t)||O0(t)||k0(t);return e!==null?e.standalone:!1}function L0(t,e){let n=t[FM]||null;if(!n&&e===!0)throw new Error(`Type ${Ct(t)} does not have '\u0275mod' property.`);return n}function V0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ts,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||qt,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$I(t.inputs,e),outputs:$I(t.outputs),debugInfo:null}}function U0(t){t.features?.forEach(e=>e(t))}function HI(t,e){if(!t)return null;let n=e?k0:uP;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(dP)}function hP(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Bt(t){return{\u0275providers:t}}function fP(...t){return{\u0275providers:B0(!0,t),\u0275fromNgModule:!0}}function B0(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Ag(e,o=>{let a=o;$p(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&j0(i,s),n}function j0(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Ng(i,s=>{e(s,r)})}}function $p(t,e,n,r){if(t=bt(t),!t)return!1;let i=null,s=FI(t),o=!s&&di(t);if(!s&&!o){let l=t.ngModule;if(s=FI(l),s)i=l;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let l=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let u of l)$p(u,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let u;try{Ag(s.imports,f=>{$p(f,e,n,r)&&(u||=[],u.push(f))})}finally{}u!==void 0&&j0(u,e)}if(!a){let u=ui(i)||(()=>new i);e({provide:i,useFactory:u,deps:qt},i),e({provide:N0,useValue:i,multi:!0},i),e({provide:Ds,useValue:()=>te(i),multi:!0},i)}let l=s.providers;if(l!=null&&!a){let u=t;Ng(l,f=>{e(f,u)})}}else return!1;return i!==t&&t.providers!==void 0}function Ng(t,e){for(let n of t)C0(n)&&(n=n.\u0275providers),Array.isArray(n)?Ng(n,e):e(n)}var pP=Ae({provide:String,useValue:Ae});function $0(t){return t!==null&&typeof t=="object"&&pP in t}function gP(t){return!!(t&&t.useExisting)}function mP(t){return!!(t&&t.useFactory)}function Ss(t){return typeof t=="function"}function _P(t){return!!t.useClass}var Lu=new U(""),iu={},yP={},Dp;function Mg(){return Dp===void 0&&(Dp=new hu),Dp}var Qt=class{},ha=class extends Qt{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,zp(e,o=>this.processProvider(o)),this.records.set(R0,ws(void 0,this)),i.has("environment")&&this.records.set(Qt,ws(void 0,this));let s=this.records.get(Lu);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(N0,qt,ie.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=me(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),me(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Nr(this),r=Mt(void 0),i;try{return e()}finally{Nr(n),Mt(r)}}get(e,n=ua,r=ie.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(VI))return e[VI](this);r=Fu(r);let i,s=Nr(this),o=Mt(void 0);try{if(!(r&ie.SkipSelf)){let l=this.records.get(e);if(l===void 0){let u=bP(e)&&Ou(e);u&&this.injectableDefInScope(u)?l=ws(Hp(e),iu):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=r&ie.Self?Mg():this.parent;return n=r&ie.Optional&&n===ua?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[uu]=a[uu]||[]).unshift(Ct(e)),s)throw a;return qM(a,e,"R3InjectorError",this.source)}else throw a}finally{Mt(o),Nr(s)}}resolveInjectorInitializers(){let e=me(null),n=Nr(this),r=Mt(void 0),i;try{let s=this.get(Ds,qt,ie.Self);for(let o of s)o()}finally{Nr(n),Mt(r),me(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(Ct(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(e){e=bt(e);let n=Ss(e)?e:bt(e&&e.provide),r=wP(e);if(!Ss(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ws(void 0,iu,!0),i.factory=()=>Bp(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=me(null);try{return n.value===iu&&(n.value=yP,n.value=n.factory()),typeof n.value=="object"&&n.value&&IP(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{me(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=bt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function Hp(t){let e=Ou(t),n=e!==null?e.factory:ui(t);if(n!==null)return n;if(t instanceof U)throw new j(204,!1);if(t instanceof Function)return vP(t);throw new j(204,!1)}function vP(t){if(t.length>0)throw new j(204,!1);let n=NM(t);return n!==null?()=>n.factory(t):()=>new t}function wP(t){if($0(t))return ws(void 0,t.useValue);{let e=H0(t);return ws(e,iu)}}function H0(t,e,n){let r;if(Ss(t)){let i=bt(t);return ui(i)||Hp(i)}else if($0(t))r=()=>bt(t.useValue);else if(mP(t))r=()=>t.useFactory(...Bp(t.deps||[]));else if(gP(t))r=()=>te(bt(t.useExisting));else{let i=bt(t&&(t.useClass||t.provide));if(EP(t))r=()=>new i(...Bp(t.deps));else return ui(i)||Hp(i)}return r}function ws(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function EP(t){return!!t.deps}function IP(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function bP(t){return typeof t=="function"||typeof t=="object"&&t instanceof U}function zp(t,e){for(let n of t)Array.isArray(n)?zp(n,e):n&&C0(n)?zp(n.\u0275providers,e):e(n)}function ir(t,e){t instanceof ha&&t.assertNotDestroyed();let n,r=Nr(t),i=Mt(void 0);try{return e()}finally{Nr(r),Mt(i)}}function CP(){return T0()!==void 0||HM()!=null}function TP(t){return typeof t=="function"}var sr=0,le=1,W=2,Tt=3,pn=4,_n=5,fu=6,pu=7,gn=8,As=9,Pn=10,Je=11,fa=12,zI=13,Fs=14,On=15,xs=16,Es=17,Rs=18,Vu=19,z0=20,Mr=21,Sp=22,Gt=23,mn=25,W0=1;var hi=7,gu=8,mu=9,Kt=10,_u=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(_u||{});function Pr(t){return Array.isArray(t)&&typeof t[W0]=="object"}function or(t){return Array.isArray(t)&&t[W0]===!0}function q0(t){return(t.flags&4)!==0}function Uu(t){return t.componentOffset>-1}function Pg(t){return(t.flags&1)===1}function kr(t){return!!t.template}function Wp(t){return(t[W]&512)!==0}var qp=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function G0(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function ar(){return K0}function K0(t){return t.type.prototype.ngOnChanges&&(t.setInput=SP),DP}ar.ngInherit=!0;function DP(){let t=Y0(this),e=t?.current;if(e){let n=t.previous;if(n===Ts)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function SP(t,e,n,r,i){let s=this.declaredInputs[r],o=Y0(t)||AP(t,{previous:Ts,current:null}),a=o.current||(o.current={}),l=o.previous,u=l[s];a[s]=new qp(u&&u.currentValue,n,l===Ts),G0(t,e,i,n)}var Q0="__ngSimpleChanges__";function Y0(t){return t[Q0]||null}function AP(t,e){return t[Q0]=e}var WI=null;var Rn=function(t,e,n){WI?.(t,e,n)},J0="svg",xP="math";function kn(t){for(;Array.isArray(t);)t=t[sr];return t}function Z0(t,e){return kn(e[t])}function Yt(t,e){return kn(e[t.index])}function X0(t,e){return t.data[e]}function eb(t,e){return t[e]}function Vr(t,e){let n=e[t];return Pr(n)?n:n[sr]}function Og(t){return(t[W]&128)===128}function RP(t){return or(t[Tt])}function yu(t,e){return e==null?null:t[e]}function tb(t){t[Es]=0}function nb(t){t[W]&1024||(t[W]|=1024,Og(t)&&ju(t))}function NP(t,e){for(;t>0;)e=e[Fs],t--;return e}function Bu(t){return!!(t[W]&9216||t[Gt]?.dirty)}function Gp(t){t[Pn].changeDetectionScheduler?.notify(8),t[W]&64&&(t[W]|=1024),Bu(t)&&ju(t)}function ju(t){t[Pn].changeDetectionScheduler?.notify(0);let e=fi(t);for(;e!==null&&!(e[W]&8192||(e[W]|=8192,!Og(e)));)e=fi(e)}function rb(t,e){if((t[W]&256)===256)throw new j(911,!1);t[Mr]===null&&(t[Mr]=[]),t[Mr].push(e)}function MP(t,e){if(t[Mr]===null)return;let n=t[Mr].indexOf(e);n!==-1&&t[Mr].splice(n,1)}function fi(t){let e=t[Tt];return or(e)?e[Tt]:e}var ne={lFrame:hb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var ib=!1;function PP(){return ne.lFrame.elementDepthCount}function OP(){ne.lFrame.elementDepthCount++}function kP(){ne.lFrame.elementDepthCount--}function sb(){return ne.bindingsEnabled}function FP(){return ne.skipHydrationRootTNode!==null}function LP(t){return ne.skipHydrationRootTNode===t}function VP(){ne.skipHydrationRootTNode=null}function Te(){return ne.lFrame.lView}function Dt(){return ne.lFrame.tView}function K(t){return ne.lFrame.contextLView=t,t[gn]}function Q(t){return ne.lFrame.contextLView=null,t}function Pt(){let t=ob();for(;t!==null&&t.type===64;)t=t.parent;return t}function ob(){return ne.lFrame.currentTNode}function UP(){let t=ne.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function va(t,e){let n=ne.lFrame;n.currentTNode=t,n.isParent=e}function ab(){return ne.lFrame.isParent}function BP(){ne.lFrame.isParent=!1}function jP(){return ne.lFrame.contextLView}function cb(){return ib}function qI(t){ib=t}function $P(){let t=ne.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function HP(t){return ne.lFrame.bindingIndex=t}function $u(){return ne.lFrame.bindingIndex++}function zP(t){let e=ne.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function WP(){return ne.lFrame.inI18n}function qP(t,e){let n=ne.lFrame;n.bindingIndex=n.bindingRootIndex=t,Kp(e)}function GP(){return ne.lFrame.currentDirectiveIndex}function Kp(t){ne.lFrame.currentDirectiveIndex=t}function KP(t){let e=ne.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function lb(t){ne.lFrame.currentQueryIndex=t}function QP(t){let e=t[le];return e.type===2?e.declTNode:e.type===1?t[_n]:null}function ub(t,e,n){if(n&ie.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ie.Host);)if(i=QP(s),i===null||(s=s[Fs],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=ne.lFrame=db();return r.currentTNode=e,r.lView=t,!0}function kg(t){let e=db(),n=t[le];ne.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function db(){let t=ne.lFrame,e=t===null?null:t.child;return e===null?hb(t):e}function hb(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function fb(){let t=ne.lFrame;return ne.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var pb=fb;function Fg(){let t=fb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function YP(t){return(ne.lFrame.contextLView=NP(t,ne.lFrame.contextLView))[gn]}function Ls(){return ne.lFrame.selectedIndex}function pi(t){ne.lFrame.selectedIndex=t}function Hu(){let t=ne.lFrame;return X0(t.tView,t.selectedIndex)}function zu(){ne.lFrame.currentNamespace=J0}function Lg(){JP()}function JP(){ne.lFrame.currentNamespace=null}function ZP(){return ne.lFrame.currentNamespace}var gb=!0;function Vg(){return gb}function Ug(t){gb=t}function XP(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=K0(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Bg(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:f}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function su(t,e,n){mb(t,e,3,n)}function ou(t,e,n,r){(t[W]&3)===n&&mb(t,e,n,r)}function Ap(t,e){let n=t[W];(n&3)===e&&(n&=16383,n+=1,t[W]=n)}function mb(t,e,n,r){let i=r!==void 0?t[Es]&65535:0,s=r??-1,o=e.length-1,a=0;for(let l=i;l<o;l++)if(typeof e[l+1]=="number"){if(a=e[l],r!=null&&a>=r)break}else e[l]<0&&(t[Es]+=65536),(a<s||s==-1)&&(eO(t,n,e,l),t[Es]=(t[Es]&4294901760)+l+2),l++}function GI(t,e){Rn(4,t,e);let n=me(null);try{e.call(t)}finally{me(n),Rn(5,t,e)}}function eO(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[W]>>14<t[Es]>>16&&(t[W]&3)===e&&(t[W]+=16384,GI(a,s)):GI(a,s)}var Cs=-1,gi=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function tO(t){return t instanceof gi}function nO(t){return(t.flags&8)!==0}function rO(t){return(t.flags&16)!==0}var xp={},Qp=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=Fu(r);let i=this.injector.get(e,xp,r);return i!==xp||n===xp?i:this.parentInjector.get(e,n,r)}};function _b(t){return t!==Cs}function vu(t){return t&32767}function iO(t){return t>>16}function wu(t,e){let n=iO(t),r=e;for(;n>0;)r=r[Fs],n--;return r}var Yp=!0;function Eu(t){let e=Yp;return Yp=t,e}var sO=256,yb=sO-1,vb=5,oO=0,Nn={};function aO(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(la)&&(r=n[la]),r==null&&(r=n[la]=oO++);let i=r&yb,s=1<<i;e.data[t+(i>>vb)]|=s}function Iu(t,e){let n=wb(t,e);if(n!==-1)return n;let r=e[le];r.firstCreatePass&&(t.injectorIndex=e.length,Rp(r.data,t),Rp(e,null),Rp(r.blueprint,null));let i=jg(t,e),s=t.injectorIndex;if(_b(i)){let o=vu(i),a=wu(i,e),l=a[le].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function Rp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function wb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function jg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=Tb(i),r===null)return Cs;if(n++,i=i[Fs],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Cs}function Jp(t,e,n){aO(t,e,n)}function Eb(t,e,n){if(n&ie.Optional||t!==void 0)return t;Sg(e,"NodeInjector")}function Ib(t,e,n,r){if(n&ie.Optional&&r===void 0&&(r=null),!(n&(ie.Self|ie.Host))){let i=t[As],s=Mt(void 0);try{return i?i.get(e,r,n&ie.Optional):D0(e,r,n&ie.Optional)}finally{Mt(s)}}return Eb(r,e,n)}function bb(t,e,n,r=ie.Default,i){if(t!==null){if(e[W]&2048&&!(r&ie.Self)){let o=hO(t,e,n,r,Nn);if(o!==Nn)return o}let s=Cb(t,e,n,r,Nn);if(s!==Nn)return s}return Ib(e,n,r,i)}function Cb(t,e,n,r,i){let s=uO(n);if(typeof s=="function"){if(!ub(e,t,r))return r&ie.Host?Eb(i,n,r):Ib(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ie.Optional))Sg(n);else return o}finally{pb()}}else if(typeof s=="number"){let o=null,a=wb(t,e),l=Cs,u=r&ie.Host?e[On][_n]:null;for((a===-1||r&ie.SkipSelf)&&(l=a===-1?jg(t,e):e[a+8],l===Cs||!QI(r,!1)?a=-1:(o=e[le],a=vu(l),e=wu(l,e)));a!==-1;){let f=e[le];if(KI(s,a,f.data)){let p=cO(a,e,n,o,r,u);if(p!==Nn)return p}l=e[a+8],l!==Cs&&QI(r,e[le].data[a+8]===u)&&KI(s,a,e)?(o=f,a=vu(l),e=wu(l,e)):a=-1}}return i}function cO(t,e,n,r,i,s){let o=e[le],a=o.data[t+8],l=r==null?Uu(a)&&Yp:r!=o&&(a.type&3)!==0,u=i&ie.Host&&s===a,f=lO(a,o,n,l,u);return f!==null?Ns(e,o,f,a):Nn}function lO(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,l=t.directiveStart,u=t.directiveEnd,f=s>>20,p=r?a:a+f,m=i?a+f:u;for(let y=p;y<m;y++){let b=o[y];if(y<l&&n===b||y>=l&&b.type===n)return y}if(i){let y=o[l];if(y&&kr(y)&&y.type===n)return l}return null}function Ns(t,e,n,r){let i=t[n],s=e.data;if(tO(i)){let o=i;o.resolving&&VM(LM(s[n]));let a=Eu(o.canSeeViewProviders);o.resolving=!0;let l,u=o.injectImpl?Mt(o.injectImpl):null,f=ub(t,r,ie.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&XP(n,s[n],e)}finally{u!==null&&Mt(u),Eu(a),o.resolving=!1,pb()}}return i}function uO(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(la)?t[la]:void 0;return typeof e=="number"?e>=0?e&yb:dO:e}function KI(t,e,n){let r=1<<t;return!!(n[e+(t>>vb)]&r)}function QI(t,e){return!(t&ie.Self)&&!(t&ie.Host&&e)}var li=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return bb(this._tNode,this._lView,e,Fu(r),n)}};function dO(){return new li(Pt(),Te())}function cr(t){return _a(()=>{let e=t.prototype.constructor,n=e[lu]||Zp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[lu]||Zp(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zp(t){return w0(t)?()=>{let e=Zp(bt(t));return e&&e()}:ui(t)}function hO(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[W]&2048&&!(o[W]&512);){let a=Cb(s,o,n,r|ie.Self,Nn);if(a!==Nn)return a;let l=s.parent;if(!l){let u=o[z0];if(u){let f=u.get(n,Nn,r);if(f!==Nn)return f}l=Tb(o),o=o[Fs]}s=l}return i}function Tb(t){let e=t[le],n=e.type;return n===2?e.declTNode:n===1?t[_n]:null}function YI(t,e=null,n=null,r){let i=Db(t,e,n,r);return i.resolveInjectorInitializers(),i}function Db(t,e=null,n=null,r,i=new Set){let s=[n||qt,fP(t)];return r=r||(typeof t=="object"?void 0:Ct(t)),new ha(s,e||Mg(),r||null,i)}var ot=class t{static{this.THROW_IF_NOT_FOUND=ua}static{this.NULL=new hu}static create(e,n){if(Array.isArray(e))return YI({name:""},n,e,"");{let r=e.name??"";return YI({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:t,providedIn:"any",factory:()=>te(R0)})}static{this.__NG_ELEMENT_ID__=-1}};var fO=new U("");fO.__NG_ELEMENT_ID__=t=>{let e=Pt();if(e===null)throw new j(204,!1);if(e.type&2)return e.value;if(t&ie.Optional)return null;throw new j(204,!1)};var pO="ngOriginalError";function Np(t){return t[pO]}var Sb=!0,Ab=(()=>{class t{static{this.__NG_ELEMENT_ID__=gO}static{this.__NG_ENV_ID__=n=>n}}return t})(),Xp=class extends Ab{constructor(e){super(),this._lView=e}onDestroy(e){return rb(this._lView,e),()=>MP(this._lView,e)}};function gO(){return new Xp(Te())}var Vs=(()=>{class t{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new lt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}}return t})();var eg=class extends ct{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,CP()&&(this.destroyRef=L(Ab,{optional:!0})??void 0,this.pendingTasks=L(Vs,{optional:!0})??void 0)}emit(e){let n=me(null);try{super.next(e)}finally{me(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=this.wrapInTimeout(s),i&&(i=this.wrapInTimeout(i)),o&&(o=this.wrapInTimeout(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof Ue&&e.add(a),a}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(n),r!==void 0&&this.pendingTasks?.remove(r)})}}},Le=eg;function bu(...t){}function xb(t){let e,n;function r(){t=bu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function JI(t){return queueMicrotask(()=>t()),()=>{t=bu}}var $g="isAngularZone",Cu=$g+"_ID",mO=0,ve=class t{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Le(!1),this.onMicrotaskEmpty=new Le(!1),this.onStable=new Le(!1),this.onError=new Le(!1);let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:s=Sb}=e;if(typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!i&&r,o.shouldCoalesceRunChangeDetection=i,o.callbackScheduled=!1,o.scheduleInRootZone=s,vO(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get($g)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new j(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,_O,bu,bu);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},_O={};function Hg(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function yO(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){xb(()=>{t.callbackScheduled=!1,tg(t),t.isCheckStableRunning=!0,Hg(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),tg(t)}function vO(t){let e=()=>{yO(t)},n=mO++;t._inner=t._inner.fork({name:"angular",properties:{[$g]:!0,[Cu]:n,[Cu+n]:!0},onInvokeTask:(r,i,s,o,a,l)=>{if(wO(l))return r.invokeTask(s,o,a,l);try{return ZI(t),r.invokeTask(s,o,a,l)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),XI(t)}},onInvoke:(r,i,s,o,a,l,u)=>{try{return ZI(t),r.invoke(s,o,a,l,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!EO(l)&&e(),XI(t)}},onHasTask:(r,i,s,o)=>{r.hasTask(s,o),i===s&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,tg(t),Hg(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(r,i,s,o)=>(r.handleError(s,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function tg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function ZI(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function XI(t){t._nesting--,Hg(t)}var ng=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Le,this.onMicrotaskEmpty=new Le,this.onStable=new Le,this.onError=new Le}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function wO(t){return Rb(t,"__ignore_ng_zone__")}function EO(t){return Rb(t,"__scheduler_tick__")}function Rb(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var tr=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Np(e);for(;n&&Np(n);)n=Np(n);return n||null}},IO=new U("",{providedIn:"root",factory:()=>{let t=L(ve),e=L(tr);return n=>t.runOutsideAngular(()=>e.handleError(n))}});function bO(){return Wu(Pt(),Te())}function Wu(t,e){return new lr(Yt(t,e))}var lr=(()=>{class t{constructor(n){this.nativeElement=n}static{this.__NG_ELEMENT_ID__=bO}}return t})();function Nb(t){return(t.flags&128)===128}var Mb=new Map,CO=0;function TO(){return CO++}function DO(t){Mb.set(t[Vu],t)}function rg(t){Mb.delete(t[Vu])}var e0="__ngContext__";function mi(t,e){Pr(e)?(t[e0]=e[Vu],DO(e)):t[e0]=e}function Pb(t){return kb(t[fa])}function Ob(t){return kb(t[pn])}function kb(t){for(;t!==null&&!or(t);)t=t[pn];return t}var ig;function Fb(t){ig=t}function SO(){if(ig!==void 0)return ig;if(typeof document<"u")return document;throw new j(210,!1)}var zg=new U("",{providedIn:"root",factory:()=>AO}),AO="ng",Wg=new U(""),ur=new U("",{providedIn:"platform",factory:()=>"unknown"});var qg=new U("",{providedIn:"root",factory:()=>SO().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xO="h",RO="b";var NO=()=>null;function Gg(t,e,n=!1){return NO(t,e,n)}var Lb=!1,MO=new U("",{providedIn:"root",factory:()=>Lb});var Tu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${y0})`}};function qu(t){return t instanceof Tu?t.changingThisBreaksApplicationSecurity:t}function Vb(t,e){let n=PO(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${y0})`)}return n===e}function PO(t){return t instanceof Tu&&t.getTypeName()||null}var OO=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ub(t){return t=String(t),t.match(OO)?t:"unsafe:"+t}var Kg=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Kg||{});function Us(t){let e=kO();return e?e.sanitize(Kg.URL,t)||"":Vb(t,"URL")?qu(t):Ub(ku(t))}function kO(){let t=Te();return t&&t[Pn].sanitizer}function Bb(t){return t instanceof Function?t():t}var nr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(nr||{}),FO;function Qg(t,e){return FO(t,e)}function Is(t,e,n,r,i){if(r!=null){let s,o=!1;or(r)?s=r:Pr(r)&&(o=!0,r=r[sr]);let a=kn(r);t===0&&n!==null?i==null?Wb(e,n,a):Du(e,n,a,i||null,!0):t===1&&n!==null?Du(e,n,a,i||null,!0):t===2?JO(e,a,o):t===3&&e.destroyNode(a),s!=null&&XO(e,t,s,n,i)}}function LO(t,e){return t.createText(e)}function VO(t,e,n){t.setValue(e,n)}function jb(t,e,n){return t.createElement(e,n)}function UO(t,e){$b(t,e),e[sr]=null,e[_n]=null}function BO(t,e,n,r,i,s){r[sr]=i,r[_n]=e,Gu(t,r,n,1,i,s)}function $b(t,e){e[Pn].changeDetectionScheduler?.notify(9),Gu(t,e,e[Je],2,null,null)}function jO(t){let e=t[fa];if(!e)return Mp(t[le],t);for(;e;){let n=null;if(Pr(e))n=e[fa];else{let r=e[Kt];r&&(n=r)}if(!n){for(;e&&!e[pn]&&e!==t;)Pr(e)&&Mp(e[le],e),e=e[Tt];e===null&&(e=t),Pr(e)&&Mp(e[le],e),n=e&&e[pn]}e=n}}function $O(t,e,n,r){let i=Kt+r,s=n.length;r>0&&(n[i-1][pn]=e),r<s-Kt?(e[pn]=n[i],x0(n,Kt+r,e)):(n.push(e),e[pn]=null),e[Tt]=n;let o=e[xs];o!==null&&n!==o&&Hb(o,e);let a=e[Rs];a!==null&&a.insertView(t),Gp(e),e[W]|=128}function Hb(t,e){let n=t[mu],r=e[Tt];if(Pr(r))t[W]|=_u.HasTransplantedViews;else{let i=r[Tt][On];e[On]!==i&&(t[W]|=_u.HasTransplantedViews)}n===null?t[mu]=[e]:n.push(e)}function Yg(t,e){let n=t[mu],r=n.indexOf(e);n.splice(r,1)}function sg(t,e){if(t.length<=Kt)return;let n=Kt+e,r=t[n];if(r){let i=r[xs];i!==null&&i!==t&&Yg(i,r),e>0&&(t[n-1][pn]=r[pn]);let s=du(t,Kt+e);UO(r[le],r);let o=s[Rs];o!==null&&o.detachView(s[le]),r[Tt]=null,r[pn]=null,r[W]&=-129}return r}function zb(t,e){if(!(e[W]&256)){let n=e[Je];n.destroyNode&&Gu(t,e,n,3,null,null),jO(e)}}function Mp(t,e){if(e[W]&256)return;let n=me(null);try{e[W]&=-129,e[W]|=256,e[Gt]&&np(e[Gt]),zO(t,e),HO(t,e),e[le].type===1&&e[Je].destroy();let r=e[xs];if(r!==null&&or(e[Tt])){r!==e[Tt]&&Yg(r,e);let i=e[Rs];i!==null&&i.detachView(t)}rg(e)}finally{me(n)}}function HO(t,e){let n=t.cleanup,r=e[pu];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[pu]=null);let i=e[Mr];if(i!==null){e[Mr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function zO(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof gi)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],l=s[o+1];Rn(4,a,l);try{l.call(a)}finally{Rn(5,a,l)}}else{Rn(4,i,s);try{s.call(i)}finally{Rn(5,i,s)}}}}}function WO(t,e,n){return qO(t,e.parent,n)}function qO(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[sr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===Mn.None||s===Mn.Emulated)return null}return Yt(r,n)}}function Du(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Wb(t,e,n){t.appendChild(e,n)}function t0(t,e,n,r,i){r!==null?Du(t,e,n,r,i):Wb(t,e,n)}function qb(t,e){return t.parentNode(e)}function GO(t,e){return t.nextSibling(e)}function KO(t,e,n){return YO(t,e,n)}function QO(t,e,n){return t.type&40?Yt(t,n):null}var YO=QO,n0;function Jg(t,e,n,r){let i=WO(t,r,e),s=e[Je],o=r.parent||e[_n],a=KO(o,r,e);if(i!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)t0(s,i,n[l],a,!1);else t0(s,i,n,a,!1);n0!==void 0&&n0(s,r,e,n,i)}function aa(t,e){if(e!==null){let n=e.type;if(n&3)return Yt(e,t);if(n&4)return og(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return aa(t,r);{let i=t[e.index];return or(i)?og(-1,i):kn(i)}}else{if(n&128)return aa(t,e.next);if(n&32)return Qg(e,t)()||kn(t[e.index]);{let r=Gb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=fi(t[On]);return aa(i,r)}else return aa(t,e.next)}}}return null}function Gb(t,e){if(e!==null){let r=t[On][_n],i=e.projection;return r.projection[i]}return null}function og(t,e){let n=Kt+t+1;if(n<e.length){let r=e[n],i=r[le].firstChild;if(i!==null)return aa(r,i)}return e[hi]}function JO(t,e,n){t.removeChild(null,e,n)}function Zg(t,e,n,r,i,s,o){for(;n!=null;){if(n.type===128){n=n.next;continue}let a=r[n.index],l=n.type;if(o&&e===0&&(a&&mi(kn(a),r),n.flags|=2),(n.flags&32)!==32)if(l&8)Zg(t,e,n.child,r,i,s,!1),Is(e,t,i,a,s);else if(l&32){let u=Qg(n,r),f;for(;f=u();)Is(e,t,i,f,s);Is(e,t,i,a,s)}else l&16?ZO(t,e,r,n,i,s):Is(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Gu(t,e,n,r,i,s){Zg(n,r,t.firstChild,e,i,s,!1)}function ZO(t,e,n,r,i,s){let o=n[On],l=o[_n].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++){let f=l[u];Is(e,t,i,f,s)}else{let u=l,f=o[Tt];Nb(r)&&(u.flags|=128),Zg(t,e,u,f,i,s,!0)}}function XO(t,e,n,r,i){let s=n[hi],o=kn(n);s!==o&&Is(e,t,r,s,i);for(let a=Kt;a<n.length;a++){let l=n[a];Gu(l[le],l,t,e,r,s)}}function ek(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:nr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=nr.Important),t.setStyle(n,r,i,s))}}function tk(t,e,n){t.setAttribute(e,"style",n)}function Kb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Qb(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&jp(t,e,r),i!==null&&Kb(t,e,i),s!==null&&tk(t,e,s)}var Ur={};function V(t=1){Yb(Dt(),Te(),Ls()+t,!1)}function Yb(t,e,n,r){if(!r)if((e[W]&3)===3){let s=t.preOrderCheckHooks;s!==null&&su(e,s,n)}else{let s=t.preOrderHooks;s!==null&&ou(e,s,0,n)}pi(n)}function re(t,e=ie.Default){let n=Te();if(n===null)return te(t,e);let r=Pt();return bb(r,n,bt(t),e)}function Jb(t,e,n,r,i,s){let o=me(null);try{let a=null;i&Or.SignalBased&&(a=e[r][Zn]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Or.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):G0(e,a,r,s)}finally{me(o)}}function nk(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)pi(~i);else{let s=i,o=n[++r],a=n[++r];qP(o,s);let l=e[s];a(2,l)}}}finally{pi(-1)}}function Ku(t,e,n,r,i,s,o,a,l,u,f){let p=e.blueprint.slice();return p[sr]=i,p[W]=r|4|128|8|64,(u!==null||t&&t[W]&2048)&&(p[W]|=2048),tb(p),p[Tt]=p[Fs]=t,p[gn]=n,p[Pn]=o||t&&t[Pn],p[Je]=a||t&&t[Je],p[As]=l||t&&t[As]||null,p[_n]=s,p[Vu]=TO(),p[fu]=f,p[z0]=u,p[On]=e.type==2?t[On]:p,p}function Qu(t,e,n,r,i){let s=t.data[e];if(s===null)s=rk(t,e,n,r,i),WP()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=UP();s.injectorIndex=o===null?-1:o.injectorIndex}return va(s,!0),s}function rk(t,e,n,r,i){let s=ob(),o=ab(),a=o?s:s&&s.parent,l=t.data[e]=ck(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=l),s!==null&&(o?s.child==null&&l.parent!==null&&(s.child=l):s.next===null&&(s.next=l,l.prev=s)),l}function Zb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xb(t,e,n,r,i){let s=Ls(),o=r&2;try{pi(-1),o&&e.length>mn&&Yb(t,e,mn,!1),Rn(o?2:0,i),n(r,i)}finally{pi(s),Rn(o?3:1,i)}}function eC(t,e,n){if(q0(e)){let r=me(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let l=n[o];a.contentQueries(1,l,o)}}}finally{me(r)}}}function tC(t,e,n){sb()&&(pk(t,e,n,Yt(n,e)),(n.flags&64)===64&&oC(t,e,n))}function nC(t,e,n=Yt){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function rC(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=Xg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function Xg(t,e,n,r,i,s,o,a,l,u,f){let p=mn+r,m=p+i,y=ik(p,m),b=typeof u=="function"?u():u;return y[le]={type:t,blueprint:y,template:n,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:l,consts:b,incompleteFirstPass:!1,ssrId:f}}function ik(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:Ur);return n}function sk(t,e,n,r){let s=r.get(MO,Lb)||n===Mn.ShadowDom,o=t.selectRootElement(e,s);return ok(o),o}function ok(t){ak(t)}var ak=()=>null;function ck(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return FP()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function r0(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,l=Or.None;Array.isArray(o)?(a=o[0],l=o[1]):a=o;let u=s;if(i!==null){if(!i.hasOwnProperty(s))continue;u=i[s]}t===0?i0(r,n,u,a,l):i0(r,n,u,a)}return r}function i0(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function lk(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],l=null,u=null;for(let f=r;f<i;f++){let p=s[f],m=n?n.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;l=r0(0,p.inputs,f,l,y),u=r0(1,p.outputs,f,u,b);let N=l!==null&&o!==null&&!xg(e)?Tk(l,f,o):null;a.push(N)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=u}function uk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function em(t,e,n,r,i,s,o,a){let l=Yt(e,n),u=e.inputs,f;!a&&u!=null&&(f=u[r])?(tm(t,n,f,r,i),Uu(e)&&dk(n,e.index)):e.type&3?(r=uk(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(l,r,i)):e.type&12}function dk(t,e){let n=Vr(e,t);n[W]&16||(n[W]|=64)}function iC(t,e,n,r){if(sb()){let i=r===null?null:{"":-1},s=mk(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&sC(t,e,n,o,i,a),i&&_k(n,r,i)}n.mergedAttrs=da(n.mergedAttrs,n.attrs)}function sC(t,e,n,r,i,s){for(let u=0;u<r.length;u++)Jp(Iu(n,e),t,r[u].type);vk(n,t.data.length,r.length);for(let u=0;u<r.length;u++){let f=r[u];f.providersResolver&&f.providersResolver(f)}let o=!1,a=!1,l=Zb(t,e,r.length,null);for(let u=0;u<r.length;u++){let f=r[u];n.mergedAttrs=da(n.mergedAttrs,f.hostAttrs),wk(t,n,e,l,f),yk(l,f,i),f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}lk(t,n,s)}function hk(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;fk(o)!=a&&o.push(a),o.push(n,r,s)}}function fk(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function pk(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Uu(n)&&Ek(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||Iu(n,e),mi(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let l=t.data[a],u=Ns(e,t,a,n);if(mi(u,e),o!==null&&Ck(e,a-i,u,l,n,o),kr(l)){let f=Vr(n.index,e);f[gn]=Ns(e,t,a,n)}}}function oC(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=GP();try{pi(s);for(let a=r;a<i;a++){let l=t.data[a],u=e[a];Kp(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&gk(l,u)}}finally{pi(-1),Kp(o)}}function gk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function mk(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(iP(e,o.selectors,!1))if(r||(r=[]),kr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let l=a.length;ag(t,e,l)}else r.unshift(o),ag(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function ag(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function _k(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new j(-301,!1);r.push(e[i],s)}}}function yk(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kr(e)&&(n[""]=t)}}function vk(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function wk(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=ui(i.type,!0)),o=new gi(s,kr(i),re);t.blueprint[r]=o,n[r]=o,hk(t,e,r,Zb(t,n,i.hostVars,Ur),i)}function Ek(t,e,n){let r=Yt(e,t),i=rC(n),s=t[Pn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Yu(t,Ku(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function Ik(t,e,n,r,i,s){let o=Yt(t,e);bk(e[Je],o,s,t.value,n,r,i)}function bk(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?ku(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function Ck(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let l=o[a++],u=o[a++],f=o[a++],p=o[a++];Jb(r,n,l,u,f,p)}}function Tk(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function aC(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function cC(t,e){let n=t.contentQueries;if(n!==null){let r=me(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];lb(s),a.contentQueries(2,e[o],o)}}}finally{me(r)}}}function Yu(t,e){return t[fa]?t[zI][pn]=e:t[fa]=e,t[zI]=e,e}function cg(t,e,n){lb(0);let r=me(null);try{e(t,n)}finally{me(r)}}function Dk(t){return t[pu]??=[]}function Sk(t){return t.cleanup??=[]}function lC(t,e){let n=t[As],r=n?n.get(tr,null):null;r&&r.handleError(e)}function tm(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],l=n[s++],u=e[o],f=t.data[o];Jb(f,u,r,a,l,i)}}function Ak(t,e,n){let r=Z0(e,t);VO(t[Je],r,n)}function xk(t,e){let n=Vr(e,t),r=n[le];Rk(r,n);let i=n[sr];i!==null&&n[fu]===null&&(n[fu]=Gg(i,n[As])),nm(r,n,n[gn])}function Rk(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function nm(t,e,n){kg(e);try{let r=t.viewQuery;r!==null&&cg(1,r,n);let i=t.template;i!==null&&Xb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[Rs]?.finishViewCreation(t),t.staticContentQueries&&cC(t,e),t.staticViewQueries&&cg(2,t.viewQuery,n);let s=t.components;s!==null&&Nk(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[W]&=-5,Fg()}}function Nk(t,e){for(let n=0;n<e.length;n++)xk(t,e[n])}function Mk(t,e,n,r){let i=me(null);try{let s=e.tView,a=t[W]&4096?4096:16,l=Ku(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=t[e.index];l[xs]=u;let f=t[Rs];return f!==null&&(l[Rs]=f.createEmbeddedView(s)),nm(s,l,n),l}finally{me(i)}}function s0(t,e){return!e||e.firstChild===null||Nb(t)}function Pk(t,e,n,r=!0){let i=e[le];if($O(i,e,t,n),r){let o=og(n,t),a=e[Je],l=qb(a,t[hi]);l!==null&&BO(i,t[_n],a,e,l,o)}let s=e[fu];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function Su(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let s=e[n.index];s!==null&&r.push(kn(s)),or(s)&&Ok(s,r);let o=n.type;if(o&8)Su(t,e,n.child,r);else if(o&32){let a=Qg(n,e),l;for(;l=a();)r.push(l)}else if(o&16){let a=Gb(e,n);if(Array.isArray(a))r.push(...a);else{let l=fi(e[On]);Su(l[le],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Ok(t,e){for(let n=Kt;n<t.length;n++){let r=t[n],i=r[le].firstChild;i!==null&&Su(r[le],r,i,e)}t[hi]!==t[sr]&&e.push(t[hi])}var uC=[];function kk(t){return t[Gt]??Fk(t)}function Fk(t){let e=uC.pop()??Object.create(Vk);return e.lView=t,e}function Lk(t){t.lView[Gt]!==t&&(t.lView=null,uC.push(t))}var Vk=se(F({},ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{ju(t.lView)},consumerOnSignalRead(){this.lView[Gt]=this}});function Uk(t){let e=t[Gt]??Object.create(Bk);return e.lView=t,e}var Bk=se(F({},ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=fi(t.lView);for(;e&&!dC(e[le]);)e=fi(e);e&&nb(e)},consumerOnSignalRead(){this.lView[Gt]=this}});function dC(t){return t.type!==2}var jk=100;function hC(t,e=!0,n=0){let r=t[Pn],i=r.rendererFactory,s=!1;s||i.begin?.();try{$k(t,n)}catch(o){throw e&&lC(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function $k(t,e){let n=cb();try{qI(!0),lg(t,e);let r=0;for(;Bu(t);){if(r===jk)throw new j(103,!1);r++,lg(t,1)}}finally{qI(n)}}function Hk(t,e,n,r){let i=e[W];if((i&256)===256)return;let s=!1,o=!1;!s&&e[Pn].inlineEffectRunner?.flush(),kg(e);let a=!0,l=null,u=null;s||(dC(t)?(u=kk(e),l=Dl(u)):YE()===null?(a=!1,u=Uk(e),l=Dl(u)):e[Gt]&&(np(e[Gt]),e[Gt]=null));try{tb(e),HP(t.bindingStartIndex),n!==null&&Xb(t,e,n,2,r);let f=(i&3)===3;if(!s)if(f){let y=t.preOrderCheckHooks;y!==null&&su(e,y,null)}else{let y=t.preOrderHooks;y!==null&&ou(e,y,0,null),Ap(e,0)}if(o||zk(e),fC(e,0),t.contentQueries!==null&&cC(t,e),!s)if(f){let y=t.contentCheckHooks;y!==null&&su(e,y)}else{let y=t.contentHooks;y!==null&&ou(e,y,1),Ap(e,1)}nk(t,e);let p=t.components;p!==null&&gC(e,p,0);let m=t.viewQuery;if(m!==null&&cg(2,m,r),!s)if(f){let y=t.viewCheckHooks;y!==null&&su(e,y)}else{let y=t.viewHooks;y!==null&&ou(e,y,2),Ap(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Sp]){for(let y of e[Sp])y();e[Sp]=null}s||(e[W]&=-73)}catch(f){throw s||ju(e),f}finally{u!==null&&(ep(u,l),a&&Lk(u)),Fg()}}function fC(t,e){for(let n=Pb(t);n!==null;n=Ob(n))for(let r=Kt;r<n.length;r++){let i=n[r];pC(i,e)}}function zk(t){for(let e=Pb(t);e!==null;e=Ob(e)){if(!(e[W]&_u.HasTransplantedViews))continue;let n=e[mu];for(let r=0;r<n.length;r++){let i=n[r];nb(i)}}}function Wk(t,e,n){let r=Vr(e,t);pC(r,n)}function pC(t,e){Og(t)&&lg(t,e)}function lg(t,e){let r=t[le],i=t[W],s=t[Gt],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&tp(s)),o||=!1,s&&(s.dirty=!1),t[W]&=-9217,o)Hk(r,t,r.template,t[gn]);else if(i&8192){fC(t,1);let a=r.components;a!==null&&gC(t,a,1)}}function gC(t,e,n){for(let r=0;r<e.length;r++)Wk(t,e[r],n)}function rm(t,e){let n=cb()?64:1088;for(t[Pn].changeDetectionScheduler?.notify(e);t;){t[W]|=n;let r=fi(t);if(Wp(t)&&!r)return t;t=r}return null}var _i=class{get rootNodes(){let e=this._lView,n=e[le];return Su(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[gn]}set context(e){this._lView[gn]=e}get destroyed(){return(this._lView[W]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tt];if(or(e)){let n=e[gu],r=n?n.indexOf(this):-1;r>-1&&(sg(e,r),du(n,r))}this._attachedToViewContainer=!1}zb(this._lView[le],this._lView)}onDestroy(e){rb(this._lView,e)}markForCheck(){rm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[W]&=-129}reattach(){Gp(this._lView),this._lView[W]|=128}detectChanges(){this._lView[W]|=1024,hC(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Wp(this._lView),n=this._lView[xs];n!==null&&!e&&Yg(n,this._lView),$b(this._lView[le],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=e;let n=Wp(this._lView),r=this._lView[xs];r!==null&&!n&&Hb(r,this._lView),Gp(this._lView)}},Ju=(()=>{class t{static{this.__NG_ELEMENT_ID__=Kk}}return t})(),qk=Ju,Gk=class extends qk{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=Mk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new _i(i)}};function Kk(){return Qk(Pt(),Te())}function Qk(t,e){return t.type&4?new Gk(e,t,Wu(t,e)):null}var N7=new RegExp(`^(\\d+)*(${RO}|${xO})*(.*)`);var Yk=()=>null;function o0(t,e){return Yk(t,e)}var Ms=class{},im=new U("",{providedIn:"root",factory:()=>!1});var mC=new U(""),_C=new U(""),ug=class{},Au=class{};function Jk(t){let e=Error(`No component factory found for ${Ct(t)}.`);return e[Zk]=t,e}var Zk="ngComponent";var dg=class{resolveComponentFactory(e){throw Jk(e)}},Ps=class{static{this.NULL=new dg}},Os=class{},Br=(()=>{class t{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>Xk()}}return t})();function Xk(){let t=Te(),e=Pt(),n=Vr(e.index,t);return(Pr(n)?n:t)[Je]}var e1=(()=>{class t{static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>null})}}return t})();function hg(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=OI(i,a);else if(s==2){let l=a,u=e[++o];r=OI(r,l+": "+u+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var xu=class extends Ps{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=di(e);return new pa(n,this.ngModule)}};function a0(t,e){let n=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let i=t[r];if(i===void 0)continue;let s=Array.isArray(i),o=s?i[0]:i,a=s?i[1]:Or.None;e?n.push({propName:o,templateName:r,isSignal:(a&Or.SignalBased)!==0}):n.push({propName:o,templateName:r})}return n}function t1(t){let e=t.toLowerCase();return e==="svg"?J0:e==="math"?xP:null}var pa=class extends Au{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=a0(e.inputs,!0);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return a0(this.componentDef.outputs,!1)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=cP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=me(null);try{i=i||this.ngModule;let o=i instanceof Qt?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new Qp(e,o):e,l=a.get(Os,null);if(l===null)throw new j(407,!1);let u=a.get(e1,null),f=a.get(Ms,null),p={rendererFactory:l,sanitizer:u,inlineEffectRunner:null,changeDetectionScheduler:f},m=l.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?sk(m,r,this.componentDef.encapsulation,a):jb(m,y,t1(y)),N=512;this.componentDef.signals?N|=4096:this.componentDef.onPush||(N|=16);let P=null;b!==null&&(P=Gg(b,a,!0));let B=Xg(0,null,null,1,0,null,null,null,null,null,null),Z=Ku(null,B,null,N,null,null,p,m,a,null,P);kg(Z);let z,ee,tt=null;try{let _e=this.componentDef,I,_=null;_e.findHostDirectiveDefs?(I=[],_=new Map,_e.findHostDirectiveDefs(_e,I,_),I.push(_e)):I=[_e];let w=n1(Z,b);tt=r1(w,b,_e,I,Z,p,m),ee=X0(B,mn),b&&o1(m,_e,b,r),n!==void 0&&a1(ee,this.ngContentSelectors,n),z=s1(tt,_e,I,_,Z,[c1]),nm(B,Z,null)}catch(_e){throw tt!==null&&rg(tt),rg(Z),_e}finally{Fg()}return new fg(this.componentType,z,Wu(ee,Z),Z,ee)}finally{me(s)}}},fg=class extends ug{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new _i(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;tm(s[le],s,i,e,n),this.previousInputValues.set(e,n);let o=Vr(this._tNode.index,s);rm(o,1)}}get injector(){return new li(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function n1(t,e){let n=t[le],r=mn;return t[r]=e,Qu(n,r,2,"#host",null)}function r1(t,e,n,r,i,s,o){let a=i[le];i1(r,t,e,o);let l=null;e!==null&&(l=Gg(e,i[As]));let u=s.rendererFactory.createRenderer(e,n),f=16;n.signals?f=4096:n.onPush&&(f=64);let p=Ku(i,rC(n),null,f,i[t.index],t,s,u,null,null,l);return a.firstCreatePass&&ag(a,t,r.length-1),Yu(i,p),i[t.index]=p}function i1(t,e,n,r){for(let i of t)e.mergedAttrs=da(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(hg(e,e.mergedAttrs,!0),n!==null&&Qb(r,n,e))}function s1(t,e,n,r,i,s){let o=Pt(),a=i[le],l=Yt(o,i);sC(a,i,o,n,null,r);for(let f=0;f<n.length;f++){let p=o.directiveStart+f,m=Ns(i,a,p,o);mi(m,i)}oC(a,i,o),l&&mi(l,i);let u=Ns(i,a,o.directiveStart+o.componentOffset,o);if(t[gn]=i[gn]=u,s!==null)for(let f of s)f(u,e);return eC(a,o,i),u}function o1(t,e,n,r){if(r)jp(t,n,["ng-version","18.2.13"]);else{let{attrs:i,classes:s}=lP(e.selectors[0]);i&&jp(t,n,i),s&&s.length>0&&Kb(t,n,s.join(" "))}}function a1(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function c1(){let t=Pt();Bg(Te()[le],t)}var Bs=(()=>{class t{static{this.__NG_ELEMENT_ID__=l1}}return t})();function l1(){let t=Pt();return d1(t,Te())}var u1=Bs,yC=class extends u1{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Wu(this._hostTNode,this._hostLView)}get injector(){return new li(this._hostTNode,this._hostLView)}get parentInjector(){let e=jg(this._hostTNode,this._hostLView);if(_b(e)){let n=wu(e,this._hostLView),r=vu(e),i=n[le].data[r+8];return new li(i,n)}else return new li(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=c0(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Kt}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=o0(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,s0(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!TP(e),a;if(o)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let l=o?e:new pa(di(e)),u=r||this.parentInjector;if(!s&&l.ngModule==null){let N=(o?u:this.parentInjector).get(Qt,null);N&&(s=N)}let f=di(l.componentType??{}),p=o0(this._lContainer,f?.id??null),m=p?.firstChild??null,y=l.create(u,i,m,s);return this.insertImpl(y.hostView,a,s0(this._hostTNode,p)),y}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(RP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=i[Tt],u=new yC(l,l[_n],l[Tt]);u.detach(u.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return Pk(o,i,s,r),e.attachToViewContainerRef(),x0(Pp(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=c0(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=sg(this._lContainer,n);r&&(du(Pp(this._lContainer),n),zb(r[le],r))}detach(e){let n=this._adjustIndex(e,-1),r=sg(this._lContainer,n);return r&&du(Pp(this._lContainer),n)!=null?new _i(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function c0(t){return t[gu]}function Pp(t){return t[gu]||(t[gu]=[])}function d1(t,e){let n,r=e[t.index];return or(r)?n=r:(n=aC(r,e,null,t),e[t.index]=n,Yu(e,n)),f1(n,e,t,r),new yC(n,t,e)}function h1(t,e){let n=t[Je],r=n.createComment(""),i=Yt(e,t),s=qb(n,i);return Du(n,s,r,GO(n,i),!1),r}var f1=m1,p1=()=>!1;function g1(t,e,n){return p1(t,e,n)}function m1(t,e,n,r){if(t[hi])return;let i;n.type&8?i=kn(r):i=h1(e,n),t[hi]=i}var l0=new Set;function Zu(t){l0.has(t)||(l0.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function _1(t){return typeof t=="function"&&t[Zn]!==void 0}function wa(t,e){Zu("NgSignals");let n=aI(t),r=n[Zn];return e?.equal&&(r.equal=e.equal),n.set=i=>rp(r,i),n.update=i=>cI(r,i),n.asReadonly=y1.bind(n),n}function y1(){let t=this[Zn];if(t.readonlyFn===void 0){let e=()=>this();e[Zn]=t,t.readonlyFn=e}return t.readonlyFn}function vC(t){return _1(t)&&typeof t.set=="function"}function v1(t){return Object.getPrototypeOf(t.prototype).constructor}function Jt(t){let e=v1(t.type),n=!0,r=[t];for(;e;){let i;if(kr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new j(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=tu(t.inputs),o.inputTransforms=tu(t.inputTransforms),o.declaredInputs=tu(t.declaredInputs),o.outputs=tu(t.outputs);let a=i.hostBindings;a&&C1(t,a);let l=i.viewQuery,u=i.contentQueries;if(l&&I1(t,l),u&&b1(t,u),w1(t,i),xM(t.outputs,i.outputs),kr(i)&&i.data.animation){let f=t.data;f.animation=(f.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Jt&&(n=!1)}}e=Object.getPrototypeOf(e)}E1(r)}function w1(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function E1(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=da(i.hostAttrs,n=da(n,i.hostAttrs))}}function tu(t){return t===Ts?{}:t===qt?[]:t}function I1(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function b1(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function C1(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}var Fr=class{},ga=class{};var pg=class extends Fr{constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new xu(this);let s=L0(e);this._bootstrapComponents=Bb(s.bootstrap),this._r3Injector=Db(e,n,[{provide:Fr,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver},...r],Ct(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gg=class extends ga{constructor(e){super(),this.moduleType=e}create(e){return new pg(this.moduleType,e,[])}};var Ru=class extends Fr{constructor(e){super(),this.componentFactoryResolver=new xu(this),this.instance=null;let n=new ha([...e.providers,{provide:Fr,useValue:this},{provide:Ps,useValue:this.componentFactoryResolver}],e.parent||Mg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function sm(t,e,n=null){return new Ru({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function wC(t){return D1(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function T1(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function D1(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function S1(t,e,n){return t[e]=n}function Lr(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function A1(t,e,n,r){let i=Lr(t,e,n);return Lr(t,e+1,r)||i}function x1(t,e,n,r,i){let s=A1(t,e,n,r);return Lr(t,e+2,i)||s}function R1(t){return(t.flags&32)===32}function N1(t,e,n,r,i,s,o,a,l){let u=e.consts,f=Qu(e,t,4,o||null,a||null);iC(e,n,f,yu(u,l)),Bg(e,f);let p=f.tView=Xg(2,f,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u,null);return e.queries!==null&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}function M1(t,e,n,r,i,s,o,a,l,u){let f=n+mn,p=e.firstCreatePass?N1(f,e,t,r,i,s,o,a,l):e.data[f];va(p,!1);let m=P1(e,t,p,n);Vg()&&Jg(e,t,m,p),mi(m,t);let y=aC(m,t,m,p);return t[f]=y,Yu(t,y),g1(y,p,t),Pg(p)&&tC(e,t,p),l!=null&&nC(t,p,u),p}function Ot(t,e,n,r,i,s,o,a){let l=Te(),u=Dt(),f=yu(u.consts,s);return M1(l,u,t,e,n,r,i,f,o,a),Ot}var P1=O1;function O1(t,e,n,r){return Ug(!0),e[Je].createComment("")}var ca=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(ca||{}),k1=(()=>{class t{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}}return t})(),u0=class t{constructor(){this.ngZone=L(ve),this.scheduler=L(Ms),this.errorHandler=L(tr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ca.EarlyRead,ca.Write,ca.MixedReadWrite,ca.Read]}execute(){this.executing=!0;for(let e of t.PHASES)for(let n of this.sequences)if(!(n.erroredOrDestroyed||!n.hooks[e]))try{n.pipelinedValue=this.ngZone.runOutsideAngular(()=>n.hooks[e](n.pipelinedValue))}catch(r){n.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:t,providedIn:"root",factory:()=>new t})}};function Xu(t,e,n,r){let i=Te(),s=$u();if(Lr(i,s,e)){let o=Dt(),a=Hu();Ik(a,i,t,e,n,r)}return Xu}function EC(t,e,n,r){return Lr(t,$u(),n)?e+ku(n)+r:Ur}function nu(t,e){return t<<17|e<<2}function yi(t){return t>>17&32767}function F1(t){return(t&2)==2}function L1(t,e){return t&131071|e<<17}function mg(t){return t|2}function ks(t){return(t&131068)>>2}function Op(t,e){return t&-131069|e<<2}function V1(t){return(t&1)===1}function _g(t){return t|1}function U1(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=yi(o),l=ks(o);t[r]=n;let u=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||ya(p,f)>0)&&(u=!0)}else f=n;if(i)if(l!==0){let m=yi(t[a+1]);t[r+1]=nu(m,a),m!==0&&(t[m+1]=Op(t[m+1],r)),t[a+1]=L1(t[a+1],r)}else t[r+1]=nu(a,0),a!==0&&(t[a+1]=Op(t[a+1],r)),a=r;else t[r+1]=nu(l,0),a===0?a=r:t[l+1]=Op(t[l+1],r),l=r;u&&(t[r+1]=mg(t[r+1])),d0(t,f,r,!0),d0(t,f,r,!1),B1(e,f,t,r,s),o=nu(a,l),s?e.classBindings=o:e.styleBindings=o}function B1(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&ya(s,e)>=0&&(n[r+1]=_g(n[r+1]))}function d0(t,e,n,r){let i=t[n+1],s=e===null,o=r?yi(i):ks(i),a=!1;for(;o!==0&&(a===!1||s);){let l=t[o],u=t[o+1];j1(l,e)&&(a=!0,t[o+1]=r?_g(u):mg(u)),o=r?yi(u):ks(u)}a&&(t[n+1]=r?mg(i):_g(i))}function j1(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?ya(t,e)>=0:!1}function ue(t,e,n){let r=Te(),i=$u();if(Lr(r,i,e)){let s=Dt(),o=Hu();em(s,o,r,t,e,r[Je],n,!1)}return ue}function h0(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";tm(t,n,s[o],o,r)}function ed(t,e){return $1(t,e,null,!0),ed}function $1(t,e,n,r){let i=Te(),s=Dt(),o=zP(2);if(s.firstUpdatePass&&z1(s,t,o,r),e!==Ur&&Lr(i,o,e)){let a=s.data[Ls()];Q1(s,a,i,i[Je],t,i[o+1]=Y1(e,n),r,o)}}function H1(t,e){return e>=t.expandoStartIndex}function z1(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[Ls()],o=H1(t,n);J1(s,r)&&e===null&&!o&&(e=!1),e=W1(i,s,e,r),U1(i,s,e,n,o,r)}}function W1(t,e,n,r){let i=KP(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=kp(null,t,e,n,r),n=ma(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=kp(i,t,e,n,r),s===null){let l=q1(t,e,r);l!==void 0&&Array.isArray(l)&&(l=kp(null,t,e,l[1],r),l=ma(l,e.attrs,r),G1(t,e,r,l))}else s=K1(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function q1(t,e,n){let r=n?e.classBindings:e.styleBindings;if(ks(r)!==0)return t[yi(r)]}function G1(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[yi(i)]=r}function K1(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ma(r,o,n)}return ma(r,e.attrs,n)}function kp(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ma(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ma(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),QM(t,o,n?!0:e[++s]))}return t===void 0?null:t}function Q1(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let l=t.data,u=l[a+1],f=V1(u)?f0(l,e,n,i,ks(u),o):void 0;if(!Nu(f)){Nu(s)||F1(u)&&(s=f0(l,null,n,i,a,o));let p=Z0(Ls(),n);ek(r,o,p,i,s)}}function f0(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let l=t[i],u=Array.isArray(l),f=u?l[1]:l,p=f===null,m=n[i+1];m===Ur&&(m=p?qt:void 0);let y=p?Tp(m,r):f===r?m:void 0;if(u&&!Nu(y)&&(y=Tp(l,r)),Nu(y)&&(a=y,o))return a;let b=t[i+1];i=o?yi(b):ks(b)}if(e!==null){let l=s?e.residualClasses:e.residualStyles;l!=null&&(a=Tp(l,r))}return a}function Nu(t){return t!==void 0}function Y1(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=Ct(qu(t)))),t}function J1(t,e){return(t.flags&(e?8:16))!==0}function Z1(t,e,n,r,i,s){let o=e.consts,a=yu(o,i),l=Qu(e,t,2,r,a);return iC(e,n,l,yu(o,s)),l.attrs!==null&&hg(l,l.attrs,!1),l.mergedAttrs!==null&&hg(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function R(t,e,n,r){let i=Te(),s=Dt(),o=mn+t,a=i[Je],l=s.firstCreatePass?Z1(o,s,i,e,n,r):s.data[o],u=X1(s,i,l,a,e,t);i[o]=u;let f=Pg(l);return va(l,!0),Qb(a,u,l),!R1(l)&&Vg()&&Jg(s,i,u,l),PP()===0&&mi(u,i),OP(),f&&(tC(s,i,l),eC(s,l,i)),r!==null&&nC(i,l),R}function x(){let t=Pt();ab()?BP():(t=t.parent,va(t,!1));let e=t;LP(e)&&VP(),kP();let n=Dt();return n.firstCreatePass&&(Bg(n,t),q0(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&nO(e)&&h0(n,e,Te(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&rO(e)&&h0(n,e,Te(),e.stylesWithoutHost,!1),x}function ke(t,e,n,r){return R(t,e,n,r),x(),ke}var X1=(t,e,n,r,i,s)=>(Ug(!0),jb(r,i,ZP()));function Zt(){return Te()}var Mu="en-US";var eF=Mu;function tF(t){typeof t=="string"&&(eF=t.toLowerCase().replace(/_/g,"-"))}var nF=(t,e,n)=>{};function Ee(t,e,n,r){let i=Te(),s=Dt(),o=Pt();return IC(s,i,i[Je],o,t,e,r),Ee}function rF(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[pu],l=i[s+2];return a.length>l?a[l]:null}typeof o=="string"&&(s+=2)}return null}function IC(t,e,n,r,i,s,o){let a=Pg(r),u=t.firstCreatePass&&Sk(t),f=e[gn],p=Dk(e),m=!0;if(r.type&3||o){let N=Yt(r,e),P=o?o(N):N,B=p.length,Z=o?ee=>o(kn(ee[r.index])):r.index,z=null;if(!o&&a&&(z=rF(t,e,i,r.index)),z!==null){let ee=z.__ngLastListenerFn__||z;ee.__ngNextListenerFn__=s,z.__ngLastListenerFn__=s,m=!1}else{s=g0(r,e,f,s),nF(N,i,s);let ee=n.listen(P,i,s);p.push(s,ee),u&&u.push(i,Z,B,B+1)}}else s=g0(r,e,f,s);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let N=b.length;if(N)for(let P=0;P<N;P+=2){let B=b[P],Z=b[P+1],tt=e[B][Z].subscribe(s),_e=p.length;p.push(s,tt),u&&u.push(i,r.index,_e,-(_e+1))}}}function p0(t,e,n,r){let i=me(null);try{return Rn(6,e,n),n(r)!==!1}catch(s){return lC(t,s),!1}finally{Rn(7,e,n),me(i)}}function g0(t,e,n,r){return function i(s){if(s===Function)return r;let o=t.componentOffset>-1?Vr(t.index,e):e;rm(o,5);let a=p0(e,n,r,s),l=i.__ngNextListenerFn__;for(;l;)a=p0(e,n,l,s)&&a,l=l.__ngNextListenerFn__;return a}}function H(t=1){return YP(t)}function td(t,e,n){return bC(t,"",e,"",n),td}function bC(t,e,n,r,i){let s=Te(),o=EC(s,e,n,r);if(o!==Ur){let a=Dt(),l=Hu();em(a,l,s,t,o,s[Je],i,!1)}return bC}function iF(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function js(t){let e=jP();return eb(e,mn+t)}function k(t,e=""){let n=Te(),r=Dt(),i=t+mn,s=r.firstCreatePass?Qu(r,i,1,e,null):r.data[i],o=sF(r,n,s,e,t);n[i]=o,Vg()&&Jg(r,n,o,s),va(s,!1)}var sF=(t,e,n,r,i)=>(Ug(!0),LO(e[Je],r));function Ei(t){return Ze("",t,""),Ei}function Ze(t,e,n){let r=Te(),i=EC(r,t,e,n);return i!==Ur&&Ak(r,Ls(),i),Ze}function qe(t,e,n){vC(e)&&(e=e());let r=Te(),i=$u();if(Lr(r,i,e)){let s=Dt(),o=Hu();em(s,o,r,t,e,r[Je],n,!1)}return qe}function Xe(t,e){let n=vC(t);return n&&t.set(e),n}function Ge(t,e){let n=Te(),r=Dt(),i=Pt();return IC(r,n,n[Je],i,t,e),Ge}function oF(t,e,n){let r=Dt();if(r.firstCreatePass){let i=kr(t);yg(n,r.data,r.blueprint,i,!0),yg(e,r.data,r.blueprint,i,!1)}}function yg(t,e,n,r,i){if(t=bt(t),Array.isArray(t))for(let s=0;s<t.length;s++)yg(t[s],e,n,r,i);else{let s=Dt(),o=Te(),a=Pt(),l=Ss(t)?t:bt(t.provide),u=H0(t),f=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(Ss(t)||!t.multi){let y=new gi(u,i,re),b=Lp(l,e,i?f:f+m,p);b===-1?(Jp(Iu(a,o),s,l),Fp(s,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(y),o.push(y)):(n[b]=y,o[b]=y)}else{let y=Lp(l,e,f+m,p),b=Lp(l,e,f,f+m),N=y>=0&&n[y],P=b>=0&&n[b];if(i&&!P||!i&&!N){Jp(Iu(a,o),s,l);let B=lF(i?cF:aF,n.length,i,r,u);!i&&P&&(n[b].providerFactory=B),Fp(s,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(B),o.push(B)}else{let B=CC(n[i?b:y],u,!i&&r);Fp(s,t,y>-1?y:b,B)}!i&&r&&P&&n[b].componentProviders++}}}function Fp(t,e,n,r){let i=Ss(e),s=_P(e);if(i||s){let l=(s?bt(e.useClass):e).prototype.ngOnDestroy;if(l){let u=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let f=u.indexOf(n);f===-1?u.push(n,[r,l]):u[f+1].push(r,l)}else u.push(n,l)}}}function CC(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Lp(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function aF(t,e,n,r){return vg(this.multi,[])}function cF(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=Ns(n,n[le],this.providerFactory.index,r);s=a.slice(0,o),vg(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],vg(i,s);return s}function vg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function lF(t,e,n,r,i){let s=new gi(t,n,re);return s.multi=[],s.index=e,s.componentProviders=0,CC(s,i,r&&!n),s}function Xt(t,e=[]){return n=>{n.providersResolver=(r,i)=>oF(r,i?i(t):t,e)}}var uF=(()=>{class t{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=B0(!1,n.type),i=r.length>0?sm([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:t,providedIn:"environment",factory:()=>new t(te(Qt))})}}return t})();function Vn(t){Zu("NgStandalone"),t.getStandaloneInjector=e=>e.get(uF).getOrCreateStandaloneInjector(t)}function dF(t,e){let n=t[e];return n===Ur?void 0:n}function hF(t,e,n,r,i,s,o,a){let l=e+n;return x1(t,l,i,s,o)?S1(t,l+3,a?r.call(a,i,s,o):r(i,s,o)):dF(t,l+3)}function TC(t,e){let n=Dt(),r,i=t+mn;n.firstCreatePass?(r=fF(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let s=r.factory||(r.factory=ui(r.type,!0)),o,a=Mt(re);try{let l=Eu(!1),u=s();return Eu(l),iF(n,Te(),i,u),u}finally{Mt(a)}}function fF(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function DC(t,e,n,r,i){let s=t+mn,o=Te(),a=eb(o,s);return pF(o,s)?hF(o,$P(),e,a.transform,n,r,i,a):a.transform(n,r,i)}function pF(t,e){return t[le].data[e].pure}var rr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},om=new rr("18.2.13");var nd=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"platform"})}}return t})();var SC=new U("");function Ii(t){return!!t&&typeof t.then=="function"}function AC(t){return!!t&&typeof t.subscribe=="function"}var rd=new U(""),xC=(()=>{class t{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r}),this.appInits=L(rd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let s=i();if(Ii(s))n.push(s);else if(AC(s)){let o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),am=new U("");function gF(){oI(()=>{throw new j(600,!1)})}function mF(t){return t.isBoundToModule}var _F=10;function yF(t,e,n){try{let r=n();return Ii(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var bi=(()=>{class t{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=L(IO),this.afterRenderManager=L(k1),this.zonelessEnabled=L(im),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new ct,this.afterTick=new ct,this.componentTypes=[],this.components=[],this.isStable=L(Vs).hasPendingTasks.pipe(ce(n=>!n)),this._injector=L(Qt)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}get injector(){return this._injector}bootstrap(n,r){let i=n instanceof Au;if(!this._injector.get(xC).done){let m=!i&&F0(n),y=!1;throw new j(405,y)}let o;i?o=n:o=this._injector.get(Ps).resolveComponentFactory(n),this.componentTypes.push(o.componentType);let a=mF(o)?void 0:this._injector.get(Fr),l=r||o.selector,u=o.create(ot.NULL,[],l,a),f=u.location.nativeElement,p=u.injector.get(SC,null);return p?.registerApplication(f),u.onDestroy(()=>{this.detachView(u.hostView),au(this.components,u),p?.unregisterApplication(f)}),this._loadComponent(u),u}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new j(101,!1);let n=me(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,me(n),this.afterTick.next()}}synchronize(){let n=null;this._injector.destroyed||(n=this._injector.get(Os,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<_F;)this.synchronizeOnce(n)}synchronizeOnce(n){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:s}of this._views)vF(i,s,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else n?.begin?.(),n?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Bu(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;au(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let r=this._injector.get(am,[]);[...this._bootstrapListeners,...r].forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>au(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new j(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function au(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function vF(t,e,n,r){if(!n&&!Bu(t))return;hC(t,e,n&&!r?0:1)}var wg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},cm=(()=>{class t{compileModuleSync(n){return new gg(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=L0(n),s=Bb(i.declarations).reduce((o,a)=>{let l=di(a);return l&&o.push(new pa(l)),o},[]);return new wg(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var wF=(()=>{class t{constructor(){this.zone=L(ve),this.changeDetectionScheduler=L(Ms),this.applicationRef=L(bi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function EF({ngZoneFactory:t,ignoreChangesOutsideZone:e,scheduleInRootZone:n}){return t??=()=>new ve(se(F({},IF()),{scheduleInRootZone:n})),[{provide:ve,useFactory:t},{provide:Ds,multi:!0,useFactory:()=>{let r=L(wF,{optional:!0});return()=>r.initialize()}},{provide:Ds,multi:!0,useFactory:()=>{let r=L(bF);return()=>{r.initialize()}}},e===!0?{provide:mC,useValue:!0}:[],{provide:_C,useValue:n??Sb}]}function IF(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var bF=(()=>{class t{constructor(){this.subscription=new Ue,this.initialized=!1,this.zone=L(ve),this.pendingTasks=L(Vs)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ve.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ve.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var CF=(()=>{class t{constructor(){this.appRef=L(bi),this.taskService=L(Vs),this.ngZone=L(ve),this.zonelessEnabled=L(im),this.disableScheduling=L(mC,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ue,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Cu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(L(_C,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof ng||!this.zoneIsDefined)}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?JI:xb;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Cu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(n),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,JI(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function TF(){return typeof $localize<"u"&&$localize.locale||Mu}var lm=new U("",{providedIn:"root",factory:()=>L(lm,ie.Optional|ie.SkipSelf)||TF()});var Eg=new U("");function ru(t){return!t.moduleRef}function DF(t){let e=ru(t)?t.r3Injector:t.moduleRef.injector,n=e.get(ve);return n.run(()=>{ru(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(tr,null),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:s=>{r.handleError(s)}})}),ru(t)){let s=()=>e.destroy(),o=t.platformInjector.get(Eg);o.add(s),e.onDestroy(()=>{i.unsubscribe(),o.delete(s)})}else{let s=()=>t.moduleRef.destroy(),o=t.platformInjector.get(Eg);o.add(s),t.moduleRef.onDestroy(()=>{au(t.allPlatformModules,t.moduleRef),i.unsubscribe(),o.delete(s)})}return yF(r,n,()=>{let s=e.get(xC);return s.runInitializers(),s.donePromise.then(()=>{let o=e.get(lm,Mu);if(tF(o||Mu),ru(t)){let a=e.get(bi);return t.rootComponent!==void 0&&a.bootstrap(t.rootComponent),a}else return SF(t.moduleRef,t.allPlatformModules),t.moduleRef})})})}function SF(t,e){let n=t.injector.get(bi);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(t.instance.ngDoBootstrap)t.instance.ngDoBootstrap(n);else throw new j(-403,!1);e.push(t)}var cu=null;function AF(t=[],e){return ot.create({name:e,providers:[{provide:Lu,useValue:"platform"},{provide:Eg,useValue:new Set([()=>cu=null])},...t]})}function xF(t=[]){if(cu)return cu;let e=AF(t);return cu=e,gF(),RF(e),e}function RF(t){t.get(Wg,null)?.forEach(n=>n())}var Ci=(()=>{class t{static{this.__NG_ELEMENT_ID__=NF}}return t})();function NF(t){return MF(Pt(),Te(),(t&16)===16)}function MF(t,e,n){if(Uu(t)&&!n){let r=Vr(t.index,e);return new _i(r,r)}else if(t.type&175){let r=e[On];return new _i(r,e)}return null}var Ig=class{constructor(){}supports(e){return wC(e)}create(e){return new bg(e)}},PF=(t,e)=>e,bg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||PF}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<m0(r,i,s)?n:r,a=m0(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let u=a-i,f=l-i;if(u!=f){for(let m=0;m<u;m++){let y=m<s.length?s[m]:s[m]=0,b=y+m;f<=b&&b<u&&(s[m]=y+1)}let p=o.previousIndex;s[p]=f-u}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!wC(e))throw new j(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,T1(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Cg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new Pu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Pu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Cg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Tg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},Pu=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new Tg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function m0(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function _0(){return new um([new Ig])}var um=(()=>{class t{static{this.\u0275prov=$({token:t,providedIn:"root",factory:_0})}constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||_0()),deps:[[t,new A0,new Pe]]}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new j(901,!1)}}return t})();function RC(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=xF(r),s=[EF({}),{provide:Ms,useExisting:CF},...n||[]],o=new Ru({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1});return DF({r3Injector:o.injector,platformInjector:i,rootComponent:e})}catch(e){return Promise.reject(e)}}function Ea(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function Ia(t,e){Zu("NgSignals");let n=rI(t);return e?.equal&&(n[Zn].equal=e.equal),n}function dr(t){let e=me(null);try{return t()}finally{me(e)}}var kC=null;function hr(){return kC}function FC(t){kC??=t}var id=class{};var tn=new U(""),LC=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(FF),providedIn:"platform"})}}return t})();var FF=(()=>{class t extends LC{constructor(){super(),this._doc=L(tn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return hr().getBaseHref(this._doc)}onPopState(n){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new t,providedIn:"platform"})}}return t})();function VC(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function NC(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function Ti(t){return t&&t[0]!=="?"?"?"+t:t}var od=(()=>{class t{historyGo(n){throw new Error("")}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(UC),providedIn:"root"})}}return t})(),LF=new U(""),UC=(()=>{class t extends od{constructor(n,r){super(),this._platformLocation=n,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??L(tn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return VC(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ti(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+Ti(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+Ti(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static{this.\u0275fac=function(r){return new(r||t)(te(LC),te(LF,8))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var ba=(()=>{class t{constructor(n){this._subject=new Le,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=BF(NC(MC(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ti(r))}normalize(n){return t.stripTrailingSlash(UF(this._basePath,MC(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ti(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ti(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}static{this.normalizeQueryParams=Ti}static{this.joinWithSlash=VC}static{this.stripTrailingSlash=NC}static{this.\u0275fac=function(r){return new(r||t)(te(od))}}static{this.\u0275prov=$({token:t,factory:()=>VF(),providedIn:"root"})}}return t})();function VF(){return new ba(te(od))}function UF(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function MC(t){return t.replace(/\/index.html$/,"")}function BF(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function BC(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var dm=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ad=(()=>{class t{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,s,o)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new dm(i.item,this._ngForOf,-1,-1),o===null?void 0:o);else if(o==null)r.remove(s===null?void 0:s);else if(s!==null){let a=r.get(s);r.move(a,o),PC(a,i)}});for(let i=0,s=r.length;i<s;i++){let a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let s=r.get(i.currentIndex);PC(s,i)})}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(re(Bs),re(Ju),re(um))}}static{this.\u0275dir=We({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return t})();function PC(t,e){t.context.$implicit=e.item}var $s=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new hm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){OC("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){OC("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}static{this.\u0275fac=function(r){return new(r||t)(re(Bs),re(Ju))}}static{this.\u0275dir=We({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return t})(),hm=class{constructor(){this.$implicit=null,this.ngIf=null}};function OC(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${Ct(e)}'.`)}var fr=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=wi({type:t})}static{this.\u0275inj=vi({})}}return t})(),jC="browser",jF="server";function fm(t){return t===jF}var sd=class{};var _m=class extends id{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ym=class t extends _m{static makeCurrent(){FC(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=$F();return n==null?null:HF(n)}resetBaseElement(){Ca=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return BC(document.cookie,e)}},Ca=null;function $F(){return Ca=Ca||document.querySelector("base"),Ca?Ca.getAttribute("href"):null}function HF(t){return new URL(t,document.baseURI).pathname}var zF=(()=>{class t{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),vm=new U(""),WC=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>{i.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(s=>s.supports(n)),!r)throw new j(5101,!1);return this._eventNameToPlugin.set(n,r),r}static{this.\u0275fac=function(r){return new(r||t)(te(vm),te(ve))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),cd=class{constructor(e){this._doc=e}},gm="ng-app-id",qC=(()=>{class t{constructor(n,r,i,s={}){this.doc=n,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=fm(s),this.resetHostNodes()}addStyles(n){for(let r of n)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(n){for(let r of n)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(r=>r.remove()),n.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let r of this.getAllStyles())this.addStyleToHost(n,r)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let r of this.hostNodes)this.addStyleToHost(r,n)}onStyleRemoved(n){let r=this.styleRef;r.get(n)?.elements?.forEach(i=>i.remove()),r.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${gm}="${this.appId}"]`);if(n?.length){let r=new Map;return n.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(n,r){let i=this.styleRef;if(i.has(n)){let s=i.get(n);return s.usage+=r,s.usage}return i.set(n,{usage:r,elements:[]}),r}getStyleElement(n,r){let i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===n)return i.delete(r),s.removeAttribute(gm),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(gm,this.appId),n.appendChild(o),o}}addStyleToHost(n,r){let i=this.getStyleElement(n,r),s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||t)(te(tn),te(zg),te(qg,8),te(ur))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),mm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Em=/%COMP%/g,GC="%COMP%",WF=`_nghost-${GC}`,qF=`_ngcontent-${GC}`,GF=!0,KF=new U("",{providedIn:"root",factory:()=>GF});function QF(t){return qF.replace(Em,t)}function YF(t){return WF.replace(Em,t)}function KC(t,e){return e.map(n=>n.replace(Em,t))}var $C=(()=>{class t{constructor(n,r,i,s,o,a,l,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=fm(a),this.defaultRenderer=new Ta(n,o,l,this.platformIsServer)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Mn.ShadowDom&&(r=se(F({},r),{encapsulation:Mn.Emulated}));let i=this.getOrCreateRenderer(n,r);return i instanceof ld?i.applyToHost(n):i instanceof Da&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,s=i.get(r.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,u=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Mn.Emulated:s=new ld(l,u,r,this.appId,f,o,a,p);break;case Mn.ShadowDom:return new wm(l,u,n,r,o,a,this.nonce,p);default:s=new Da(l,u,r,f,o,a,p);break}i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||t)(te(WC),te(qC),te(zg),te(KF),te(tn),te(ur),te(ve),te(qg))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),Ta=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(mm[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(HC(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(HC(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new j(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=mm[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=mm[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(nr.DashCase|nr.Important)?e.style.setProperty(n,r,i&nr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&nr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=hr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function HC(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var wm=class extends Ta{constructor(e,n,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=KC(i.id,i.styles);for(let f of u){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Da=class extends Ta{constructor(e,n,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=l?KC(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ld=class extends Da{constructor(e,n,r,i,s,o,a,l){let u=i+"-"+r.id;super(e,n,r,s,o,a,l,u),this.contentAttr=QF(u),this.hostAttr=YF(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},JF=(()=>{class t extends cd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||t)(te(tn))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})(),zC=["alt","control","meta","shift"],ZF={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},eL=(()=>{class t extends cd{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i){let s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>hr().onAndCancel(n,s.domEventName,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let s=t._normalizeKey(r.pop()),o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),zC.forEach(u=>{let f=r.indexOf(u);f>-1&&(r.splice(f,1),o+=u+".")}),o+=s,r.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(n,r){let i=ZF[n.key]||n.key,s="";return r.indexOf("code.")>-1&&(i=n.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),zC.forEach(o=>{if(o!==i){let a=XF[o];a(n)&&(s+=o+".")}}),s+=i,s===r)}static eventCallback(n,r,i){return s=>{t.matchEventFullKeyCode(s,n)&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return n==="esc"?"escape":n}static{this.\u0275fac=function(r){return new(r||t)(te(tn))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac})}}return t})();function QC(t,e){return RC(F({rootComponent:t},tL(e)))}function tL(t){return{appProviders:[...oL,...t?.providers??[]],platformProviders:sL}}function nL(){ym.makeCurrent()}function rL(){return new tr}function iL(){return Fb(document),document}var sL=[{provide:ur,useValue:jC},{provide:Wg,useValue:nL,multi:!0},{provide:tn,useFactory:iL,deps:[]}];var oL=[{provide:Lu,useValue:"root"},{provide:tr,useFactory:rL,deps:[]},{provide:vm,useClass:JF,multi:!0,deps:[tn,ve,ur]},{provide:vm,useClass:eL,multi:!0,deps:[tn]},$C,qC,WC,{provide:Os,useExisting:$C},{provide:sd,useClass:zF,deps:[]},[]];var YC=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static{this.\u0275fac=function(r){return new(r||t)(te(tn))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var oT=(()=>{class t{constructor(n,r){this._renderer=n,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static{this.\u0275fac=function(r){return new(r||t)(re(Br),re(lr))}}static{this.\u0275dir=We({type:t})}}return t})(),_d=(()=>{class t extends oT{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275dir=We({type:t,features:[Jt]})}}return t})(),Pa=new U("");var cL={provide:Pa,useExisting:Fn(()=>Gs),multi:!0};function lL(){let t=hr()?hr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var uL=new U(""),Gs=(()=>{class t extends oT{constructor(n,r,i){super(n,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!lL())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static{this.\u0275fac=function(r){return new(r||t)(re(Br),re(lr),re(uL,8))}}static{this.\u0275dir=We({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Ee("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[Xt([cL]),Jt]})}}return t})();function dL(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}var bm=new U(""),aT=new U("");function hL(t){return dL(t.value)?{required:!0}:null}function JC(t){return null}function cT(t){return t!=null}function lT(t){return Ii(t)?ze(t):t}function uT(t){let e={};return t.forEach(n=>{e=n!=null?F(F({},e),n):e}),Object.keys(e).length===0?null:e}function dT(t,e){return e.map(n=>n(t))}function fL(t){return!t.validate}function hT(t){return t.map(e=>fL(e)?e:n=>e.validate(n))}function pL(t){if(!t)return null;let e=t.filter(cT);return e.length==0?null:function(n){return uT(dT(n,e))}}function Cm(t){return t!=null?pL(hT(t)):null}function gL(t){if(!t)return null;let e=t.filter(cT);return e.length==0?null:function(n){let r=dT(n,e).map(lT);return vp(r).pipe(ce(uT))}}function Tm(t){return t!=null?gL(hT(t)):null}function ZC(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function mL(t){return t._rawValidators}function _L(t){return t._rawAsyncValidators}function Im(t){return t?Array.isArray(t)?t:[t]:[]}function dd(t,e){return Array.isArray(t)?t.includes(e):t===e}function XC(t,e){let n=Im(e);return Im(t).forEach(i=>{dd(n,i)||n.push(i)}),n}function eT(t,e){return Im(e).filter(n=>!dd(t,n))}var hd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Cm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ws=class extends hd{get formDirective(){return null}get path(){return null}},Ma=class extends hd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},fd=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},yL={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},WQ=se(F({},yL),{"[class.ng-submitted]":"isSubmitted"}),yd=(()=>{class t extends fd{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(re(Ma,2))}}static{this.\u0275dir=We({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&ed("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[Jt]})}}return t})(),fT=(()=>{class t extends fd{constructor(n){super(n)}static{this.\u0275fac=function(r){return new(r||t)(re(Ws,10))}}static{this.\u0275dir=We({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&ed("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[Jt]})}}return t})();var Sa="VALID",ud="INVALID",Hs="PENDING",Aa="DISABLED",qs=class{},pd=class extends qs{constructor(e,n){super(),this.value=e,this.source=n}},Ra=class extends qs{constructor(e,n){super(),this.pristine=e,this.source=n}},Na=class extends qs{constructor(e,n){super(),this.touched=e,this.source=n}},zs=class extends qs{constructor(e,n){super(),this.status=e,this.source=n}};function pT(t){return(vd(t)?t.validators:t)||null}function vL(t){return Array.isArray(t)?Cm(t):t||null}function gT(t,e){return(vd(e)?e.asyncValidators:t)||null}function wL(t){return Array.isArray(t)?Tm(t):t||null}function vd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function EL(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new j(1e3,"");if(!r[n])throw new j(1001,"")}function IL(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new j(1002,"")})}var gd=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Ia(()=>this.statusReactive()),this.statusReactive=wa(void 0),this._pristine=Ia(()=>this.pristineReactive()),this.pristineReactive=wa(!0),this._touched=Ia(()=>this.touchedReactive()),this.touchedReactive=wa(!1),this._events=new ct,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return dr(this.statusReactive)}set status(e){dr(()=>this.statusReactive.set(e))}get valid(){return this.status===Sa}get invalid(){return this.status===ud}get pending(){return this.status==Hs}get disabled(){return this.status===Aa}get enabled(){return this.status!==Aa}get pristine(){return dr(this.pristineReactive)}set pristine(e){dr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return dr(this.touchedReactive)}set touched(e){dr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(XC(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(XC(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(eT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(eT(e,this._rawAsyncValidators))}hasValidator(e){return dd(this._rawValidators,e)}hasAsyncValidator(e){return dd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(se(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Na(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&e.emitEvent!==!1&&this._events.next(new Na(!1,r))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(se(F({},e),{sourceControl:r})),n&&e.emitEvent!==!1&&this._events.next(new Ra(!1,r))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&e.emitEvent!==!1&&this._events.next(new Ra(!0,r))}markAsPending(e={}){this.status=Hs;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new zs(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(se(F({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Aa,this.errors=null,this._forEachChild(i=>{i.disable(se(F({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,r)),this._events.next(new zs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Sa,this._forEachChild(r=>{r.enable(se(F({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(se(F({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sa||this.status===Hs)&&this._runAsyncValidator(r,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new pd(this.value,n)),this._events.next(new zs(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(se(F({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Aa:Sa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Hs,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let r=lT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new zs(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new Le,this.statusChanges=new Le}_calculateStatus(){return this._allControlsDisabled()?Aa:this.errors?ud:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hs)?Hs:this._anyControlsHaveStatus(ud)?ud:Sa}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),i&&this._events.next(new Ra(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new Na(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){vd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vL(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=wL(this._rawAsyncValidators)}},md=class extends gd{constructor(e,n,r){super(pT(n),gT(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){IL(this,!0,e),Object.keys(e).forEach(r=>{EL(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Dm=new U("CallSetDisabledState",{providedIn:"root",factory:()=>Sm}),Sm="always";function bL(t,e){return[...e.path,t]}function mT(t,e,n=Sm){_T(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),TL(t,e),SL(t,e),DL(t,e),CL(t,e)}function tT(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function CL(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function _T(t,e){let n=mL(t);e.validator!==null?t.setValidators(ZC(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=_L(t);e.asyncValidator!==null?t.setAsyncValidators(ZC(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();tT(e._rawValidators,i),tT(e._rawAsyncValidators,i)}function TL(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&yT(t,e)})}function DL(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&yT(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function yT(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function SL(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function AL(t,e){t==null,_T(t,e)}function xL(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function RL(t){return Object.getPrototypeOf(t.constructor)===_d}function NL(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function ML(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Gs?n=s:RL(s)?r=s:i=s}),i||r||n||null}var PL={provide:Ws,useExisting:Fn(()=>Am)},xa=Promise.resolve(),Am=(()=>{class t extends Ws{get submitted(){return dr(this.submittedReactive)}constructor(n,r,i){super(),this.callSetDisabledState=i,this._submitted=Ia(()=>this.submittedReactive()),this.submittedReactive=wa(!1),this._directives=new Set,this.ngSubmit=new Le,this.form=new md({},Cm(n),Tm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){xa.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),mT(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){xa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){xa.then(()=>{let r=this._findContainer(n.path),i=new md({});AL(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){xa.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){xa.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),NL(this.form,this._directives),this.ngSubmit.emit(n),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static{this.\u0275fac=function(r){return new(r||t)(re(bm,10),re(aT,10),re(Dm,8))}}static{this.\u0275dir=We({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Ee("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Xt([PL]),Jt]})}}return t})();function nT(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function rT(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var OL=class extends gd{constructor(e=null,n,r){super(pT(n),gT(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(rT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){nT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){nT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){rT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kL={provide:Ma,useExisting:Fn(()=>Oa)},iT=Promise.resolve(),Oa=(()=>{class t extends Ma{constructor(n,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new OL,this._registered=!1,this.name="",this.update=new Le,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=ML(this,s)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),xL(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){mT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){iT.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Ea(r);iT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?bL(n,this._parent):[n]}static{this.\u0275fac=function(r){return new(r||t)(re(Ws,9),re(bm,10),re(aT,10),re(Pa,10),re(Ci,8),re(Dm,8))}}static{this.\u0275dir=We({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Xt([kL]),Jt,ar]})}}return t})(),vT=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=We({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return t})(),FL={provide:Pa,useExisting:Fn(()=>xm),multi:!0},xm=(()=>{class t extends _d{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275dir=We({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[Xt([FL]),Jt]})}}return t})();var LL={provide:Pa,useExisting:Fn(()=>Ks),multi:!0};function wT(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function VL(t){return t.split(":")[0]}var Ks=(()=>{class t extends _d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r=this._getOptionId(n),i=wT(r,n);this.setProperty("value",i)}registerOnChange(n){this.onChange=r=>{this.value=this._getOptionValue(r),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),n))return r;return null}_getOptionValue(n){let r=VL(n);return this._optionMap.has(r)?this._optionMap.get(r):n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275dir=We({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,i){r&1&&Ee("change",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xt([LL]),Jt]})}}return t})(),wd=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(wT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(re(lr),re(Br),re(Ks,9))}}static{this.\u0275dir=We({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})(),UL={provide:Pa,useExisting:Fn(()=>ET),multi:!0};function sT(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function BL(t){return t.split(":")[0]}var ET=(()=>{class t extends _d{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let r;if(Array.isArray(n)){let i=n.map(s=>this._getOptionId(s));r=(s,o)=>{s._setSelected(i.indexOf(o.toString())>-1)}}else r=(i,s)=>{i._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(n){this.onChange=r=>{let i=[],s=r.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],u=this._getOptionValue(l.value);i.push(u)}}else{let o=r.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let u=this._getOptionValue(l.value);i.push(u)}}}this.value=i,n(i)}}_registerOption(n){let r=(this._idCounter++).toString();return this._optionMap.set(r,n),r}_getOptionId(n){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,n))return r;return null}_getOptionValue(n){let r=BL(n);return this._optionMap.has(r)?this._optionMap.get(r)._value:n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275dir=We({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,i){r&1&&Ee("change",function(o){return i.onChange(o.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[Xt([UL]),Jt]})}}return t})(),Ed=(()=>{class t{constructor(n,r,i){this._element=n,this._renderer=r,this._select=i,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(sT(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(sT(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||t)(re(lr),re(Br),re(ET,9))}}static{this.\u0275dir=We({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return t})();var jL=(()=>{class t{constructor(){this._validator=JC}ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):JC,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=We({type:t,features:[ar]})}}return t})();var $L={provide:bm,useExisting:Fn(()=>Rm),multi:!0};var Rm=(()=>{class t extends jL{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ea,this.createValidator=n=>hL}enabled(n){return n}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275dir=We({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&Xu("required",i._enabled?"":null)},inputs:{required:"required"},features:[Xt([$L]),Jt]})}}return t})();var HL=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=wi({type:t})}static{this.\u0275inj=vi({})}}return t})();var Id=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Dm,useValue:n.callSetDisabledState??Sm}]}}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275mod=wi({type:t})}static{this.\u0275inj=vi({imports:[HL]})}}return t})();var Qm={};eM(Qm,{FirebaseError:()=>jr,SDK_VERSION:()=>jt,_DEFAULT_ENTRY_NAME:()=>Un,_addComponent:()=>Js,_addOrOverwriteComponent:()=>Km,_apps:()=>$r,_clearComponents:()=>zV,_components:()=>Ys,_getProvider:()=>kt,_isFirebaseApp:()=>$T,_isFirebaseServerApp:()=>xi,_registerComponent:()=>Ke,_removeServiceInstance:()=>jT,_serverApps:()=>Qs,deleteApp:()=>Ua,getApp:()=>$t,getApps:()=>Va,initializeApp:()=>Hr,initializeServerApp:()=>HT,onLog:()=>Rd,registerVersion:()=>Y,setLogLevel:()=>Nd});var CT=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},zL=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},TT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(CT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zL(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new Nm;let m=s<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Nm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},WL=function(t){let e=CT(t);return TT.encodeByteArray(e,!0)},Mm=function(t){return WL(t).replace(/\./g,"")},qL=function(t){try{return TT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function GL(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var KL=()=>GL().__FIREBASE_DEFAULTS__,QL=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},YL=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&qL(t[1]);return e&&JSON.parse(e)},JL=()=>{try{return KL()||QL()||YL()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var Pm=()=>{var t;return(t=JL())===null||t===void 0?void 0:t.config};var bd=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function DT(){return typeof window<"u"||Om()}function Om(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ST(){try{return typeof indexedDB=="object"}catch{return!1}}function AT(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var ZL="FirebaseError",jr=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZL,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ka.prototype.create)}},ka=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?XL(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jr(i,a,r)}};function XL(t,e){return t.replace(eV,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var eV=/\{\$([^}]+)}/g;function Cd(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(bT(s)&&bT(o)){if(!Cd(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function bT(t){return t!==null&&typeof t=="object"}var KQ=4*60*60*1e3;var Si=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Di="[DEFAULT]";var km=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new bd;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(nV(e))try{this.getOrInitializeService({instanceIdentifier:Di})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Di){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return A(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Di){return this.instances.has(e)}getOptions(e=Di){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:tV(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Di){return this.component?this.component.multipleInstances?e:Di:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function tV(t){return t===Di?void 0:t}function nV(t){return t.instantiationMode==="EAGER"}var Fa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new km(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var Fm=[],Oe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Oe||{}),xT={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},rV=Oe.INFO,iV={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},sV=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=iV[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Td=class{constructor(e){this.name=e,this._logLevel=rV,this._logHandler=sV,this._userLogHandler=null,Fm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?xT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}};function RT(t){Fm.forEach(e=>{e.setLogLevel(t)})}function NT(t,e){for(let n of Fm){let r=null;e&&e.level&&(r=xT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{let a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:Oe[s].toLowerCase(),message:a,args:o,type:i.name})}}}var oV=(t,e)=>e.some(n=>t instanceof n),MT,PT;function aV(){return MT||(MT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cV(){return PT||(PT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var OT=new WeakMap,Vm=new WeakMap,kT=new WeakMap,Lm=new WeakMap,Bm=new WeakMap;function lV(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&OT.set(n,t)}).catch(()=>{}),Bm.set(e,t),e}function uV(t){if(Vm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Vm.set(t,e)}var Um={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Vm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FT(t){Um=t(Um)}function dV(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Dd(this),e,...n);return kT.set(r,e.sort?e.sort():[e]),yn(r)}:cV().includes(t)?function(...e){return t.apply(Dd(this),e),yn(OT.get(this))}:function(...e){return yn(t.apply(Dd(this),e))}}function hV(t){return typeof t=="function"?dV(t):(t instanceof IDBTransaction&&uV(t),oV(t,aV())?new Proxy(t,Um):t)}function yn(t){if(t instanceof IDBRequest)return lV(t);if(Lm.has(t))return Lm.get(t);let e=hV(t);return e!==t&&(Lm.set(t,e),Bm.set(e,t)),e}var Dd=t=>Bm.get(t);function Ai(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=yn(o);return r&&o.addEventListener("upgradeneeded",l=>{r(yn(o.result),l.oldVersion,l.newVersion,yn(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function Sd(t,{blocked:e}={}){let n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),yn(n).then(()=>{})}var fV=["get","getKey","getAll","getAllKeys","count"],pV=["put","add","delete","clear"],jm=new Map;function LT(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jm.get(e))return jm.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=pV.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||fV.includes(n)))return;let s=function(o,...a){return A(this,null,function*(){let l=this.transaction(o,i?"readwrite":"readonly"),u=l.store;return r&&(u=u.index(a.shift())),(yield Promise.all([u[n](...a),i&&l.done]))[0]})};return jm.set(e,s),s}FT(t=>se(F({},t),{get:(e,n,r)=>LT(e,n)||t.get(e,n,r),has:(e,n)=>!!LT(e,n)||t.has(e,n)}));var Hm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(gV(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function gV(t){let e=t.getComponent();return e?.type==="VERSION"}var Ad="@firebase/app",zm="0.10.13";var pr=new Td("@firebase/app"),mV="@firebase/app-compat",_V="@firebase/analytics-compat",yV="@firebase/analytics",vV="@firebase/app-check-compat",wV="@firebase/app-check",EV="@firebase/auth",IV="@firebase/auth-compat",bV="@firebase/database",CV="@firebase/data-connect",TV="@firebase/database-compat",DV="@firebase/functions",SV="@firebase/functions-compat",AV="@firebase/installations",xV="@firebase/installations-compat",RV="@firebase/messaging",NV="@firebase/messaging-compat",MV="@firebase/performance",PV="@firebase/performance-compat",OV="@firebase/remote-config",kV="@firebase/remote-config-compat",FV="@firebase/storage",LV="@firebase/storage-compat",VV="@firebase/firestore",UV="@firebase/vertexai-preview",BV="@firebase/firestore-compat",jV="firebase",$V="10.14.1";var Un="[DEFAULT]",HV={[Ad]:"fire-core",[mV]:"fire-core-compat",[yV]:"fire-analytics",[_V]:"fire-analytics-compat",[wV]:"fire-app-check",[vV]:"fire-app-check-compat",[EV]:"fire-auth",[IV]:"fire-auth-compat",[bV]:"fire-rtdb",[CV]:"fire-data-connect",[TV]:"fire-rtdb-compat",[DV]:"fire-fn",[SV]:"fire-fn-compat",[AV]:"fire-iid",[xV]:"fire-iid-compat",[RV]:"fire-fcm",[NV]:"fire-fcm-compat",[MV]:"fire-perf",[PV]:"fire-perf-compat",[OV]:"fire-rc",[kV]:"fire-rc-compat",[FV]:"fire-gcs",[LV]:"fire-gcs-compat",[VV]:"fire-fst",[BV]:"fire-fst-compat",[UV]:"fire-vertex","fire-js":"fire-js",[jV]:"fire-js-all"};var $r=new Map,Qs=new Map,Ys=new Map;function Js(t,e){try{t.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Km(t,e){t.container.addOrOverwriteComponent(e)}function Ke(t){let e=t.name;if(Ys.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;Ys.set(e,t);for(let n of $r.values())Js(n,t);for(let n of Qs.values())Js(n,t);return!0}function kt(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jT(t,e,n=Un){kt(t,e).clearInstance(n)}function $T(t){return t.options!==void 0}function xi(t){return t.settings!==void 0}function zV(){Ys.clear()}var WV={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nn=new ka("app","Firebase",WV);var xd=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}};var Wm=class extends xd{constructor(e,n,r,i){let s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{let a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,Y(Ad,zm,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Ua(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw nn.create("server-app-deleted")}};var jt=$V;function Hr(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:Un,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw nn.create("bad-app-name",{appName:String(i)});if(n||(n=Pm()),!n)throw nn.create("no-options");let s=$r.get(i);if(s){if(Cd(n,s.options)&&Cd(r,s.config))return s;throw nn.create("duplicate-app",{appName:i})}let o=new Fa(i);for(let l of Ys.values())o.addComponent(l);let a=new xd(n,r,o);return $r.set(i,a),a}function HT(t,e){if(DT()&&!Om())throw nn.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;$T(t)?n=t.options:n=t;let r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;let i=u=>[...u].reduce((f,p)=>Math.imul(31,f)+p.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw nn.create("finalization-registry-not-supported",{});let s=""+i(JSON.stringify(r)),o=Qs.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;let a=new Fa(s);for(let u of Ys.values())a.addComponent(u);let l=new Wm(n,e,s,a);return Qs.set(s,l),l}function $t(t=Un){let e=$r.get(t);if(!e&&t===Un&&Pm())return Hr();if(!e)throw nn.create("no-app",{appName:t});return e}function Va(){return Array.from($r.values())}function Ua(t){return A(this,null,function*(){let e=!1,n=t.name;$r.has(n)?(e=!0,$r.delete(n)):Qs.has(n)&&t.decRefCount()<=0&&(Qs.delete(n),e=!0),e&&(yield Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)})}function Y(t,e,n){var r;let i=(r=HV[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(a.join(" "));return}Ke(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function Rd(t,e){if(t!==null&&typeof t!="function")throw nn.create("invalid-log-argument");NT(t,e)}function Nd(t){RT(t)}var qV="firebase-heartbeat-database",GV=1,La="firebase-heartbeat-store",$m=null;function zT(){return $m||($m=Ai(qV,GV,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(La)}catch(n){console.warn(n)}}}}).catch(t=>{throw nn.create("idb-open",{originalErrorMessage:t.message})})),$m}function KV(t){return A(this,null,function*(){try{let n=(yield zT()).transaction(La),r=yield n.objectStore(La).get(WT(t));return yield n.done,r}catch(e){if(e instanceof jr)pr.warn(e.message);else{let n=nn.create("idb-get",{originalErrorMessage:e?.message});pr.warn(n.message)}}})}function VT(t,e){return A(this,null,function*(){try{let r=(yield zT()).transaction(La,"readwrite");yield r.objectStore(La).put(e,WT(t)),yield r.done}catch(n){if(n instanceof jr)pr.warn(n.message);else{let r=nn.create("idb-set",{originalErrorMessage:n?.message});pr.warn(r.message)}}})}function WT(t){return`${t.name}!${t.options.appId}`}var QV=1024,YV=30*24*60*60*1e3,qm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new Gm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return A(this,null,function*(){var e,n;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=UT();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=YV}),this._storage.overwrite(this._heartbeatsCache))}catch(r){pr.warn(r)}})}getHeartbeatsHeader(){return A(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=UT(),{heartbeatsToSend:r,unsentEntries:i}=JV(this._heartbeatsCache.heartbeats),s=Mm(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return pr.warn(n),""}})}};function UT(){return new Date().toISOString().substring(0,10)}function JV(t,e=QV){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),BT(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),BT(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var Gm=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return A(this,null,function*(){return ST()?AT().then(()=>!0).catch(()=>!1):!1})}read(){return A(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield KV(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return A(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return VT(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function BT(t){return Mm(JSON.stringify({version:2,heartbeats:t})).length}function ZV(t){Ke(new Si("platform-logger",e=>new Hm(e),"PRIVATE")),Ke(new Si("heartbeat",e=>new qm(e),"PRIVATE")),Y(Ad,zm,t),Y(Ad,zm,"esm2017"),Y("fire-js","")}ZV("");var XV="firebase",e2="10.14.1";Y(XV,e2,"app");var rn=new rr("ANGULARFIRE2_VERSION"),qT=t=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this
context. Rather than injecting ${t} in the constructor, first ensure that ${t} is supported by calling
\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${t})\`.`;function mr(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var vn=(t,e)=>{let n=e?[e]:Va(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},gr=class{constructor(){return vn(t2)}},t2="app-check";function Zs(){}var Md=class{zone;delegate;constructor(e,n=gp){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Ym=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs)),n.pipe(it({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},wn=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new Md(Zone.current)),this.insideAngular=n.run(()=>new Md(Zone.current,pp)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(te(ve))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Pd(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function n2(t){return Pd().ngZone.runOutsideAngular(()=>t())}function Ri(t){return Pd().ngZone.run(()=>t())}function r2(t){return i2(Pd())(t)}function i2(t){return function(n){return n=n.lift(new Ym(t.ngZone)),n.pipe(Ar(t.outsideAngular),Sr(t.insideAngular))}}var s2=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Ri(()=>t.apply(void 0,r))},Be=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=Ri(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Zs,{},Zs,Zs))),r[s]=s2(r[s],n));let i=n2(()=>t.apply(this,r));if(!e)if(i instanceof he){let s=Pd();return i.pipe(Ar(s.outsideAngular),Sr(s.insideAngular))}else return Ri(()=>i);return i instanceof he?i.pipe(r2):i instanceof Promise?Ri(()=>new Promise((s,o)=>i.then(a=>Ri(()=>s(a)),a=>Ri(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:Ri(()=>i)};var Ht=class{constructor(e){return e}},En=class{constructor(){return Va()}};function o2(t){return t&&t.length===1?t[0]:new Ht($t())}var Jm=new U("angularfire2._apps"),a2={provide:Ht,useFactory:o2,deps:[[new Pe,Jm]]},c2={provide:En,deps:[[new Pe,Jm]]};function l2(t){return(e,n)=>{let r=n.get(ur);Y("angularfire",rn.full,"core"),Y("angularfire",rn.full,"app"),Y("angular",om.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Ht(i)}}function GT(t,...e){return Bt([a2,c2,{provide:Jm,useFactory:l2(t),multi:!0,deps:[ve,ot,wn,...e]}])}var KT=Be(Hr,!0);var u2=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},d2=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},h2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):d2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new Xm;let m=s<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Xm=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};var t_=function(t){try{return h2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function f2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var p2=()=>f2().__FIREBASE_DEFAULTS__,g2=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},m2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&t_(t[1]);return e&&JSON.parse(e)},_2=()=>{try{return p2()||g2()||m2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}};var QT=t=>{var e;return(e=_2())===null||e===void 0?void 0:e[`_${t}`]};function In(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function YT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(In())}function JT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZT(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function XT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}var y2="FirebaseError",Xs=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=y2,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ni.prototype.create)}},Ni=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?v2(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Xs(i,a,r)}};function v2(t,e){return t.replace(w2,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var w2=/\{\$([^}]+)}/g;function n_(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function eD(t,e){let n=new e_(t,e);return n.subscribe.bind(n)}var e_=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");E2(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Zm),i.error===void 0&&(i.error=Zm),i.complete===void 0&&(i.complete=Zm);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function E2(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Zm(){}var SY=4*60*60*1e3;function Ba(t){return t&&t._delegate?t._delegate:t}var I2=[],xe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(xe||{}),b2={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},C2=xe.INFO,T2={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},D2=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=T2[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Od=class{constructor(e){this.name=e,this._logLevel=C2,this._logHandler=D2,this._userLogHandler=null,I2.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}};var ja=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};function cD(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var lD=cD,uD=new Ni("auth","Firebase",cD());var Vd=new Od("@firebase/auth");function A2(t,...e){Vd.logLevel<=xe.WARN&&Vd.warn(`Auth (${jt}): ${t}`,...e)}function Fd(t,...e){Vd.logLevel<=xe.ERROR&&Vd.error(`Auth (${jt}): ${t}`,...e)}function tD(t,...e){throw p_(t,...e)}function f_(t,...e){return p_(t,...e)}function dD(t,e,n){let r=Object.assign(Object.assign({},lD()),{[e]:n});return new Ni("auth","Firebase",r).create(e,{appName:t.name})}function Ld(t){return dD(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function p_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return uD.create(t,...e)}function Ie(t,e,...n){if(!t)throw p_(e,...n)}function $a(t){let e="INTERNAL ASSERTION FAILED: "+t;throw Fd(e),new Error(e)}function Ud(t,e){t||$a(e)}function x2(){return nD()==="http:"||nD()==="https:"}function nD(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function R2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(x2()||ZT()||"connection"in navigator)?navigator.onLine:!0}function N2(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var Pi=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ud(n>e,"Short delay should be less than long delay!"),this.isMobile=YT()||XT()}get(){return R2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function M2(t,e){Ud(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var Bd=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$a("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$a("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$a("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var P2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var O2=new Pi(3e4,6e4);function hD(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function zd(s,o,a,l){return A(this,arguments,function*(t,e,n,r,i={}){return fD(t,i,()=>A(this,null,function*(){let u={},f={};r&&(e==="GET"?f=r:u={body:JSON.stringify(r)});let p=n_(Object.assign({key:t.config.apiKey},f)).slice(1),m=yield t._getAdditionalHeaders();m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode);let y=Object.assign({method:e,headers:m},u);return JT()||(y.referrerPolicy="no-referrer"),Bd.fetch()(pD(t,t.config.apiHost,n,p),y)}))})}function fD(t,e,n){return A(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},P2),e);try{let i=new s_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw kd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw kd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw kd(t,"user-disabled",o);let f=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw dD(t,f,u);tD(t,f)}}catch(i){if(i instanceof Xs)throw i;tD(t,"network-request-failed",{message:String(i)})}})}function pD(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?M2(t.config,i):`${t.config.apiScheme}://${i}`}var s_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(f_(this.auth,"network-request-failed")),O2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function kd(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=f_(t,e,r);return i.customData._tokenResponse=n,i}function k2(t,e){return A(this,null,function*(){return zd(t,"POST","/v1/accounts:delete",e)})}function gD(t,e){return A(this,null,function*(){return zd(t,"POST","/v1/accounts:lookup",e)})}function Ha(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function g_(t,e=!1){return A(this,null,function*(){let n=Ba(t),r=yield n.getIdToken(e),i=mD(r);Ie(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:Ha(r_(i.auth_time)),issuedAtTime:Ha(r_(i.iat)),expirationTime:Ha(r_(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function r_(t){return Number(t)*1e3}function mD(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Fd("JWT malformed, contained fewer than 3 sections"),null;try{let i=t_(n);return i?JSON.parse(i):(Fd("Failed to decode base64 JWT payload"),null)}catch(i){return Fd("Caught error parsing JWT payload as JSON",i?.toString()),null}}function rD(t){let e=mD(t);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function o_(t,e,n=!1){return A(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Xs&&F2(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function F2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var a_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>A(this,null,function*(){yield this.iteration()}),n)}iteration(){return A(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Wa=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ha(this.lastLoginAt),this.creationTime=Ha(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function jd(t){return A(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield o_(t,gD(n,{idToken:r}));Ie(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?_D(s.providerUserInfo):[],a=L2(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!a?.length,f=l?u:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Wa(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(t,p)})}function m_(t){return A(this,null,function*(){let e=Ba(t);yield jd(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function L2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function _D(t){return t.map(e=>{var{providerId:n}=e,r=mp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function V2(t,e){return A(this,null,function*(){let n=yield fD(t,{},()=>A(this,null,function*(){let r=n_({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=pD(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Bd.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function U2(t,e){return A(this,null,function*(){return zd(t,"POST","/v2/accounts:revokeToken",hD(t,e))})}var za=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rD(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");let n=rD(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return A(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return A(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield V2(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(Ie(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Ie(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Ie(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return $a("not implemented")}};function zr(t,e){Ie(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var qa=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=mp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new a_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Wa(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return A(this,null,function*(){let n=yield o_(this,this.stsTokenManager.getToken(this.auth,e));return Ie(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return g_(this,e)}reload(){return m_(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return A(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield jd(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return A(this,null,function*(){if(xi(this.auth.app))return Promise.reject(Ld(this.auth));let e=yield this.getIdToken();return yield o_(this,k2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,u,f;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,y=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,B=(u=n.createdAt)!==null&&u!==void 0?u:void 0,Z=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:z,emailVerified:ee,isAnonymous:tt,providerData:_e,stsTokenManager:I}=n;Ie(z&&I,e,"internal-error");let _=za.fromJSON(this.name,I);Ie(typeof z=="string",e,"internal-error"),zr(p,e.name),zr(m,e.name),Ie(typeof ee=="boolean",e,"internal-error"),Ie(typeof tt=="boolean",e,"internal-error"),zr(y,e.name),zr(b,e.name),zr(N,e.name),zr(P,e.name),zr(B,e.name),zr(Z,e.name);let w=new t({uid:z,auth:e,email:m,emailVerified:ee,displayName:p,isAnonymous:tt,photoURL:b,phoneNumber:y,tenantId:N,stsTokenManager:_,createdAt:B,lastLoginAt:Z});return _e&&Array.isArray(_e)&&(w.providerData=_e.map(E=>Object.assign({},E))),P&&(w._redirectEventId=P),w}static _fromIdTokenResponse(e,n,r=!1){return A(this,null,function*(){let i=new za;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield jd(s),s})}static _fromGetAccountInfoResponse(e,n,r){return A(this,null,function*(){let i=n.users[0];Ie(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?_D(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new za;a.updateFromIdToken(r);let l=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Wa(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(l,u),l})}};var iD=new Map;function Mi(t){Ud(t instanceof Function,"Expected a class definition");let e=iD.get(t);return e?(Ud(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,iD.set(t,e),e)}var B2=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return A(this,null,function*(){return!0})}_set(n,r){return A(this,null,function*(){this.storage[n]=r})}_get(n){return A(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return A(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),c_=B2;function i_(t,e,n){return`firebase:${t}:${e}:${n}`}var $d=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=i_(this.userKey,i.apiKey,s),this.fullPersistenceKey=i_("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return A(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?qa._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return A(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return A(this,null,function*(){if(!n.length)return new t(Mi(c_),e,r);let i=(yield Promise.all(n.map(u=>A(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=i[0]||Mi(c_),o=i_(r,e.config.apiKey,e.name),a=null;for(let u of n)try{let f=yield u._get(o);if(f){let p=qa._fromJSON(e,f);u!==s&&(a=p),s=u;break}}catch{}let l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new t(s,e,r):(s=l[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(u=>A(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new t(s,e,r))})}};function sD(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(z2(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(j2(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(q2(e))return"Blackberry";if(G2(e))return"Webos";if($2(e))return"Safari";if((e.includes("chrome/")||H2(e))&&!e.includes("edge/"))return"Chrome";if(W2(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function j2(t=In()){return/firefox\//i.test(t)}function $2(t=In()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function H2(t=In()){return/crios\//i.test(t)}function z2(t=In()){return/iemobile/i.test(t)}function W2(t=In()){return/android/i.test(t)}function q2(t=In()){return/blackberry/i.test(t)}function G2(t=In()){return/webos/i.test(t)}function yD(t,e=[]){let n;switch(t){case"Browser":n=sD(In());break;case"Worker":n=`${sD(In())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${jt}/${r}`}var l_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return A(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function K2(n){return A(this,arguments,function*(t,e={}){return zd(t,"GET","/v2/passwordPolicy",hD(t,e))})}var Q2=6,u_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Q2,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var d_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hd(this),this.idTokenSubscription=new Hd(this),this.beforeStateQueue=new l_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=uD,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(()=>A(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield $d.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return A(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return A(this,null,function*(){try{let n=yield gD(this,{idToken:e}),r=yield qa._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return A(this,null,function*(){var n;if(xi(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return A(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return A(this,null,function*(){try{yield jd(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=N2()}_delete(){return A(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return A(this,null,function*(){if(xi(this.app))return Promise.reject(Ld(this));let n=e?Ba(e):null;return n&&Ie(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return A(this,null,function*(){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>A(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return A(this,null,function*(){return xi(this.app)?Promise.reject(Ld(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return xi(this.app)?Promise.reject(Ld(this)):this.queue(()=>A(this,null,function*(){yield this.assertedPersistence.setPersistence(Mi(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return A(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return A(this,null,function*(){let e=yield K2(this),n=new u_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ni("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return A(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield U2(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return A(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return A(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&Mi(e)||this._popupRedirectResolver;Ie(n,this,"argument-error"),this.redirectPersistenceManager=yield $d.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return A(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>A(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return A(this,null,function*(){if(e===this.currentUser)return this.queue(()=>A(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{let l=e.addObserver(n);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return A(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yD(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return A(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return A(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&A2(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function Y2(t){return Ba(t)}var Hd=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=eD(n=>this.observer=n)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var J2={loadJS(){return A(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Z2(t){J2=t}function X2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}function eU(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Mi);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}var WY=X2("rcb"),qY=new Pi(3e4,6e4);var GY=new Pi(2e3,1e4);var KY=10*60*1e3;var QY=new Pi(3e4,6e4);var YY=new Pi(5e3,15e3);var JY=encodeURIComponent("fac");var oD="@firebase/auth",aD="1.7.9";var h_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return A(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nU(t){Ke(new ja("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Ie(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yD(t)},u=new d_(r,i,s,l);return eU(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ke(new ja("auth-internal",e=>{let n=Y2(e.getProvider("auth").getImmediate());return(r=>new h_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Y(oD,aD,tU(t)),Y(oD,aD,"esm2017")}var rU=5*60,ZY=QT("authIdTokenMaxAge")||rU;function iU(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Z2({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=f_("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",iU().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nU("Browser");var rB="auth";var Wr=class{constructor(){return vn(rB)}};var __={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var M=function(t,e){if(!t)throw Oi(e)},Oi=function(t){return new Error("Firebase Database ("+__.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var wD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},qd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(wD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new y_;let m=s<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},y_=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},w_=function(t){let e=wD(t);return qd.encodeByteArray(e,!0)},vD=function(t){return w_(t).replace(/\./g,"")},v_=function(t){try{return qd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ED(t){return ID(void 0,t)}function ID(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!sB(n)||(t[n]=ID(t[n],e[n]));return t}function sB(t){return t!=="__proto__"}function oB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var aB=()=>oB().__FIREBASE_DEFAULTS__,cB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},lB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&v_(t[1]);return e&&JSON.parse(e)},uB=()=>{try{return aB()||cB()||lB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dB=t=>{var e,n;return(n=(e=uB())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},bD=t=>{let e=dB(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]};var qr=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function CD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vD(JSON.stringify(n)),vD(JSON.stringify(o)),""].join(".")}function hB(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function E_(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(hB())}function TD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Bn(){return __.NODE_CLIENT===!0||__.NODE_ADMIN===!0}function eo(t){return JSON.parse(t)}function et(t){return JSON.stringify(t)}var DD=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=eo(v_(s[0])||""),n=eo(v_(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var SD=function(t){let e=DD(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},AD=function(t){let e=DD(t).claims;return typeof e=="object"&&e.admin===!0};function bn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ki(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function I_(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ga(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function xD(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}var Wd=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],l=this.chain_[4],u,f;for(let p=0;p<80;p++){p<40?p<20?(u=a^s&(o^a),f=1518500249):(u=s^o^a,f=1859775393):p<60?(u=s&o|a&(s|o),f=2400959708):(u=s^o^a,f=3395469782);let m=(i<<5|i>>>27)+u+l+f+r[p]&4294967295;l=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function Ka(t,e){return`${t} failed: ${e} argument `}var RD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,M(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Qa=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var $J=4*60*60*1e3;function Gr(t){return t&&t._delegate?t._delegate:t}var Gd=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var fB=[],Re=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Re||{}),pB={debug:Re.DEBUG,verbose:Re.VERBOSE,info:Re.INFO,warn:Re.WARN,error:Re.ERROR,silent:Re.SILENT},gB=Re.INFO,mB={[Re.DEBUG]:"log",[Re.VERBOSE]:"log",[Re.INFO]:"info",[Re.WARN]:"warn",[Re.ERROR]:"error"},_B=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=mB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kd=class{constructor(e){this.name=e,this._logLevel=gB,this._logHandler=_B,this._userLogHandler=null,fB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?pB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Re.DEBUG,...e),this._logHandler(this,Re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Re.VERBOSE,...e),this._logHandler(this,Re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Re.INFO,...e),this._logHandler(this,Re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Re.WARN,...e),this._logHandler(this,Re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Re.ERROR,...e),this._logHandler(this,Re.ERROR,...e)}};var ND="@firebase/database",MD="1.0.8";var Ty="";function yB(t){Ty=t}var R_=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),et(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:eo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var N_=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return bn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var uS=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new R_(e)}}catch{}return new N_},Li=uS("localStorage"),M_=uS("sessionStorage");var ro=new Kd("@firebase/database"),vB=function(){let t=1;return function(){return t++}}(),dS=function(t){let e=RD(t),n=new Wd;n.update(e);let r=n.digest();return qd.encodeByteArray(r)},gc=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=gc.apply(null,r):typeof r=="object"?e+=et(r):e+=r,e+=" "}return e},Vi=null,PD=!0,wB=function(t,e){M(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(ro.logLevel=Re.VERBOSE,Vi=ro.log.bind(ro),e&&M_.set("logging_enabled",!0)):typeof t=="function"?Vi=t:(Vi=null,M_.remove("logging_enabled"))},ut=function(...t){if(PD===!0&&(PD=!1,Vi===null&&M_.get("logging_enabled")===!0&&wB(!0)),Vi){let e=gc.apply(null,t);Vi(e)}},mc=function(t){return function(...e){ut(t,...e)}},P_=function(...t){let e="FIREBASE INTERNAL ERROR: "+gc(...t);ro.error(e)},_r=function(...t){let e=`FIREBASE FATAL ERROR: ${gc(...t)}`;throw ro.error(e),new Error(e)},At=function(...t){let e="FIREBASE WARNING: "+gc(...t);ro.warn(e)},EB=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&At("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Dy=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},IB=function(t){if(Bn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},so="[MIN_NAME]",Ui="[MAX_NAME]",$i=function(t,e){if(t===e)return 0;if(t===so||e===Ui)return-1;if(e===so||t===Ui)return 1;{let n=OD(t),r=OD(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},bB=function(t,e){return t===e?0:t<e?-1:1},Ya=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+et(e))},Sy=function(t){if(typeof t!="object"||t===null)return et(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=et(e[r]),n+=":",n+=Sy(t[e[r]]);return n+="}",n},hS=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function dt(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var fS=function(t){M(!Dy(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,l;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let u=[];for(l=n;l;l-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(l=e;l;l-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();let f=u.join(""),p="";for(l=0;l<64;l+=8){let m=parseInt(f.substr(l,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},CB=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},TB=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function DB(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");let r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}var SB=new RegExp("^-?(0*)\\d{1,10}$"),AB=-2147483648,xB=2147483647,OD=function(t){if(SB.test(t)){let e=Number(t);if(e>=AB&&e<=xB)return e}return null},po=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw At("Exception was thrown by user callback.",n),e},Math.floor(0))}},RB=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},tc=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var O_=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){At(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var k_=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(ut("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',At(e)}},nc=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),Yd="5",pS="v",gS="s",mS="r",_S="f",yS=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,vS="ls",wS="p",F_="ac",ES="websocket",IS="long_polling";var Jd=class{constructor(e,n,r,i,s=!1,o="",a=!1,l=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Li.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Li.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function NB(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function bS(t,e,n){M(typeof e=="string","typeof type must == string"),M(typeof n=="object","typeof params must == object");let r;if(e===ES)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===IS)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);NB(t)&&(n.ns=t.namespace);let i=[];return dt(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var L_=class{constructor(){this.counters_={}}incrementCounter(e,n=1){bn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ED(this.counters_)}};var b_={},C_={};function Ay(t){let e=t.toString();return b_[e]||(b_[e]=new L_),b_[e]}function MB(t,e){let n=t.toString();return C_[n]||(C_[n]=e()),C_[n]}var V_=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&po(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var kD="start",PB="close",OB="pLPCommand",kB="pRTLPCB",CS="id",TS="pw",DS="ser",FB="cb",LB="seg",VB="ts",UB="d",BB="dframe",SS=1870,AS=30,jB=SS-AS,$B=25e3,HB=3e4,U_=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mc(e),this.stats_=Ay(n),this.urlFn=l=>(this.appCheckToken&&(l[F_]=this.appCheckToken),bS(n,IS,l))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new V_(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(HB)),IB(()=>{if(this.isClosed_)return;this.scriptTagHolder=new B_((...s)=>{let[o,a,l,u,f]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===kD)this.id=a,this.password=l;else if(o===PB)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[kD]="t",r[DS]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[FB]=this.scriptTagHolder.uniqueCallbackIdentifier),r[pS]=Yd,this.transportSessionId&&(r[gS]=this.transportSessionId),this.lastSessionId&&(r[vS]=this.lastSessionId),this.applicationId&&(r[wS]=this.applicationId),this.appCheckToken&&(r[F_]=this.appCheckToken),typeof location<"u"&&location.hostname&&yS.test(location.hostname)&&(r[mS]=_S);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Bn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!CB()&&!TB()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=et(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=w_(n),i=hS(r,jB);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Bn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[BB]="t",r[CS]=e,r[TS]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=et(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},B_=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Bn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=vB(),window[OB+this.uniqueCallbackIdentifier]=e,window[kB+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){ut("frame writing exception"),a.stack&&ut(a.stack),ut(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||ut("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[CS]=this.myID,e[TS]=this.myPW,e[DS]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+AS+r.length<=SS;){let o=this.pendingSegs.shift();r=r+"&"+LB+i+"="+o.seg+"&"+VB+i+"="+o.ts+"&"+UB+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor($B)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Bn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{ut("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var zB=16384,WB=45e3,Zd=null;typeof MozWebSocket<"u"?Zd=MozWebSocket:typeof WebSocket<"u"&&(Zd=WebSocket);var Ja=(()=>{class t{constructor(n,r,i,s,o,a,l){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mc(this.connId),this.stats_=Ay(r),this.connURL=t.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[pS]=Yd,!Bn()&&typeof location<"u"&&location.hostname&&yS.test(location.hostname)&&(a[mS]=_S),r&&(a[gS]=r),i&&(a[vS]=i),s&&(a[F_]=s),o&&(a[wS]=o),bS(n,ES,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Li.set("previous_websocket_failure",!0);try{let i;if(Bn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${Yd}/${Ty}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Zd(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&Zd!==null&&!t.forceDisallow_}static previouslyFailed(){return Li.isInMemoryStorage||Li.get("previous_websocket_failure")===!0}markConnectionHealthy(){Li.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=eo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(M(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=et(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=hS(r,zB);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WB))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),qB=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[U_,Ja]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Ja&&Ja.isAvailable(),i=r&&!Ja.previouslyFailed();if(n.webSocketOnly&&(r||At("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ja];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),GB=6e4,KB=5e3,QB=10*1024,YB=100*1024,T_="t",FD="d",JB="s",LD="r",ZB="e",VD="o",UD="a",BD="n",jD="p",XB="h",j_=class{constructor(e,n,r,i,s,o,a,l,u,f){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=u,this.lastSessionId=f,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mc("c:"+this.id+":"),this.transportManager_=new qB(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=tc(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>YB?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>QB?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(T_ in e){let n=e[T_];n===UD?this.upgradeIfSecondaryHealthy_():n===LD?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===VD&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=Ya("t",e),r=Ya("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jD,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:UD,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:BD,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=Ya("t",e),r=Ya("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=Ya(T_,e);if(FD in e){let r=e[FD];if(n===XB){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===BD){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===JB?this.onConnectionShutdown_(r):n===LD?this.onReset_(r):n===ZB?P_("Server Error: "+r):n===VD?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):P_("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Yd!==r&&At("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),tc(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(GB))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):tc(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(KB))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jD,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Li.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var Xd=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var eh=class{constructor(e){this.allowedEvents_=e,this.listeners_={},M(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){M(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var th=class t extends eh{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!E_()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return M(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var $D=32,HD=768,be=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function we(){return new be("")}function oe(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jr(t){return t.pieces_.length-t.pieceNum_}function Ne(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new be(t.pieces_,e)}function xy(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function ej(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function oc(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function xS(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new be(e,0)}function je(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof be)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new be(n,0)}function de(t){return t.pieceNum_>=t.pieces_.length}function St(t,e){let n=oe(t),r=oe(e);if(n===null)return e;if(n===r)return St(Ne(t),Ne(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tj(t,e){let n=oc(t,0),r=oc(e,0);for(let i=0;i<n.length&&i<r.length;i++){let s=$i(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Ry(t,e){if(Jr(t)!==Jr(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function sn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Jr(t)>Jr(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var $_=class{constructor(e,n){this.errorPrefix_=n,this.parts_=oc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Qa(this.parts_[r]);RS(this)}};function nj(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Qa(e),RS(t)}function rj(t){let e=t.parts_.pop();t.byteLength_-=Qa(e),t.parts_.length>0&&(t.byteLength_-=1)}function RS(t){if(t.byteLength_>HD)throw new Error(t.errorPrefix_+"has a key path longer than "+HD+" bytes ("+t.byteLength_+").");if(t.parts_.length>$D)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+$D+") or object contains a cycle "+Fi(t))}function Fi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var H_=class t extends eh{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return M(e==="visible","Unknown event type: "+e),[this.visible_]}};var Za=1e3,ij=60*5*1e3,zD=30*1e3,sj=1.3,oj=3e4,aj="server_kill",WD=3,Ny=(()=>{class t extends Xd{constructor(n,r,i,s,o,a,l,u){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=u,this.id=t.nextPersistentConnectionId_++,this.log_=mc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Za,this.maxReconnectDelay_=ij,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,u&&!Bn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");H_.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&th.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(et(o)),M(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new qr,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?r.resolve(l):r.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),M(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),M(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,l=>{let u=l.d,f=l.s;t.warnOnListenWarnings_(u,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",l),f!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(f,u))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&bn(n,"w")){let i=ki(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();At(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||AD(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=zD)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=SD(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),M(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+et(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):P_("Unrecognized action received from server: "+et(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){M(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>oj&&(this.reconnectDelay_=Za),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*sj)}this.onConnectStatus_(!1)}establishConnection_(){return A(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,u=function(){l?l.close():(a=!0,i())},f=function(m){M(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(m)};this.realtime_={close:u,sendRequest:f};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,y]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?ut("getToken() completed but was canceled"):(ut("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=y&&y.token,l=new j_(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,b=>{At(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(aj)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&At(m),u())}}})}interrupt(n){ut("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){ut("Resuming connection for reason: "+n),delete this.interruptReasons_[n],I_(this.interruptReasons_)&&(this.reconnectDelay_=Za,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>Sy(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new be(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){ut("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WD&&(this.reconnectDelay_=zD,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){ut("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Bn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+Ty.replace(/\./g,"-")]=1,E_()?n["framework.cordova"]=1:TD()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=th.getInstance().currentlyOnline();return I_(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),ae=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var oo=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new ae(so,e),i=new ae(so,n);return this.compare(r,i)!==0}minPost(){return ae.MIN}};var Qd,nh=class extends oo{static get __EMPTY_NODE(){return Qd}static set __EMPTY_NODE(e){Qd=e}compare(e,n){return $i(e.name,n.name)}isDefinedOn(e){throw Oi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return ae.MIN}maxPost(){return new ae(Ui,Qd)}makePost(e,n){return M(typeof e=="string","KeyIndex indexValue must always be a string."),new ae(e,Qd)}toString(){return".key"}},io=new nh;var no=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},Cn=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??on.EMPTY_NODE,this.right=o??on.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return on.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return on.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),z_=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new Cn(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},on=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Cn.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Cn.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new no(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new no(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new no(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new no(this.root_,null,this.comparator_,!0,e)}};on.EMPTY_NODE=new z_;function cj(t,e){return $i(t.name,e.name)}function My(t,e){return $i(t,e)}var W_;function lj(t){W_=t}var NS=function(t){return typeof t=="number"?"number:"+fS(t):"string:"+t},MS=function(t){if(t.isLeafNode()){let e=t.val();M(typeof e=="string"||typeof e=="number"||typeof e=="object"&&bn(e,".sv"),"Priority must be a string or number.")}else M(t===W_||t.isEmpty(),"priority of unexpected type.");M(t===W_||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var qD,ao=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,M(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),MS(this.priorityNode_)}static set __childrenNodeConstructor(n){qD=n}static get __childrenNodeConstructor(){return qD}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return de(n)?this:oe(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=oe(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(M(i!==".priority"||Jr(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ne(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+NS(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=fS(this.value_):n+=this.value_,this.lazyHash_=dS(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(M(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return M(s>=0,"Unknown leaf type: "+r),M(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),PS,OS;function uj(t){PS=t}function dj(t){OS=t}var q_=class extends oo{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?$i(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return ae.MIN}maxPost(){return new ae(Ui,new ao("[PRIORITY-POST]",OS))}makePost(e,n){let r=PS(e);return new ae(n,new ao("[PRIORITY-POST]",r))}toString(){return".priority"}},$e=new q_;var hj=Math.log(2),G_=class{constructor(e){let n=s=>parseInt(Math.log(s)/hj,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},rh=function(t,e,n,r){t.sort(e);let i=function(l,u){let f=u-l,p,m;if(f===0)return null;if(f===1)return p=t[l],m=n?n(p):p,new Cn(m,p.node,Cn.BLACK,null,null);{let y=parseInt(f/2,10)+l,b=i(l,y),N=i(y+1,u);return p=t[y],m=n?n(p):p,new Cn(m,p.node,Cn.BLACK,b,N)}},s=function(l){let u=null,f=null,p=t.length,m=function(b,N){let P=p-b,B=p;p-=b;let Z=i(P+1,B),z=t[P],ee=n?n(z):z;y(new Cn(ee,z.node,N,null,Z))},y=function(b){u?(u.left=b,u=b):(f=b,u=b)};for(let b=0;b<l.count;++b){let N=l.nextBitIsOne(),P=Math.pow(2,l.count-(b+1));N?m(P,Cn.BLACK):(m(P,Cn.BLACK),m(P,Cn.RED))}return f},o=new G_(t.length),a=s(o);return new on(r||e,a)};var D_,to={},co=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return M(to&&$e,"ChildrenNode.ts has not been loaded"),D_=D_||new t({".priority":to},{".priority":$e}),D_}get(e){let n=ki(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof on?n:null}hasIndex(e){return bn(this.indexSet_,e.toString())}addIndex(e,n){M(e!==io,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(ae.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=rh(r,e.getCompare()):a=to;let l=e.toString(),u=Object.assign({},this.indexSet_);u[l]=e;let f=Object.assign({},this.indexes_);return f[l]=a,new t(f,u)}addToIndexes(e,n){let r=Ga(this.indexes_,(i,s)=>{let o=ki(this.indexSet_,s);if(M(o,"Missing index implementation for "+s),i===to)if(o.isDefinedOn(e.node)){let a=[],l=n.getIterator(ae.Wrap),u=l.getNext();for(;u;)u.name!==e.name&&a.push(u),u=l.getNext();return a.push(e),rh(a,o.getCompare())}else return to;else{let a=n.get(e.name),l=i;return a&&(l=l.remove(new ae(e.name,a))),l.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Ga(this.indexes_,i=>{if(i===to)return i;{let s=n.get(e.name);return s?i.remove(new ae(e.name,s)):i}});return new t(r,this.indexSet_)}};var Xa,J=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&MS(this.priorityNode_),this.children_.isEmpty()&&M(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xa||(Xa=new t(new on(My),null,co.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xa}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?Xa:r}}getChild(n){let r=oe(n);return r===null?this:this.getImmediateChild(r).getChild(Ne(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(M(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new ae(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?Xa:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=oe(n);if(i===null)return r;{M(oe(n)!==".priority"||Jr(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Ne(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild($e,(a,l)=>{r[a]=l.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let l in r)a[l]=r[l];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+NS(this.getPriority().val())+":"),this.forEachChild($e,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":dS(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new ae(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new ae(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new ae(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,ae.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===_c?-1:0}withIndex(n){if(n===io||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===io||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator($e),s=r.getIterator($e),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===io?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),K_=class extends J{constructor(){super(new on(My),J.EMPTY_NODE,co.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return J.EMPTY_NODE}isEmpty(){return!1}},_c=new K_;Object.defineProperties(ae,{MIN:{value:new ae(so,J.EMPTY_NODE)},MAX:{value:new ae(Ui,_c)}});nh.__EMPTY_NODE=J.EMPTY_NODE;ao.__childrenNodeConstructor=J;lj(_c);dj(_c);var fj=!0;function st(t,e=null){if(t===null)return J.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),M(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new ao(n,st(e))}if(!(t instanceof Array)&&fj){let n=[],r=!1;if(dt(t,(o,a)=>{if(o.substring(0,1)!=="."){let l=st(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),n.push(new ae(o,l)))}}),n.length===0)return J.EMPTY_NODE;let s=rh(n,cj,o=>o.name,My);if(r){let o=rh(n,$e.getCompare());return new J(s,st(e),new co({".priority":o},{".priority":$e}))}else return new J(s,st(e),co.Default)}else{let n=J.EMPTY_NODE;return dt(t,(r,i)=>{if(bn(t,r)&&r.substring(0,1)!=="."){let s=st(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(st(e))}}uj(st);var Q_=class extends oo{constructor(e){super(),this.indexPath_=e,M(!de(e)&&oe(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?$i(e.name,n.name):s}makePost(e,n){let r=st(e),i=J.EMPTY_NODE.updateChild(this.indexPath_,r);return new ae(n,i)}maxPost(){let e=J.EMPTY_NODE.updateChild(this.indexPath_,_c);return new ae(Ui,e)}toString(){return oc(this.indexPath_,0).join("/")}};var Y_=class extends oo{compare(e,n){let r=e.node.compareTo(n.node);return r===0?$i(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return ae.MIN}maxPost(){return ae.MAX}makePost(e,n){let r=st(e);return new ae(n,r)}toString(){return".value"}},pj=new Y_;function kS(t){return{type:"value",snapshotNode:t}}function lo(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ac(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function cc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function gj(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var lc=class{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){M(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=e.getImmediateChild(n);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(ac(n,a)):M(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(lo(n,r)):o.trackChildChange(cc(n,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild($e,(i,s)=>{n.hasChild(i)||r.trackChildChange(ac(i,s))}),n.isLeafNode()||n.forEachChild($e,(i,s)=>{if(e.hasChild(i)){let o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(cc(i,s,o))}else r.trackChildChange(lo(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?J.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var ih=class t{constructor(e){this.indexedFilter_=new lc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){let n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new ae(n,r))||(r=J.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=J.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(J.EMPTY_NODE);let s=this;return n.forEachChild($e,(o,a)=>{s.matches(new ae(o,a))||(i=i.updateImmediateChild(o,J.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){let n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){let n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}};var J_=class{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{let r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{let r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new ih(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new ae(n,r))||(r=J.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=J.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=J.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))i=i.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(J.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,J.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){let p=this.index_.getCompare();o=(m,y)=>p(y,m)}else o=this.index_.getCompare();let a=e;M(a.numChildren()===this.limit_,"");let l=new ae(n,r),u=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),f=this.rangedFilter_.matches(l);if(a.hasChild(n)){let p=a.getImmediateChild(n),m=i.getChildAfterChild(this.index_,u,this.reverse_);for(;m!=null&&(m.name===n||a.hasChild(m.name));)m=i.getChildAfterChild(this.index_,m,this.reverse_);let y=m==null?1:o(m,l);if(f&&!r.isEmpty()&&y>=0)return s?.trackChildChange(cc(n,r,p)),a.updateImmediateChild(n,r);{s?.trackChildChange(ac(n,p));let N=a.updateImmediateChild(n,J.EMPTY_NODE);return m!=null&&this.rangedFilter_.matches(m)?(s?.trackChildChange(lo(m.name,m.node)),N.updateImmediateChild(m.name,m.node)):N}}else return r.isEmpty()?e:f&&o(u,l)>=0?(s!=null&&(s.trackChildChange(ac(u.name,u.node)),s.trackChildChange(lo(n,r))),a.updateImmediateChild(n,r).updateImmediateChild(u.name,J.EMPTY_NODE)):e}};var Z_=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$e}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return M(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return M(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:so}hasEnd(){return this.endSet_}getIndexEndValue(){return M(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return M(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ui}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return M(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$e}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function mj(t){return t.loadsAllData()?new lc(t.getIndex()):t.hasLimit()?new J_(t):new ih(t)}function GD(t){let e={};if(t.isDefault())return e;let n;if(t.index_===$e?n="$priority":t.index_===pj?n="$value":t.index_===io?n="$key":(M(t.index_ instanceof Q_,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=et(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=et(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+et(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=et(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+et(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function KD(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==$e&&(e.i=t.index_.toString()),e}var X_=class t extends Xd{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=mc("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(M(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let l=GD(e._queryParams);this.restRequest_(s+".json",l,(u,f)=>{let p=f;if(u===404&&(p=null,u=null),u===null&&this.onDataUpdate_(s,p,!1,r),ki(this.listens_,o)===a){let m;u?u===401?m="permission_denied":m="rest_error:"+u:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=GD(e._queryParams),r=e._path.toString(),i=new qr;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+xD(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=eo(a.responseText)}catch{At("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else a.status!==401&&a.status!==404&&At("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var ey=class{constructor(){this.rootNode_=J.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function sh(){return{value:null,children:new Map}}function FS(t,e,n){if(de(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=oe(e);t.children.has(r)||t.children.set(r,sh());let i=t.children.get(r);e=Ne(e),FS(i,e,n)}}function ty(t,e,n){t.value!==null?n(e,t.value):_j(t,(r,i)=>{let s=new be(e.toString()+"/"+r);ty(i,s,n)})}function _j(t,e){t.children.forEach((n,r)=>{e(r,n)})}var ny=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&dt(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var QD=10*1e3,yj=30*1e3,vj=5*60*1e3,ry=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new ny(e);let r=QD+(yj-QD)*Math.random();tc(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;dt(e,(i,s)=>{s>0&&bn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),tc(this.reportStats_.bind(this),Math.floor(Math.random()*2*vj))}};var jn=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(jn||{});function Py(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Oy(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function ky(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var iy=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=jn.ACK_USER_WRITE,this.source=Py()}operationForChild(e){if(de(this.path)){if(this.affectedTree.value!=null)return M(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new be(e));return new t(we(),n,this.revert)}}else return M(oe(this.path)===e,"operationForChild called for unrelated child."),new t(Ne(this.path),this.affectedTree,this.revert)}};var oh=class t{constructor(e,n){this.source=e,this.path=n,this.type=jn.LISTEN_COMPLETE}operationForChild(e){return de(this.path)?new t(this.source,we()):new t(this.source,Ne(this.path))}};var uo=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=jn.OVERWRITE}operationForChild(e){return de(this.path)?new t(this.source,we(),this.snap.getImmediateChild(e)):new t(this.source,Ne(this.path),this.snap)}};var uc=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=jn.MERGE}operationForChild(e){if(de(this.path)){let n=this.children.subtree(new be(e));return n.isEmpty()?null:n.value?new uo(this.source,we(),n.value):new t(this.source,we(),n)}else return M(oe(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Ne(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var $n=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(de(e))return this.isFullyInitialized()&&!this.filtered_;let n=oe(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};var sy=class{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}};function wj(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(gj(o.childName,o.snapshotNode))}),ec(t,i,"child_removed",e,r,n),ec(t,i,"child_added",e,r,n),ec(t,i,"child_moved",s,r,n),ec(t,i,"child_changed",e,r,n),ec(t,i,"value",e,r,n),i}function ec(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,l)=>Ij(t,a,l)),o.forEach(a=>{let l=Ej(t,a,s);i.forEach(u=>{u.respondsTo(a.type)&&e.push(u.createEvent(l,t.query_))})})}function Ej(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function Ij(t,e,n){if(e.childName==null||n.childName==null)throw Oi("Should only compare child_ events.");let r=new ae(e.childName,e.snapshotNode),i=new ae(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function wh(t,e){return{eventCache:t,serverCache:e}}function rc(t,e,n,r){return wh(new $n(e,n,r),t.serverCache)}function LS(t,e,n,r){return wh(t.eventCache,new $n(e,n,r))}function ah(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Bi(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var S_,bj=()=>(S_||(S_=new on(bB)),S_),xt=class t{constructor(e,n=bj()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return dt(e,(r,i)=>{n=n.set(new be(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:we(),value:this.value};if(de(e))return null;{let r=oe(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Ne(e),n);return s!=null?{path:je(new be(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(de(e))return this;{let n=oe(e),r=this.children.get(n);return r!==null?r.subtree(Ne(e)):new t(null)}}set(e,n){if(de(e))return new t(n,this.children);{let r=oe(e),s=(this.children.get(r)||new t(null)).set(Ne(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(de(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=oe(e),r=this.children.get(n);if(r){let i=r.remove(Ne(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(de(e))return this.value;{let n=oe(e),r=this.children.get(n);return r?r.get(Ne(e)):null}}setTree(e,n){if(de(e))return n;{let r=oe(e),s=(this.children.get(r)||new t(null)).setTree(Ne(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(we(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(je(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,we(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(de(e))return null;{let s=oe(e),o=this.children.get(s);return o?o.findOnPath_(Ne(e),je(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,we(),n)}foreachOnPath_(e,n,r){if(de(e))return this;{this.value&&r(n,this.value);let i=oe(e),s=this.children.get(i);return s?s.foreachOnPath_(Ne(e),je(n,i),r):new t(null)}}foreach(e){this.foreach_(we(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(je(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Tn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new xt(null))}};function ic(t,e,n){if(de(e))return new Tn(new xt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=St(i,e);return s=s.updateChild(o,n),new Tn(t.writeTree_.set(i,s))}else{let i=new xt(n),s=t.writeTree_.setTree(e,i);return new Tn(s)}}}function oy(t,e,n){let r=t;return dt(n,(i,s)=>{r=ic(r,je(e,i),s)}),r}function YD(t,e){if(de(e))return Tn.empty();{let n=t.writeTree_.setTree(e,new xt(null));return new Tn(n)}}function ay(t,e){return Hi(t,e)!=null}function Hi(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(St(n.path,e)):null}function JD(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild($e,(r,i)=>{e.push(new ae(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new ae(r,i.value))}),e}function Qr(t,e){if(de(e))return t;{let n=Hi(t,e);return n!=null?new Tn(new xt(n)):new Tn(t.writeTree_.subtree(e))}}function cy(t){return t.writeTree_.isEmpty()}function ho(t,e){return VS(we(),t.writeTree_,e)}function VS(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(M(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=VS(je(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(je(t,".priority"),r)),n}}function Eh(t,e){return $S(e,t)}function Cj(t,e,n,r,i){M(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ic(t.visibleWrites,e,n)),t.lastWriteId=r}function Tj(t,e,n,r){M(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=oy(t.visibleWrites,e,n),t.lastWriteId=r}function Dj(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function Sj(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);M(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&Aj(a,r.path)?i=!1:sn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return xj(t),!0;if(r.snap)t.visibleWrites=YD(t.visibleWrites,r.path);else{let a=r.children;dt(a,l=>{t.visibleWrites=YD(t.visibleWrites,je(r.path,l))})}return!0}else return!1}function Aj(t,e){if(t.snap)return sn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&sn(je(t.path,n),e))return!0;return!1}function xj(t){t.visibleWrites=US(t.allWrites,Rj,we()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function Rj(t){return t.visible}function US(t,e,n){let r=Tn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)sn(n,o)?(a=St(n,o),r=ic(r,a,s.snap)):sn(o,n)&&(a=St(o,n),r=ic(r,we(),s.snap.getChild(a)));else if(s.children){if(sn(n,o))a=St(n,o),r=oy(r,a,s.children);else if(sn(o,n))if(a=St(o,n),de(a))r=oy(r,we(),s.children);else{let l=ki(s.children,oe(a));if(l){let u=l.getChild(Ne(a));r=ic(r,we(),u)}}}else throw Oi("WriteRecord should have .snap or .children")}}return r}function BS(t,e,n,r,i){if(!r&&!i){let s=Hi(t.visibleWrites,e);if(s!=null)return s;{let o=Qr(t.visibleWrites,e);if(cy(o))return n;if(n==null&&!ay(o,we()))return null;{let a=n||J.EMPTY_NODE;return ho(o,a)}}}else{let s=Qr(t.visibleWrites,e);if(!i&&cy(s))return n;if(!i&&n==null&&!ay(s,we()))return null;{let o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(sn(u.path,e)||sn(e,u.path))},a=US(t.allWrites,o,e),l=n||J.EMPTY_NODE;return ho(a,l)}}}function Nj(t,e,n){let r=J.EMPTY_NODE,i=Hi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild($e,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Qr(t.visibleWrites,e);return n.forEachChild($e,(o,a)=>{let l=ho(Qr(s,new be(o)),a);r=r.updateImmediateChild(o,l)}),JD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Qr(t.visibleWrites,e);return JD(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function Mj(t,e,n,r,i){M(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=je(e,n);if(ay(t.visibleWrites,s))return null;{let o=Qr(t.visibleWrites,s);return cy(o)?i.getChild(n):ho(o,i.getChild(n))}}function Pj(t,e,n,r){let i=je(e,n),s=Hi(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Qr(t.visibleWrites,i);return ho(o,r.getNode().getImmediateChild(n))}else return null}function Oj(t,e){return Hi(t.visibleWrites,e)}function kj(t,e,n,r,i,s,o){let a,l=Qr(t.visibleWrites,e),u=Hi(l,we());if(u!=null)a=u;else if(n!=null)a=ho(l,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let f=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),y=m.getNext();for(;y&&f.length<i;)p(y,r)!==0&&f.push(y),y=m.getNext();return f}else return[]}function Fj(){return{visibleWrites:Tn.empty(),allWrites:[],lastWriteId:-1}}function ch(t,e,n,r){return BS(t.writeTree,t.treePath,e,n,r)}function Fy(t,e){return Nj(t.writeTree,t.treePath,e)}function ZD(t,e,n,r){return Mj(t.writeTree,t.treePath,e,n,r)}function lh(t,e){return Oj(t.writeTree,je(t.treePath,e))}function Lj(t,e,n,r,i,s){return kj(t.writeTree,t.treePath,e,n,r,i,s)}function Ly(t,e,n){return Pj(t.writeTree,t.treePath,e,n)}function jS(t,e){return $S(je(t.treePath,e),t.writeTree)}function $S(t,e){return{treePath:t,writeTree:e}}var ly=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;M(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),M(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,cc(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,ac(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,lo(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,cc(r,e.snapshotNode,i.oldSnap));else throw Oi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var uy=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},HS=new uy,dc=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new $n(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ly(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Bi(this.viewCache_),s=Lj(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function Vj(t){return{filter:t}}function Uj(t,e){M(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),M(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function Bj(t,e,n,r,i){let s=new ly,o,a;if(n.type===jn.OVERWRITE){let u=n;u.source.fromUser?o=dy(t,e,u.path,u.snap,r,i,s):(M(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!de(u.path),o=uh(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===jn.MERGE){let u=n;u.source.fromUser?o=$j(t,e,u.path,u.children,r,i,s):(M(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered(),o=hy(t,e,u.path,u.children,r,i,a,s))}else if(n.type===jn.ACK_USER_WRITE){let u=n;u.revert?o=Wj(t,e,u.path,r,i,s):o=Hj(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===jn.LISTEN_COMPLETE)o=zj(t,e,n.path,r,s);else throw Oi("Unknown operation type: "+n.type);let l=s.getChanges();return jj(e,o,l),{viewCache:o,changes:l}}function jj(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=ah(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(kS(ah(e)))}}function zS(t,e,n,r,i,s){let o=e.eventCache;if(lh(r,n)!=null)return e;{let a,l;if(de(n))if(M(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let u=Bi(e),f=u instanceof J?u:J.EMPTY_NODE,p=Fy(r,f);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let u=ch(r,Bi(e));a=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{let u=oe(n);if(u===".priority"){M(Jr(n)===1,"Can't have a priority with additional path components");let f=o.getNode();l=e.serverCache.getNode();let p=ZD(r,n,f,l);p!=null?a=t.filter.updatePriority(f,p):a=o.getNode()}else{let f=Ne(n),p;if(o.isCompleteForChild(u)){l=e.serverCache.getNode();let m=ZD(r,n,o.getNode(),l);m!=null?p=o.getNode().getImmediateChild(u).updateChild(f,m):p=o.getNode().getImmediateChild(u)}else p=Ly(r,u,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),u,p,f,i,s):a=o.getNode()}}return rc(e,a,o.isFullyInitialized()||de(n),t.filter.filtersNodes())}}function uh(t,e,n,r,i,s,o,a){let l=e.serverCache,u,f=o?t.filter:t.filter.getIndexedFilter();if(de(n))u=f.updateFullNode(l.getNode(),r,null);else if(f.filtersNodes()&&!l.isFiltered()){let y=l.getNode().updateChild(n,r);u=f.updateFullNode(l.getNode(),y,null)}else{let y=oe(n);if(!l.isCompleteForPath(n)&&Jr(n)>1)return e;let b=Ne(n),P=l.getNode().getImmediateChild(y).updateChild(b,r);y===".priority"?u=f.updatePriority(l.getNode(),P):u=f.updateChild(l.getNode(),y,P,b,HS,null)}let p=LS(e,u,l.isFullyInitialized()||de(n),f.filtersNodes()),m=new dc(i,p,s);return zS(t,p,n,i,m,a)}function dy(t,e,n,r,i,s,o){let a=e.eventCache,l,u,f=new dc(i,e,s);if(de(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),l=rc(e,u,!0,t.filter.filtersNodes());else{let p=oe(n);if(p===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),l=rc(e,u,a.isFullyInitialized(),a.isFiltered());else{let m=Ne(n),y=a.getNode().getImmediateChild(p),b;if(de(m))b=r;else{let N=f.getCompleteChild(p);N!=null?xy(m)===".priority"&&N.getChild(xS(m)).isEmpty()?b=N:b=N.updateChild(m,r):b=J.EMPTY_NODE}if(y.equals(b))l=e;else{let N=t.filter.updateChild(a.getNode(),p,b,m,f,o);l=rc(e,N,a.isFullyInitialized(),t.filter.filtersNodes())}}}return l}function XD(t,e){return t.eventCache.isCompleteForChild(e)}function $j(t,e,n,r,i,s,o){let a=e;return r.foreach((l,u)=>{let f=je(n,l);XD(e,oe(f))&&(a=dy(t,a,f,u,i,s,o))}),r.foreach((l,u)=>{let f=je(n,l);XD(e,oe(f))||(a=dy(t,a,f,u,i,s,o))}),a}function eS(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function hy(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let l=e,u;de(n)?u=r:u=new xt(null).setTree(n,r);let f=e.serverCache.getNode();return u.children.inorderTraversal((p,m)=>{if(f.hasChild(p)){let y=e.serverCache.getNode().getImmediateChild(p),b=eS(t,y,m);l=uh(t,l,new be(p),b,i,s,o,a)}}),u.children.inorderTraversal((p,m)=>{let y=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!f.hasChild(p)&&!y){let b=e.serverCache.getNode().getImmediateChild(p),N=eS(t,b,m);l=uh(t,l,new be(p),N,i,s,o,a)}}),l}function Hj(t,e,n,r,i,s,o){if(lh(i,n)!=null)return e;let a=e.serverCache.isFiltered(),l=e.serverCache;if(r.value!=null){if(de(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return uh(t,e,n,l.getNode().getChild(n),i,s,a,o);if(de(n)){let u=new xt(null);return l.getNode().forEachChild(io,(f,p)=>{u=u.set(new be(f),p)}),hy(t,e,n,u,i,s,a,o)}else return e}else{let u=new xt(null);return r.foreach((f,p)=>{let m=je(n,f);l.isCompleteForPath(m)&&(u=u.set(f,l.getNode().getChild(m)))}),hy(t,e,n,u,i,s,a,o)}}function zj(t,e,n,r,i){let s=e.serverCache,o=LS(e,s.getNode(),s.isFullyInitialized()||de(n),s.isFiltered());return zS(t,o,n,r,HS,i)}function Wj(t,e,n,r,i,s){let o;if(lh(r,n)!=null)return e;{let a=new dc(r,e,i),l=e.eventCache.getNode(),u;if(de(n)||oe(n)===".priority"){let f;if(e.serverCache.isFullyInitialized())f=ch(r,Bi(e));else{let p=e.serverCache.getNode();M(p instanceof J,"serverChildren would be complete if leaf node"),f=Fy(r,p)}f=f,u=t.filter.updateFullNode(l,f,s)}else{let f=oe(n),p=Ly(r,f,e.serverCache);p==null&&e.serverCache.isCompleteForChild(f)&&(p=l.getImmediateChild(f)),p!=null?u=t.filter.updateChild(l,f,p,Ne(n),a,s):e.eventCache.getNode().hasChild(f)?u=t.filter.updateChild(l,f,J.EMPTY_NODE,Ne(n),a,s):u=l,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=ch(r,Bi(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||lh(r,we())!=null,rc(e,u,o,t.filter.filtersNodes())}}var fy=class{constructor(e,n){this.query_=e,this.eventRegistrations_=[];let r=this.query_._queryParams,i=new lc(r.getIndex()),s=mj(r);this.processor_=Vj(s);let o=n.serverCache,a=n.eventCache,l=i.updateFullNode(J.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(J.EMPTY_NODE,a.getNode(),null),f=new $n(l,o.isFullyInitialized(),i.filtersNodes()),p=new $n(u,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=wh(p,f),this.eventGenerator_=new sy(this.query_)}get query(){return this.query_}};function qj(t){return t.viewCache_.serverCache.getNode()}function Gj(t){return ah(t.viewCache_)}function Kj(t,e){let n=Bi(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!de(e)&&!n.getImmediateChild(oe(e)).isEmpty())?n.getChild(e):null}function tS(t){return t.eventRegistrations_.length===0}function Qj(t,e){t.eventRegistrations_.push(e)}function nS(t,e,n){let r=[];if(n){M(e==null,"A cancel should cancel all event registrations.");let i=t.query._path;t.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){let o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function rS(t,e,n,r){e.type===jn.MERGE&&e.source.queryId!==null&&(M(Bi(t.viewCache_),"We should always have a full cache before handling merges"),M(ah(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=Bj(t.processor_,i,e,n,r);return Uj(t.processor_,s.viewCache),M(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,WS(t,s.changes,s.viewCache.eventCache.getNode(),null)}function Yj(t,e){let n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild($e,(s,o)=>{r.push(lo(s,o))}),n.isFullyInitialized()&&r.push(kS(n.getNode())),WS(t,r,n.getNode(),e)}function WS(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return wj(t.eventGenerator_,e,n,i)}var dh,hh=class{constructor(){this.views=new Map}};function Jj(t){M(!dh,"__referenceConstructor has already been defined"),dh=t}function Zj(){return M(dh,"Reference.ts has not been loaded"),dh}function Xj(t){return t.views.size===0}function Vy(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return M(s!=null,"SyncTree gave us an op for an invalid query."),rS(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(rS(o,e,n,r));return s}}function qS(t,e,n,r,i){let s=e._queryIdentifier,o=t.views.get(s);if(!o){let a=ch(n,i?r:null),l=!1;a?l=!0:r instanceof J?(a=Fy(n,r),l=!1):(a=J.EMPTY_NODE,l=!1);let u=wh(new $n(a,l,!1),new $n(r,i,!1));return new fy(e,u)}return o}function e$(t,e,n,r,i,s){let o=qS(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),Qj(o,n),Yj(o,n)}function t$(t,e,n,r){let i=e._queryIdentifier,s=[],o=[],a=Zr(t);if(i==="default")for(let[l,u]of t.views.entries())o=o.concat(nS(u,n,r)),tS(u)&&(t.views.delete(l),u.query._queryParams.loadsAllData()||s.push(u.query));else{let l=t.views.get(i);l&&(o=o.concat(nS(l,n,r)),tS(l)&&(t.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Zr(t)&&s.push(new(Zj())(e._repo,e._path)),{removed:s,events:o}}function GS(t){let e=[];for(let n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function Yr(t,e){let n=null;for(let r of t.views.values())n=n||Kj(r,e);return n}function KS(t,e){if(e._queryParams.loadsAllData())return Ih(t);{let r=e._queryIdentifier;return t.views.get(r)}}function QS(t,e){return KS(t,e)!=null}function Zr(t){return Ih(t)!=null}function Ih(t){for(let e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}var fh;function n$(t){M(!fh,"__referenceConstructor has already been defined"),fh=t}function r$(){return M(fh,"Reference.ts has not been loaded"),fh}var i$=1,ph=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new xt(null),this.pendingWriteTree_=Fj(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function YS(t,e,n,r,i){return Cj(t.pendingWriteTree_,e,n,r,i),i?go(t,new uo(Py(),e,n)):[]}function s$(t,e,n,r){Tj(t.pendingWriteTree_,e,n,r);let i=xt.fromObject(n);return go(t,new uc(Py(),e,i))}function Kr(t,e,n=!1){let r=Dj(t.pendingWriteTree_,e);if(Sj(t.pendingWriteTree_,e)){let s=new xt(null);return r.snap!=null?s=s.set(we(),!0):dt(r.children,o=>{s=s.set(new be(o),!0)}),go(t,new iy(r.path,s,n))}else return[]}function yc(t,e,n){return go(t,new uo(Oy(),e,n))}function o$(t,e,n){let r=xt.fromObject(n);return go(t,new uc(Oy(),e,r))}function a$(t,e){return go(t,new oh(Oy(),e))}function c$(t,e,n){let r=By(t,n);if(r){let i=jy(r),s=i.path,o=i.queryId,a=St(s,e),l=new oh(ky(o),a);return $y(t,s,l)}else return[]}function gh(t,e,n,r,i=!1){let s=e._path,o=t.syncPointTree_.get(s),a=[];if(o&&(e._queryIdentifier==="default"||QS(o,e))){let l=t$(o,e,n,r);Xj(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));let u=l.removed;if(a=l.events,!i){let f=u.findIndex(m=>m._queryParams.loadsAllData())!==-1,p=t.syncPointTree_.findOnPath(s,(m,y)=>Zr(y));if(f&&!p){let m=t.syncPointTree_.subtree(s);if(!m.isEmpty()){let y=d$(m);for(let b=0;b<y.length;++b){let N=y[b],P=N.query,B=eA(t,N);t.listenProvider_.startListening(sc(P),hc(t,P),B.hashFn,B.onComplete)}}}!p&&u.length>0&&!r&&(f?t.listenProvider_.stopListening(sc(e),null):u.forEach(m=>{let y=t.queryToTagMap.get(bh(m));t.listenProvider_.stopListening(sc(m),y)}))}h$(t,u)}return a}function JS(t,e,n,r){let i=By(t,r);if(i!=null){let s=jy(i),o=s.path,a=s.queryId,l=St(o,e),u=new uo(ky(a),l,n);return $y(t,o,u)}else return[]}function l$(t,e,n,r){let i=By(t,r);if(i){let s=jy(i),o=s.path,a=s.queryId,l=St(o,e),u=xt.fromObject(n),f=new uc(ky(a),l,u);return $y(t,o,f)}else return[]}function py(t,e,n,r=!1){let i=e._path,s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(m,y)=>{let b=St(m,i);s=s||Yr(y,b),o=o||Zr(y)});let a=t.syncPointTree_.get(i);a?(o=o||Zr(a),s=s||Yr(a,we())):(a=new hh,t.syncPointTree_=t.syncPointTree_.set(i,a));let l;s!=null?l=!0:(l=!1,s=J.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,b)=>{let N=Yr(b,we());N&&(s=s.updateImmediateChild(y,N))}));let u=QS(a,e);if(!u&&!e._queryParams.loadsAllData()){let m=bh(e);M(!t.queryToTagMap.has(m),"View does not exist, but we have a tag");let y=f$();t.queryToTagMap.set(m,y),t.tagToQueryMap.set(y,m)}let f=Eh(t.pendingWriteTree_,i),p=e$(a,e,n,f,s,l);if(!u&&!o&&!r){let m=KS(a,e);p=p.concat(p$(t,e,m))}return p}function Uy(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let l=St(o,e),u=Yr(a,l);if(u)return u});return BS(i,e,s,n,!0)}function u$(t,e){let n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(u,f)=>{let p=St(u,n);r=r||Yr(f,p)});let i=t.syncPointTree_.get(n);i?r=r||Yr(i,we()):(i=new hh,t.syncPointTree_=t.syncPointTree_.set(n,i));let s=r!=null,o=s?new $n(r,!0,!1):null,a=Eh(t.pendingWriteTree_,e._path),l=qS(i,e,a,s?o.getNode():J.EMPTY_NODE,s);return Gj(l)}function go(t,e){return ZS(e,t.syncPointTree_,null,Eh(t.pendingWriteTree_,we()))}function ZS(t,e,n,r){if(de(t.path))return XS(t,e,n,r);{let i=e.get(we());n==null&&i!=null&&(n=Yr(i,we()));let s=[],o=oe(t.path),a=t.operationForChild(o),l=e.children.get(o);if(l&&a){let u=n?n.getImmediateChild(o):null,f=jS(r,o);s=s.concat(ZS(a,l,u,f))}return i&&(s=s.concat(Vy(i,t,r,n))),s}}function XS(t,e,n,r){let i=e.get(we());n==null&&i!=null&&(n=Yr(i,we()));let s=[];return e.children.inorderTraversal((o,a)=>{let l=n?n.getImmediateChild(o):null,u=jS(r,o),f=t.operationForChild(o);f&&(s=s.concat(XS(f,a,l,u)))}),i&&(s=s.concat(Vy(i,t,r,n))),s}function eA(t,e){let n=e.query,r=hc(t,n);return{hashFn:()=>(qj(e)||J.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?c$(t,n._path,r):a$(t,n._path);{let s=DB(i,n);return gh(t,n,null,s)}}}}function hc(t,e){let n=bh(e);return t.queryToTagMap.get(n)}function bh(t){return t._path.toString()+"$"+t._queryIdentifier}function By(t,e){return t.tagToQueryMap.get(e)}function jy(t){let e=t.indexOf("$");return M(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new be(t.substr(0,e))}}function $y(t,e,n){let r=t.syncPointTree_.get(e);M(r,"Missing sync point for query tag that we're tracking");let i=Eh(t.pendingWriteTree_,e);return Vy(r,n,i,null)}function d$(t){return t.fold((e,n,r)=>{if(n&&Zr(n))return[Ih(n)];{let i=[];return n&&(i=GS(n)),dt(r,(s,o)=>{i=i.concat(o)}),i}})}function sc(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(r$())(t._repo,t._path):t}function h$(t,e){for(let n=0;n<e.length;++n){let r=e[n];if(!r._queryParams.loadsAllData()){let i=bh(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function f$(){return i$++}function p$(t,e,n){let r=e._path,i=hc(t,e),s=eA(t,n),o=t.listenProvider_.startListening(sc(e),i,s.hashFn,s.onComplete),a=t.syncPointTree_.subtree(r);if(i)M(!Zr(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((u,f,p)=>{if(!de(u)&&f&&Zr(f))return[Ih(f).query];{let m=[];return f&&(m=m.concat(GS(f).map(y=>y.query))),dt(p,(y,b)=>{m=m.concat(b)}),m}});for(let u=0;u<l.length;++u){let f=l[u];t.listenProvider_.stopListening(sc(f),hc(t,f))}}return o}var gy=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},my=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=je(this.path_,e);return new t(this.syncTree_,n)}node(){return Uy(this.syncTree_,this.path_)}},g$=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},iS=function(t,e,n){if(!t||typeof t!="object")return t;if(M(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return m$(t[".sv"],e,n);if(typeof t[".sv"]=="object")return _$(t[".sv"],e);M(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},m$=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:M(!1,"Unexpected server value: "+t)}},_$=function(t,e,n){t.hasOwnProperty("increment")||M(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&M(!1,"Unexpected increment value: "+r);let i=e.node();if(M(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},tA=function(t,e,n,r){return Hy(e,new my(n,t),r)},nA=function(t,e,n){return Hy(t,new gy(e),n)};function Hy(t,e,n){let r=t.getPriority().val(),i=iS(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=iS(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new ao(a,st(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ao(i))),o.forEachChild($e,(a,l)=>{let u=Hy(l,e.getImmediateChild(a),n);u!==l&&(s=s.updateImmediateChild(a,u))}),s}}var fc=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function zy(t,e){let n=e instanceof be?e:new be(e),r=t,i=oe(n);for(;i!==null;){let s=ki(r.node.children,i)||{children:{},childCount:0};r=new fc(i,r,s),n=Ne(n),i=oe(n)}return r}function mo(t){return t.node.value}function rA(t,e){t.node.value=e,_y(t)}function iA(t){return t.node.childCount>0}function y$(t){return mo(t)===void 0&&!iA(t)}function Ch(t,e){dt(t.node.children,(n,r)=>{e(new fc(n,t,r))})}function sA(t,e,n,r){n&&!r&&e(t),Ch(t,i=>{sA(i,e,!0,r)}),n&&r&&e(t)}function v$(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function vc(t){return new be(t.parent===null?t.name:vc(t.parent)+"/"+t.name)}function _y(t){t.parent!==null&&w$(t.parent,t.name,t)}function w$(t,e,n){let r=y$(n),i=bn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,_y(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,_y(t))}var E$=/[\[\].#$\/\u0000-\u001F\u007F]/,I$=/[\[\].#$\u0000-\u001F\u007F]/,A_=10*1024*1024,Wy=function(t){return typeof t=="string"&&t.length!==0&&!E$.test(t)},oA=function(t){return typeof t=="string"&&t.length!==0&&!I$.test(t)},b$=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),oA(t)},C$=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!Dy(t)||t&&typeof t=="object"&&bn(t,".sv")},aA=function(t,e,n,r){r&&e===void 0||Th(Ka(t,"value"),e,n)},Th=function(t,e,n){let r=n instanceof be?new $_(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Fi(r));if(typeof e=="function")throw new Error(t+"contains a function "+Fi(r)+" with contents = "+e.toString());if(Dy(e))throw new Error(t+"contains "+e.toString()+" "+Fi(r));if(typeof e=="string"&&e.length>A_/3&&Qa(e)>A_)throw new Error(t+"contains a string greater than "+A_+" utf8 bytes "+Fi(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(dt(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Wy(o)))throw new Error(t+" contains an invalid key ("+o+") "+Fi(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);nj(r,o),Th(t,a,r),rj(r)}),i&&s)throw new Error(t+' contains ".value" child '+Fi(r)+" in addition to actual children.")}},T$=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];let s=oc(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Wy(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(tj);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&sn(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},D$=function(t,e,n,r){if(r&&e===void 0)return;let i=Ka(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");let s=[];dt(e,(o,a)=>{let l=new be(o);if(Th(i,a,je(n,l)),xy(l)===".priority"&&!C$(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),T$(i,s)};var cA=function(t,e,n,r){if(!(r&&n===void 0)&&!oA(n))throw new Error(Ka(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},S$=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),cA(t,e,n,r)},qy=function(t,e){if(oe(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},A$=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Wy(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!b$(n))throw new Error(Ka(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var yy=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Dh(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Ry(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function lA(t,e,n){Dh(t,n),uA(t,r=>Ry(r,e))}function an(t,e,n){Dh(t,n),uA(t,r=>sn(r,e)||sn(e,r))}function uA(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(x$(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function x$(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();Vi&&ut("event: "+n.toString()),po(r)}}}var R$="repo_interrupt",N$=25,vy=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yy,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=sh(),this.transactionQueueTree_=new fc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function M$(t,e,n){if(t.stats_=Ay(t.repoInfo_),t.forceRestClient_||RB())t.server_=new X_(t.repoInfo_,(r,i,s,o)=>{sS(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>oS(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{et(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Ny(t.repoInfo_,e,(r,i,s,o)=>{sS(t,r,i,s,o)},r=>{oS(t,r)},r=>{P$(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=MB(t.repoInfo_,()=>new ry(t.stats_,t.server_)),t.infoData_=new ey,t.infoSyncTree_=new ph({startListening:(r,i,s,o)=>{let a=[],l=t.infoData_.getNode(r._path);return l.isEmpty()||(a=yc(t.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),Gy(t,"connected",!1),t.serverSyncTree_=new ph({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,l)=>{let u=o(a,l);an(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function dA(t){let n=t.infoData_.getNode(new be(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Sh(t){return g$({timestamp:dA(t)})}function sS(t,e,n,r,i){t.dataUpdateCount++;let s=new be(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let l=Ga(n,u=>st(u));o=l$(t.serverSyncTree_,s,l,i)}else{let l=st(n);o=JS(t.serverSyncTree_,s,l,i)}else if(r){let l=Ga(n,u=>st(u));o=o$(t.serverSyncTree_,s,l)}else{let l=st(n);o=yc(t.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=fo(t,s)),an(t.eventQueue_,a,o)}function oS(t,e){Gy(t,"connected",e),e===!1&&L$(t)}function P$(t,e){dt(e,(n,r)=>{Gy(t,n,r)})}function Gy(t,e,n){let r=new be("/.info/"+e),i=st(n);t.infoData_.updateSnapshot(r,i);let s=yc(t.infoSyncTree_,r,i);an(t.eventQueue_,r,s)}function Ky(t){return t.nextWriteId_++}function O$(t,e,n){let r=u$(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{let s=st(i).withIndex(e._queryParams.getIndex());py(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=yc(t.serverSyncTree_,e._path,s);else{let a=hc(t.serverSyncTree_,e);o=JS(t.serverSyncTree_,e._path,s,a)}return an(t.eventQueue_,e._path,o),gh(t.serverSyncTree_,e,n,null,!0),s},i=>(wc(t,"get for query "+et(e)+" failed: "+i),Promise.reject(new Error(i))))}function k$(t,e,n,r,i){wc(t,"set",{path:e.toString(),value:n,priority:r});let s=Sh(t),o=st(n,r),a=Uy(t.serverSyncTree_,e),l=nA(o,a,s),u=Ky(t),f=YS(t.serverSyncTree_,e,l,u,!0);Dh(t.eventQueue_,f),t.server_.put(e.toString(),o.val(!0),(m,y)=>{let b=m==="ok";b||At("set at "+e+" failed: "+m);let N=Kr(t.serverSyncTree_,u,!b);an(t.eventQueue_,e,N),wy(t,i,m,y)});let p=Yy(t,e);fo(t,p),an(t.eventQueue_,p,[])}function F$(t,e,n,r){wc(t,"update",{path:e.toString(),value:n});let i=!0,s=Sh(t),o={};if(dt(n,(a,l)=>{i=!1,o[a]=tA(je(e,a),st(l),t.serverSyncTree_,s)}),i)ut("update() called with empty data.  Don't do anything."),wy(t,r,"ok",void 0);else{let a=Ky(t),l=s$(t.serverSyncTree_,e,o,a);Dh(t.eventQueue_,l),t.server_.merge(e.toString(),n,(u,f)=>{let p=u==="ok";p||At("update at "+e+" failed: "+u);let m=Kr(t.serverSyncTree_,a,!p),y=m.length>0?fo(t,e):e;an(t.eventQueue_,y,m),wy(t,r,u,f)}),dt(n,u=>{let f=Yy(t,je(e,u));fo(t,f)}),an(t.eventQueue_,e,[])}}function L$(t){wc(t,"onDisconnectEvents");let e=Sh(t),n=sh();ty(t.onDisconnect_,we(),(i,s)=>{let o=tA(i,s,t.serverSyncTree_,e);FS(n,i,o)});let r=[];ty(n,we(),(i,s)=>{r=r.concat(yc(t.serverSyncTree_,i,s));let o=Yy(t,i);fo(t,o)}),t.onDisconnect_=sh(),an(t.eventQueue_,we(),r)}function V$(t,e,n){let r;oe(e._path)===".info"?r=py(t.infoSyncTree_,e,n):r=py(t.serverSyncTree_,e,n),lA(t.eventQueue_,e._path,r)}function aS(t,e,n){let r;oe(e._path)===".info"?r=gh(t.infoSyncTree_,e,n):r=gh(t.serverSyncTree_,e,n),lA(t.eventQueue_,e._path,r)}function U$(t){t.persistentConnection_&&t.persistentConnection_.interrupt(R$)}function wc(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),ut(n,...e)}function wy(t,e,n,r){e&&po(()=>{if(n==="ok")e(null);else{let i=(n||"error").toUpperCase(),s=i;r&&(s+=": "+r);let o=new Error(s);o.code=i,e(o)}})}function hA(t,e,n){return Uy(t.serverSyncTree_,e,n)||J.EMPTY_NODE}function Qy(t,e=t.transactionQueueTree_){if(e||Ah(t,e),mo(e)){let n=pA(t,e);M(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&B$(t,vc(e),n)}else iA(e)&&Ch(e,n=>{Qy(t,n)})}function B$(t,e,n){let r=n.map(u=>u.currentWriteId),i=hA(t,e,r),s=i,o=i.hash();for(let u=0;u<n.length;u++){let f=n[u];M(f.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),f.status=1,f.retryCount++;let p=St(e,f.path);s=s.updateChild(p,f.currentOutputSnapshotRaw)}let a=s.val(!0),l=e;t.server_.put(l.toString(),a,u=>{wc(t,"transaction put response",{path:l.toString(),status:u});let f=[];if(u==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,f=f.concat(Kr(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Ah(t,zy(t.transactionQueueTree_,e)),Qy(t,t.transactionQueueTree_),an(t.eventQueue_,e,f);for(let m=0;m<p.length;m++)po(p[m])}else{if(u==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{At("transaction at "+l.toString()+" failed: "+u);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=u}fo(t,e)}},o)}function fo(t,e){let n=fA(t,e),r=vc(n),i=pA(t,n);return j$(t,i,r),r}function j$(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let l=e[a],u=St(n,l.path),f=!1,p;if(M(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)f=!0,p=l.abortReason,i=i.concat(Kr(t.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=N$)f=!0,p="maxretry",i=i.concat(Kr(t.serverSyncTree_,l.currentWriteId,!0));else{let m=hA(t,l.path,o);l.currentInputSnapshot=m;let y=e[a].update(m.val());if(y!==void 0){Th("transaction failed: Data returned ",y,l.path);let b=st(y);typeof y=="object"&&y!=null&&bn(y,".priority")||(b=b.updatePriority(m.getPriority()));let P=l.currentWriteId,B=Sh(t),Z=nA(b,m,B);l.currentOutputSnapshotRaw=b,l.currentOutputSnapshotResolved=Z,l.currentWriteId=Ky(t),o.splice(o.indexOf(P),1),i=i.concat(YS(t.serverSyncTree_,l.path,Z,l.currentWriteId,l.applyLocally)),i=i.concat(Kr(t.serverSyncTree_,P,!0))}else f=!0,p="nodata",i=i.concat(Kr(t.serverSyncTree_,l.currentWriteId,!0))}an(t.eventQueue_,n,i),i=[],f&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Ah(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)po(r[a]);Qy(t,t.transactionQueueTree_)}function fA(t,e){let n,r=t.transactionQueueTree_;for(n=oe(e);n!==null&&mo(r)===void 0;)r=zy(r,n),e=Ne(e),n=oe(e);return r}function pA(t,e){let n=[];return gA(t,e,n),n.sort((r,i)=>r.order-i.order),n}function gA(t,e,n){let r=mo(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ch(e,i=>{gA(t,i,n)})}function Ah(t,e){let n=mo(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,rA(e,n.length>0?n:void 0)}Ch(e,r=>{Ah(t,r)})}function Yy(t,e){let n=vc(fA(t,e)),r=zy(t.transactionQueueTree_,e);return v$(r,i=>{x_(t,i)}),x_(t,r),sA(r,i=>{x_(t,i)}),n}function x_(t,e){let n=mo(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(M(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(M(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Kr(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?rA(e,void 0):n.length=s+1,an(t.eventQueue_,vc(e),i);for(let o=0;o<r.length;o++)po(r[o])}}function $$(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function H$(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):At(`Invalid query segment '${n}' in query '${t}'`)}return e}var cS=function(t,e){let n=z$(t),r=n.namespace;n.domain==="firebase.com"&&_r(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&_r("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||EB();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new Jd(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new be(n.pathString)}},z$=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",l=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(a=t.substring(0,u-1),t=t.substring(u+2));let f=t.indexOf("/");f===-1&&(f=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(f,p)),f<p&&(i=$$(t.substring(f,p)));let m=H$(t.substring(Math.min(t.length,p)));u=e.indexOf(":"),u>=0?(o=a==="https"||a==="wss",l=parseInt(e.substring(u+1),10)):u=e.length;let y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{let b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:l,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var lS="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",W$=function(){let t=0,e=[];return function(n){let r=n===t;t=n;let i,s=new Array(8);for(i=7;i>=0;i--)s[i]=lS.charAt(n%64),n=Math.floor(n/64);M(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=lS.charAt(e[i]);return M(o.length===20,"nextPushId: Length should be 20."),o}}();var mh=class{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){let e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+et(this.snapshot.exportVal())}},_h=class{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var yh=class{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return M(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}};var Ey=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return de(this._path)?null:xy(this._path)}get ref(){return new Hn(this._repo,this._path)}get _queryIdentifier(){let e=KD(this._queryParams),n=Sy(e);return n==="{}"?"default":n}get _queryObject(){return KD(this._queryParams)}isEqual(e){if(e=Gr(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Ry(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+ej(this._path)}};var Hn=class t extends Ey{constructor(e,n){super(e,n,new Z_,!1)}get parent(){let e=xS(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}},pc=class t{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){let n=new be(e),r=ji(this.ref,e);return new t(this._node.getChild(n),r,$e)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new t(i,ji(this.ref,r),$e)))}hasChild(e){let n=new be(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function xh(t,e){return t=Gr(t),t._checkNotDeleted("ref"),e!==void 0?ji(t._root,e):t._root}function ji(t,e){return t=Gr(t),oe(t._path)===null?S$("child","path",e,!1):cA("child","path",e,!1),new Hn(t._repo,je(t._path,e))}function mA(t,e){t=Gr(t),qy("push",t._path),aA("push",e,t._path,!0);let n=dA(t._repo),r=W$(n),i=ji(t,r),s=ji(t,r),o;return e!=null?o=Rh(s,e).then(()=>s):o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function _A(t){return qy("remove",t._path),Rh(t,null)}function Rh(t,e){t=Gr(t),qy("set",t._path),aA("set",e,t._path,!1);let n=new qr;return k$(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function yA(t,e){D$("update",e,t._path,!1);let n=new qr;return F$(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function Jy(t){t=Gr(t);let e=new yh(()=>{}),n=new vh(e);return O$(t._repo,t,n).then(r=>new pc(r,new Hn(t._repo,t._path),t._queryParams.getIndex()))}var vh=class t{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){let r=n._queryParams.getIndex();return new mh("value",this,new pc(e.snapshotNode,new Hn(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _h(this,e,n):null}matches(e){return e instanceof t?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Iy=class t{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new _h(this,e,n):null}createEvent(e,n){M(e.childName!=null,"Child events should have a childName.");let r=ji(new Hn(n._repo,n._path),e.childName),i=n._queryParams.getIndex();return new mh(e.type,this,new pc(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof t?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function q$(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){let l=n,u=(f,p)=>{aS(t._repo,t,a),l(f,p)};u.userCallback=n.userCallback,u.context=n.context,n=u}let o=new yh(n,s||void 0),a=e==="value"?new vh(o):new Iy(e,o);return V$(t._repo,t,a),()=>aS(t._repo,t,a)}function vA(t,e,n,r){return q$(t,"value",e,n,r)}Jj(Hn);n$(Hn);var G$="FIREBASE_DATABASE_EMULATOR_HOST",by={},K$=!1;function Q$(t,e,n,r){t.repoInfo_=new Jd(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function Y$(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||_r("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ut("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cS(s,i),a=o.repoInfo,l,u;typeof process<"u"&&process.env&&(u=process.env[G$]),u?(l=!0,s=`http://${u}?ns=${a.namespace}`,o=cS(s,i),a=o.repoInfo):l=!o.repoInfo.secure;let f=i&&l?new nc(nc.OWNER):new k_(t.name,t.options,e);A$("Invalid Firebase Database URL",o),de(o.path)||_r("Database URL must point to the root of a Firebase Database (not including a child path).");let p=Z$(a,t,f,new O_(t.name,n));return new Cy(p,t)}function J$(t,e){let n=by[e];(!n||n[t.key]!==t)&&_r(`Database ${e}(${t.repoInfo_}) has already been deleted.`),U$(t),delete n[t.key]}function Z$(t,e,n,r){let i=by[e.name];i||(i={},by[e.name]=i);let s=i[t.toURLString()];return s&&_r("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new vy(t,K$,n,r),i[t.toURLString()]=s,s}var Cy=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(M$(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Hn(this._repo,we())),this._rootInternal}_delete(){return this._rootInternal!==null&&(J$(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&_r("Cannot call "+e+" on a deleted database.")}};function Nh(t=$t(),e){let n=kt(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=bD("database");r&&wA(n,...r)}return n}function wA(t,e,n,r={}){t=Gr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&_r("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&_r('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new nc(nc.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:CD(r.mockUserToken,t.app.options.projectId);s=new nc(o)}Q$(i,e,n,s)}function X$(t){yB(jt),Ke(new Gd("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return Y$(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Y(ND,MD,t),Y(ND,MD,"esm2017")}Ny.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Ny.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};X$();var zi=class{constructor(e){return e}},EA="database",Zy=class{constructor(){return vn(EA)}};var Xy=new U("angularfire2.database-instances");function eH(t,e){let n=mr(EA,t,e);return n&&new zi(n)}function tH(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new zi(r)}}var nH={provide:Zy,deps:[[new Pe,Xy]]},rH={provide:zi,useFactory:eH,deps:[[new Pe,Xy],Ht]};function IA(t,...e){return Y("angularfire",rn.full,"rtdb"),Bt([rH,nH,{provide:Xy,useFactory:tH(t),multi:!0,deps:[ve,ot,wn,En,[new Pe,Wr],[new Pe,gr],...e]}])}var bA=Be(Nh,!0);var CA=Be(vA,!0);var TA=Be(mA,!0);var _o=Be(xh,!0);var DA=Be(_A,!0);var ev=Be(Rh,!0);var SA=Be(yA,!0);var xA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},sH=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},RA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):sH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new tv;let m=s<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},tv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},oH=function(t){let e=xA(t);return RA.encodeByteArray(e,!0)},AA=function(t){return oH(t).replace(/\./g,"")},aH=function(t){try{return RA.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function cH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var lH=()=>cH().__FIREBASE_DEFAULTS__,uH=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&aH(t[1]);return e&&JSON.parse(e)},hH=()=>{try{return lH()||uH()||dH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},fH=t=>{var e,n;return(n=(e=hH())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},NA=t=>{let e=fH(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]};function MA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[AA(JSON.stringify(n)),AA(JSON.stringify(o)),""].join(".")}var pH="FirebaseError",Ec=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=pH,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,nv.prototype.create)}},nv=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?gH(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ec(i,a,r)}};function gH(t,e){return t.replace(mH,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var mH=/\{\$([^}]+)}/g;var jZ=4*60*60*1e3;function Ic(t){return t&&t._delegate?t._delegate:t}var Mh=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var UA="firebasestorage.googleapis.com",BA="storageBucket",_H=2*60*1e3,yH=10*60*1e3;var He=class t extends Ec{constructor(e,n,r=0){super(rv(e),`Firebase Storage: ${n} (${rv(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}},Qe=function(t){return t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment",t}(Qe||{});function rv(t){return"storage/"+t}function lv(){let t="An unknown error occurred, please check the error payload for server response.";return new He(Qe.UNKNOWN,t)}function vH(t){return new He(Qe.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function wH(t){return new He(Qe.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function EH(){let t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new He(Qe.UNAUTHENTICATED,t)}function IH(){return new He(Qe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bH(t){return new He(Qe.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function CH(){return new He(Qe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TH(){return new He(Qe.CANCELED,"User canceled the upload/download.")}function DH(t){return new He(Qe.INVALID_URL,"Invalid URL '"+t+"'.")}function SH(t){return new He(Qe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function AH(){return new He(Qe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+BA+"' property when initializing the app?")}function xH(){return new He(Qe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function RH(){return new He(Qe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function NH(t){return new He(Qe.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function iv(t){return new He(Qe.INVALID_ARGUMENT,t)}function jA(){return new He(Qe.APP_DELETED,"The Firebase app was deleted.")}function MH(t){return new He(Qe.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cc(t,e){return new He(Qe.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bc(t){throw new He(Qe.INTERNAL_ERROR,"Internal error: "+t)}var Dn=class t{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){let e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=t.makeFromUrl(e,n)}catch{return new t(e,"")}if(r.path==="")return r;throw SH(e)}static makeFromUrl(e,n){let r=null,i="([A-Za-z0-9.\\-_]+)";function s(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}let o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(ee){ee.path_=decodeURIComponent(ee.path)}let f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${p}/${f}/b/${i}/o${m}`,"i"),b={bucket:1,path:3},N=n===UA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",B=new RegExp(`^https?://${N}/${i}/${P}`,"i"),z=[{regex:a,indices:l,postModify:s},{regex:y,indices:b,postModify:u},{regex:B,indices:{bucket:1,path:2},postModify:u}];for(let ee=0;ee<z.length;ee++){let tt=z[ee],_e=tt.regex.exec(e);if(_e){let I=_e[tt.indices.bucket],_=_e[tt.indices.path];_||(_=""),r=new t(I,_),tt.postModify(r);break}}if(r==null)throw DH(e);return r}},sv=class{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}};function PH(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function f(...P){u||(u=!0,e.apply(null,P))}function p(P){i=setTimeout(()=>{i=null,t(y,l())},P)}function m(){s&&clearTimeout(s)}function y(P,...B){if(u){m();return}if(P){m(),f.call(null,P,...B);return}if(l()||o){m(),f.call(null,P,...B);return}r<64&&(r*=2);let z;a===1?(a=2,z=0):z=(r+Math.random())*1e3,p(z)}let b=!1;function N(P){b||(b=!0,m(),!u&&(i!==null?(P||(a=2),clearTimeout(i),p(0)):P||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,N(!0)},n),N}function OH(t){t(!1)}function kH(t){return t!==void 0}function FH(t){return typeof t=="object"&&!Array.isArray(t)}function uv(t){return typeof t=="string"||t instanceof String}function PA(t){return dv()&&t instanceof Blob}function dv(){return typeof Blob<"u"}function OA(t,e,n,r){if(r<e)throw iv(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw iv(`Invalid value for '${t}'. Expected ${n} or less.`)}function hv(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function $A(t){let e=encodeURIComponent,n="?";for(let r in t)if(t.hasOwnProperty(r)){let i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var vo=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}(vo||{});function LH(t,e){let n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}var ov=class{constructor(e,n,r,i,s,o,a,l,u,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,b)=>{this.resolve_=y,this.reject_=b,this.start_()})}start_(){let e=(r,i)=>{if(i){r(!1,new yo(!1,null,!0));return}let s=this.connectionFactory_();this.pendingConnection_=s;let o=a=>{let l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;let a=s.getErrorCode()===vo.NO_ERROR,l=s.getStatus();if(!a||LH(l,this.additionalRetryCodes_)&&this.retry){let f=s.getErrorCode()===vo.ABORT;r(!1,new yo(!1,null,f));return}let u=this.successCodes_.indexOf(l)!==-1;r(!0,new yo(u,s))})},n=(r,i)=>{let s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{let l=this.callback_(a,a.getResponse());kH(l)?s(l):s()}catch(l){o(l)}else if(a!==null){let l=lv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){let l=this.appDelete_?jA():TH();o(l)}else{let l=CH();o(l)}};this.canceled_?n(!1,new yo(!1,null,!0)):this.backoffId_=PH(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OH(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}},yo=class{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}};function VH(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function UH(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BH(t,e){e&&(t["X-Firebase-GMPID"]=e)}function jH(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function $H(t,e,n,r,i,s,o=!0){let a=$A(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return BH(u,e),VH(u,n),UH(u,s),jH(u,r),new ov(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}function HH(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function zH(...t){let e=HH();if(e!==void 0){let n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(dv())return new Blob(t);throw new He(Qe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function WH(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function qH(t){if(typeof atob>"u")throw NH("base-64");return atob(t)}var zn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Tc=class{constructor(e,n){this.data=e,this.contentType=n||null}};function GH(t,e){switch(t){case zn.RAW:return new Tc(HA(e));case zn.BASE64:case zn.BASE64URL:return new Tc(zA(t,e));case zn.DATA_URL:return new Tc(QH(e),YH(e))}throw lv()}function HA(t){let e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{let s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function KH(t){let e;try{e=decodeURIComponent(t)}catch{throw Cc(zn.DATA_URL,"Malformed data URL.")}return HA(e)}function zA(t,e){switch(t){case zn.BASE64:{let i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Cc(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case zn.BASE64URL:{let i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Cc(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=qH(e)}catch(i){throw i.message.includes("polyfill")?i:Cc(t,"Invalid character found")}let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}var Oh=class{constructor(e){this.base64=!1,this.contentType=null;let n=e.match(/^data:([^,]+)?,/);if(n===null)throw Cc(zn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");let r=n[1]||null;r!=null&&(this.base64=JH(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}};function QH(t){let e=new Oh(t);return e.base64?zA(zn.BASE64,e.rest):KH(e.rest)}function YH(t){return new Oh(t).contentType}function JH(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}var kh=class t{constructor(e,n){let r=0,i="";PA(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(PA(this.data_)){let r=this.data_,i=WH(r,e,n);return i===null?null:new t(i)}else{let r=new Uint8Array(this.data_.buffer,e,n-e);return new t(r,!0)}}static getBlob(...e){if(dv()){let n=e.map(r=>r instanceof t?r.data_:r);return new t(zH.apply(null,n))}else{let n=e.map(o=>uv(o)?GH(zn.RAW,o).data:o.data_),r=0;n.forEach(o=>{r+=o.byteLength});let i=new Uint8Array(r),s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new t(i,!0)}}uploadData(){return this.data_}};function WA(t){let e;try{e=JSON.parse(t)}catch{return null}return FH(e)?e:null}function ZH(t){if(t.length===0)return null;let e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function XH(t,e){let n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function qA(t){let e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function e4(t,e){return e}var ht=class{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||e4}},Ph=null;function t4(t){return!uv(t)||t.length<2?t:qA(t)}function GA(){if(Ph)return Ph;let t=[];t.push(new ht("bucket")),t.push(new ht("generation")),t.push(new ht("metageneration")),t.push(new ht("name","fullPath",!0));function e(s,o){return t4(o)}let n=new ht("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}let i=new ht("size");return i.xform=r,t.push(i),t.push(new ht("timeCreated")),t.push(new ht("updated")),t.push(new ht("md5Hash",null,!0)),t.push(new ht("cacheControl",null,!0)),t.push(new ht("contentDisposition",null,!0)),t.push(new ht("contentEncoding",null,!0)),t.push(new ht("contentLanguage",null,!0)),t.push(new ht("contentType",null,!0)),t.push(new ht("metadata","customMetadata",!0)),Ph=t,Ph}function n4(t,e){function n(){let r=t.bucket,i=t.fullPath,s=new Dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function r4(t,e,n){let r={};r.type="file";let i=n.length;for(let s=0;s<i;s++){let o=n[s];r[o.local]=o.xform(r,e[o.server])}return n4(r,t),r}function KA(t,e,n){let r=WA(e);return r===null?null:r4(t,r,n)}function i4(t,e,n,r){let i=WA(e);if(i===null||!uv(i.downloadTokens))return null;let s=i.downloadTokens;if(s.length===0)return null;let o=encodeURIComponent;return s.split(",").map(u=>{let f=t.bucket,p=t.fullPath,m="/b/"+o(f)+"/o/"+o(p),y=hv(m,n,r),b=$A({alt:"media",token:u});return y+b})[0]}function s4(t,e){let n={},r=e.length;for(let i=0;i<r;i++){let s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}var Fh=class{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}};function QA(t){if(!t)throw lv()}function o4(t,e){function n(r,i){let s=KA(t,i,e);return QA(s!==null),s}return n}function a4(t,e){function n(r,i){let s=KA(t,i,e);return QA(s!==null),i4(s,i,t.host,t._protocol)}return n}function YA(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=IH():i=EH():n.getStatus()===402?i=wH(t.bucket):n.getStatus()===403?i=bH(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function c4(t){let e=YA(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=vH(t.path)),s.serverResponse=i.serverResponse,s}return n}function l4(t,e,n){let r=e.fullServerUrl(),i=hv(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new Fh(i,s,a4(t,n),o);return a.errorHandler=c4(e),a}function u4(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function d4(t,e,n){let r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=u4(null,e)),r}function h4(t,e,n,r,i){let s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let z="";for(let ee=0;ee<2;ee++)z=z+Math.random().toString().slice(2);return z}let l=a();o["Content-Type"]="multipart/related; boundary="+l;let u=d4(e,r,i),f=s4(u,n),p="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,m=`\r
--`+l+"--",y=kh.getBlob(p,r,m);if(y===null)throw xH();let b={name:u.fullPath},N=hv(s,t.host,t._protocol),P="POST",B=t.maxUploadRetryTime,Z=new Fh(N,P,o4(t,n),B);return Z.urlParams=b,Z.headers=o,Z.body=y.uploadData(),Z.errorHandler=YA(e),Z}var YZ=256*1024;var kA=null,av=class{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vo.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vo.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vo.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw bc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(let s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}},cv=class extends av{initXhr(){this.xhr_.responseType="text"}};function JA(){return kA?kA():new cv}var wo=class t{constructor(e,n){this._service=e,n instanceof Dn?this._location=n:this._location=Dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new t(e,n)}get root(){let e=new Dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qA(this._location.path)}get storage(){return this._service}get parent(){let e=ZH(this._location.path);if(e===null)return null;let n=new Dn(this._location.bucket,e);return new t(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MH(e)}};function f4(t,e,n){t._throwIfRoot("uploadBytes");let r=h4(t.storage,t._location,GA(),new kh(e,!0),n);return t.storage.makeRequestWithTokens(r,JA).then(i=>({metadata:i,ref:t}))}function p4(t){t._throwIfRoot("getDownloadURL");let e=l4(t.storage,t._location,GA());return t.storage.makeRequestWithTokens(e,JA).then(n=>{if(n===null)throw RH();return n})}function g4(t,e){let n=XH(t._location.path,e),r=new Dn(t._location.bucket,n);return new wo(t.storage,r)}function m4(t){return/^[A-Za-z]+:\/\//.test(t)}function _4(t,e){return new wo(t,e)}function ZA(t,e){if(t instanceof Dc){let n=t;if(n._bucket==null)throw AH();let r=new wo(n,n._bucket);return e!=null?ZA(r,e):r}else return e!==void 0?g4(t,e):t}function y4(t,e){if(e&&m4(e)){if(t instanceof Dc)return _4(t,e);throw iv("To use ref(service, url), the first argument must be a Storage instance.")}else return ZA(t,e)}function FA(t,e){let n=e?.[BA];return n==null?null:Dn.makeFromBucketSpec(n,t)}function v4(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";let{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:MA(i,t.app.options.projectId))}var Dc=class{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=UA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_H,this._maxUploadRetryTime=yH,this._requests=new Set,i!=null?this._bucket=Dn.makeFromBucketSpec(i,this._host):this._bucket=FA(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Dn.makeFromBucketSpec(this._url,e):this._bucket=FA(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){OA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){return A(this,null,function*(){if(this._overrideAuthToken)return this._overrideAuthToken;let e=this._authProvider.getImmediate({optional:!0});if(e){let n=yield e.getToken();if(n!==null)return n.accessToken}return null})}_getAppCheckToken(){return A(this,null,function*(){let e=this._appCheckProvider.getImmediate({optional:!0});return e?(yield e.getToken()).token:null})}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wo(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new sv(jA());{let o=$H(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){return A(this,null,function*(){let[r,i]=yield Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()})}},LA="@firebase/storage",VA="0.13.2";var XA="storage";function ex(t,e,n){return t=Ic(t),f4(t,e,n)}function tx(t){return t=Ic(t),p4(t)}function nx(t,e){return t=Ic(t),y4(t,e)}function rx(t=$t(),e){t=Ic(t);let r=kt(t,XA).getImmediate({identifier:e}),i=NA("storage");return i&&ix(r,...i),r}function ix(t,e,n,r={}){v4(t,e,n,r)}function w4(t,{instanceIdentifier:e}){let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new Dc(n,r,i,e,jt)}function E4(){Ke(new Mh(XA,w4,"PUBLIC").setMultipleInstances(!0)),Y(LA,VA,""),Y(LA,VA,"esm2017")}E4();var Wi=class{constructor(e){return e}},sx="storage",fv=class{constructor(){return vn(sx)}};var pv=new U("angularfire2.storage-instances");function I4(t,e){let n=mr(sx,t,e);return n&&new Wi(n)}function b4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Wi(r)}}var C4={provide:fv,deps:[[new Pe,pv]]},T4={provide:Wi,useFactory:I4,deps:[[new Pe,pv],Ht]};function ox(t,...e){return Y("angularfire",rn.full,"gcs"),Bt([T4,C4,{provide:pv,useFactory:b4(t),multi:!0,deps:[ve,ot,wn,En,[new Pe,Wr],[new Pe,gr],...e]}])}var ax=Be(tx,!0);var cx=Be(rx,!0);var lx=Be(nx,!0);var ux=Be(ex,!0);var Wn=class t{constructor(e,n){this.db=e;this.storage=n}collectionPath="jugadores";getPlayers(){let e=_o(this.db,this.collectionPath);return new he(n=>{CA(e,r=>{let i=r.val();if(i){let s=Object.keys(i).map(o=>se(F({},i[o]),{firestoreId:o}));n.next(s)}else n.next([])},r=>{console.error("Error al obtener jugadores:",r),n.error(r)})})}addPlayer(e){return A(this,null,function*(){let n=_o(this.db,this.collectionPath),r=TA(n);yield ev(r,e)})}updatePlayer(e){return A(this,null,function*(){if(!e.firestoreId){console.error("firestoreId es undefined");return}let n=_o(this.db,`${this.collectionPath}/${e.firestoreId}`);yield ev(n,e)})}deletePlayer(e){return A(this,null,function*(){if(!e){console.error("Error: playerId es undefined");return}let n=_o(this.db,`${this.collectionPath}/${e}`);yield DA(n)})}uploadFileAndUpdateDatabase(e,n,r){return A(this,null,function*(){try{let i=r==="image"?"assets/imagenes":"assets/videos",s=lx(this.storage,`${i}/${n.name}`);yield ux(s,n);let o=yield ax(s);console.log(`Archivo subido: ${o}`);let a=_o(this.db,`jugadores/${e}`);yield SA(a,r==="image"?{img1:o}:{video:o}),console.log("URL actualizada en la base de datos.")}catch(i){throw console.error("Error al subir archivo:",i),i}})}static \u0275fac=function(n){return new(n||t)(te(zi),te(Wi))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};function S4(t,e){if(t&1&&(R(0,"option",19),k(1),x()),t&2){let n=e.$implicit;ue("value",n),V(),Ei(n)}}function A4(t,e){if(t&1&&(R(0,"option",19),k(1),x()),t&2){let n=e.$implicit;ue("value",n.link),V(),Ei(n.name)}}function x4(t,e){if(t&1){let n=Zt();R(0,"div",5)(1,"label",6),k(2,"Subir Video:"),x(),R(3,"div",7)(4,"input",15),Ee("change",function(i){K(n);let s=H(2);return Q(s.onVideoUpload(i))}),x()()()}}function R4(t,e){if(t&1){let n=Zt();R(0,"button",18),Ee("click",function(){K(n);let i=H(2);return Q(i.toggleEdit())}),k(1,"Editar"),x()}}function N4(t,e){if(t&1){let n=Zt();R(0,"button",18),Ee("click",function(){K(n);let i=H(2);return Q(i.savePlayer())}),k(1,"Guardar"),x()}}function M4(t,e){if(t&1){let n=Zt();R(0,"div")(1,"div",1)(2,"div",2),k(3,"Detalles del Jugador:"),x(),R(4,"div",3)(5,"div",4)(6,"div",5)(7,"label",6),k(8,"Nombre:"),x(),R(9,"div",7)(10,"input",8),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.nombre,i)||(s.selectedPlayer.nombre=i),Q(i)}),x()()(),R(11,"div",5)(12,"label",6),k(13,"Apellido:"),x(),R(14,"div",7)(15,"input",9),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.apellido,i)||(s.selectedPlayer.apellido=i),Q(i)}),x()()(),R(16,"div",5)(17,"label",6),k(18,"Posici\xF3n:"),x(),R(19,"div",7)(20,"select",10),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.posicion,i)||(s.selectedPlayer.posicion=i),Q(i)}),Ot(21,S4,2,2,"option",11),x()()(),R(22,"div",5)(23,"label",6),k(24,"Edad:"),x(),R(25,"div",7)(26,"input",12),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.edad,i)||(s.selectedPlayer.edad=i),Q(i)}),x()()(),R(27,"div",5)(28,"label",6),k(29,"Sexo:"),x(),R(30,"div",7)(31,"input",10),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.sexo,i)||(s.selectedPlayer.sexo=i),Q(i)}),x()()(),R(32,"div",5)(33,"label",6),k(34,"Altura:"),x(),R(35,"div",7)(36,"input",13),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.altura,i)||(s.selectedPlayer.altura=i),Q(i)}),x()()(),R(37,"div",5)(38,"label",6),k(39,"Partidos:"),x(),R(40,"div",7)(41,"input",14),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.partidos,i)||(s.selectedPlayer.partidos=i),Q(i)}),x()()(),R(42,"div",5)(43,"label",6),k(44,"Imagen 1 URL:"),x(),R(45,"div",7)(46,"input",15),Ee("change",function(i){K(n);let s=H();return Q(s.onImageUpload(i))}),x()()(),R(47,"div",5)(48,"label",6),k(49,"Imagen 2 URL:"),x(),R(50,"div",7)(51,"select",10),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.selectedPlayer.img2,i)||(s.selectedPlayer.img2=i),Q(i)}),Ot(52,A4,2,2,"option",11),x()()(),Ot(53,x4,5,0,"div",16)(54,R4,2,0,"button",17)(55,N4,2,0,"button",17),R(56,"button",18),Ee("click",function(){K(n);let i=H();return Q(i.closeDetail())}),k(57,"Cerrar"),x()()()()()}if(t&2){let n=H();V(10),ue("readonly",n.readonly),qe("ngModel",n.selectedPlayer.nombre),V(5),ue("readonly",n.readonly),qe("ngModel",n.selectedPlayer.apellido),V(5),ue("disabled",n.readonly),qe("ngModel",n.selectedPlayer.posicion),V(),ue("ngForOf",n.positions),V(5),ue("readonly",n.readonly),qe("ngModel",n.selectedPlayer.edad),V(5),ue("disabled",n.readonly),qe("ngModel",n.selectedPlayer.sexo),V(5),ue("readonly",n.readonly),qe("ngModel",n.selectedPlayer.altura),V(5),ue("readonly",n.readonly),qe("ngModel",n.selectedPlayer.partidos),V(10),ue("disabled",n.readonly),qe("ngModel",n.selectedPlayer.img2),V(),ue("ngForOf",n.images),V(),ue("ngIf",!n.readonly),V(),ue("ngIf",n.readonly),V(),ue("ngIf",!n.readonly)}}var Lh=class t{constructor(e){this.firebaseService=e}positions=["Base","Escolta","Alero","Ala-p\xEDvot","P\xEDvot"];images=[{link:"assets/imagenes/player01_01.png",name:"Player 01"},{link:"assets/imagenes/player02_01.png",name:"Player 02"},{link:"assets/imagenes/player03_01.png",name:"Player 03"},{link:"assets/imagenes/player04_01.png",name:"Player 04"},{link:"assets/imagenes/player05_01.png",name:"Player 05"},{link:"assets/imagenes/player06_01.png",name:"Player 06"}];selectedPlayer=null;closeDetailEvent=new Le;savePlayerEvent=new Le;readonly=!0;videos=[];toggleEdit(){this.readonly=!this.readonly}ngOnInit(){this.videos.push({link:"assets/videos/player01.mp4",name:"Player 01"}),this.videos.push({link:"assets/videos/player02.mp4",name:"Player 02"}),this.videos.push({link:"assets/videos/player03.mp4",name:"Player 03"}),this.videos.push({link:"assets/videos/player04.mp4",name:"Player 04"}),this.videos.push({link:"assets/videos/player05.mp4",name:"Player 05"}),this.videos.push({link:"assets/videos/player06.mp4",name:"Player 06"})}onImageUpload(e){let n=e.target.files[0];n&&this.selectedPlayer.firestoreId&&this.firebaseService.uploadFileAndUpdateDatabase(this.selectedPlayer.firestoreId,n,"image").then(()=>console.log("Imagen actualizada correctamente.")).catch(r=>console.error("Error al subir la imagen:",r))}onVideoUpload(e){let n=e.target.files[0];n&&this.selectedPlayer.firestoreId&&this.firebaseService.uploadFileAndUpdateDatabase(this.selectedPlayer.firestoreId,n,"video").then(()=>console.log("Video actualizado correctamente.")).catch(r=>console.error("Error al subir el video:",r))}closeDetail(){this.closeDetailEvent.emit()}savePlayer(){this.savePlayerEvent.emit(this.selectedPlayer)}static \u0275fac=function(n){return new(n||t)(re(Wn))};static \u0275cmp=Ln({type:t,selectors:[["app-detail-component"]],inputs:{selectedPlayer:"selectedPlayer"},outputs:{closeDetailEvent:"closeDetailEvent",savePlayerEvent:"savePlayerEvent"},standalone:!0,features:[Vn],decls:1,vars:1,consts:[[4,"ngIf"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"player-card"],[1,"mb-3","row"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["placeholder","Name",1,"form-control",3,"ngModelChange","readonly","ngModel"],["placeholder","Last Name",1,"form-control",3,"ngModelChange","readonly","ngModel"],[1,"form-control",3,"ngModelChange","disabled","ngModel"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Edad",1,"form-control",3,"ngModelChange","readonly","ngModel"],["placeholder","Altura",1,"form-control",3,"ngModelChange","readonly","ngModel"],["placeholder","Partidos",1,"form-control",3,"ngModelChange","readonly","ngModel"],["type","file",1,"form-control",3,"change"],["class","mb-3 row",4,"ngIf"],["type","button","class","btn btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-success",3,"click"],[3,"value"]],template:function(n,r){n&1&&Ot(0,M4,58,21,"div",0),n&2&&ue("ngIf",r.selectedPlayer)},dependencies:[fr,ad,$s,Id,wd,Ed,Gs,Ks,yd,Oa]})};var Vh=class t{transform(e,n="",r=""){return e.filter(i=>{let s=n?i.nombre.toLowerCase().includes(n.toLowerCase()):!0,o=r?i.posicion.toLowerCase()===r.toLowerCase():!0;return s&&o})}static \u0275fac=function(n){return new(n||t)};static \u0275pipe=Rg({name:"playerFilter",type:t,pure:!0,standalone:!0})};function P4(t,e){if(t&1&&(R(0,"option",26),k(1),x()),t&2){let n=e.$implicit;ue("value",n),V(),Ei(n)}}function O4(t,e){if(t&1){let n=Zt();R(0,"div",16)(1,"div",17),k(2,"Buscador de Jugadores"),x(),R(3,"div",18)(4,"div",19)(5,"input",20),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.searchText,i)||(s.searchText=i),Q(i)}),x(),R(6,"select",21),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.searchPosition,i)||(s.searchPosition=i),Q(i)}),R(7,"option",22),k(8,"Todas las posiciones"),x(),Ot(9,P4,2,2,"option",23),x()(),R(10,"button",24),Ee("click",function(){K(n);let i=H();return Q(i.buscarJugador())}),k(11,"Buscar"),x(),R(12,"button",25),Ee("click",function(){K(n);let i=H();return Q(i.showNewPlayerForm=!0)}),k(13,"Nuevo Jugador"),x()()()}if(t&2){let n=H();V(5),qe("ngModel",n.searchText),V(),qe("ngModel",n.searchPosition),V(3),ue("ngForOf",n.positions)}}function k4(t,e){if(t&1&&(R(0,"option",26),k(1),x()),t&2){let n=e.$implicit;ue("value",n),V(),Ei(n)}}function F4(t,e){if(t&1){let n=Zt();R(0,"div",27)(1,"div",17),k(2,"Agregar Nuevo Jugador"),x(),R(3,"div",18)(4,"form")(5,"div",28)(6,"label"),k(7,"Nombre:"),x(),R(8,"input",29),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.nombre,i)||(s.newPlayer.nombre=i),Q(i)}),x()(),R(9,"div",28)(10,"label"),k(11,"Apellido:"),x(),R(12,"input",30),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.apellido,i)||(s.newPlayer.apellido=i),Q(i)}),x()(),R(13,"div",28)(14,"label"),k(15,"Posici\xF3n:"),x(),R(16,"select",31),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.posicion,i)||(s.newPlayer.posicion=i),Q(i)}),Ot(17,k4,2,2,"option",23),x()(),R(18,"div",28)(19,"label"),k(20,"Edad:"),x(),R(21,"input",32),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.edad,i)||(s.newPlayer.edad=i),Q(i)}),x()(),R(22,"div",28)(23,"label"),k(24,"Sexo:"),x(),R(25,"input",33),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.sexo,i)||(s.newPlayer.sexo=i),Q(i)}),x()(),R(26,"div",28)(27,"label"),k(28,"Altura:"),x(),R(29,"input",34),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.altura,i)||(s.newPlayer.altura=i),Q(i)}),x()(),R(30,"div",28)(31,"label"),k(32,"Partidos:"),x(),R(33,"input",35),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.partidos,i)||(s.newPlayer.partidos=i),Q(i)}),x()(),R(34,"div",28)(35,"label"),k(36,"Imagen 1 URL:"),x(),R(37,"input",36),Ee("change",function(i){K(n);let s=H();return Q(s.onNewPlayerImageUpload(i))}),x()(),R(38,"div",28)(39,"label"),k(40,"Imagen 2 URL:"),x(),R(41,"input",37),Ge("ngModelChange",function(i){K(n);let s=H();return Xe(s.newPlayer.img2,i)||(s.newPlayer.img2=i),Q(i)}),x()(),R(42,"div",28)(43,"label"),k(44,"Video URL:"),x(),R(45,"input",36),Ee("change",function(i){K(n);let s=H();return Q(s.onNewPlayerVideoUpload(i))}),x()(),R(46,"button",38),Ee("click",function(){K(n);let i=H();return Q(i.addPlayer())}),k(47,"Guardar Jugador"),x(),R(48,"button",39),Ee("click",function(){K(n);let i=H();return Q(i.showNewPlayerForm=!1)}),k(49,"Cancelar"),x()()()()}if(t&2){let n=H();V(8),qe("ngModel",n.newPlayer.nombre),V(4),qe("ngModel",n.newPlayer.apellido),V(4),qe("ngModel",n.newPlayer.posicion),V(),ue("ngForOf",n.positions),V(4),qe("ngModel",n.newPlayer.edad),V(4),qe("ngModel",n.newPlayer.sexo),V(4),qe("ngModel",n.newPlayer.altura),V(4),qe("ngModel",n.newPlayer.partidos),V(8),qe("ngModel",n.newPlayer.img2)}}function L4(t,e){if(t&1){let n=Zt();R(0,"div",41)(1,"div",18),ke(2,"img",42),R(3,"p")(4,"strong"),k(5,"Nombre:"),x(),k(6),x(),R(7,"p")(8,"strong"),k(9,"Apellido:"),x(),k(10),x(),R(11,"p")(12,"strong"),k(13,"Posici\xF3n:"),x(),k(14),x(),R(15,"button",43),Ee("click",function(){let i=K(n).$implicit,s=H(2);return Q(s.viewDetails(i))}),zu(),R(16,"svg",44),ke(17,"path",45)(18,"path",46),x()(),Lg(),R(19,"button",47),Ee("click",function(){let i=K(n).$implicit,s=H(2);return Q(s.selectPlayer(i))}),zu(),R(20,"svg",48),ke(21,"path",49)(22,"path",50),x()(),Lg(),R(23,"button",51),Ee("click",function(){let i=K(n).$implicit,s=H(2);return Q(s.deletePlayer(i))}),zu(),R(24,"svg",52),ke(25,"path",53),x()()()()}if(t&2){let n=e.$implicit;V(2),td("alt",n.nombre||"Desconocido"),ue("src",n.img1||"default-image.jpg",Us),V(4),Ze(" ",n.nombre,""),V(4),Ze(" ",n.apellido,""),V(4),Ze(" ",n.posicion,"")}}function V4(t,e){if(t&1&&(R(0,"div"),Ot(1,L4,26,5,"div",40),TC(2,"playerFilter"),x()),t&2){let n=H();V(),ue("ngForOf",DC(2,1,n.players,n.searchText,n.searchPosition))}}function U4(t,e){if(t&1){let n=Zt();R(0,"div")(1,"app-detail-component",54),Ee("closeDetailEvent",function(){K(n);let i=H();return Q(i.deselectPlayer())})("savePlayerEvent",function(i){K(n);let s=H();return Q(s.updatePlayers(i))}),x()()}if(t&2){let n=H();V(),ue("selectedPlayer",n.selectedPlayer)}}var Eo=class t{constructor(e){this.firebaseService=e}inputBDData=[];players=[];filteredPlayers=[];selectedPlayer;newPlayer={id:0,nombre:"",apellido:"",altura:0,posicion:"",img1:"",img2:"",video:"",edad:0,sexo:"",partidos:0,firestoreId:""};searchText="";searchPosition="";showNewPlayerForm=!1;viewOnlyPlayer=null;positions=["Base","Escolta","Alero","Ala-p\xEDvot","P\xEDvot"];ngOnInit(){this.loadPlayers()}ngOnChanges(e){e.inputBDData&&(this.filteredPlayers=this.inputBDData||[])}buscarJugador(){this.filteredPlayers=this.players.filter(e=>{let n=this.searchText?e.nombre.toLowerCase().includes(this.searchText.toLowerCase()):!0,r=this.searchPosition?e.posicion.toLowerCase()===this.searchPosition.toLowerCase():!0;return n&&r})}loadPlayers(){this.firebaseService.getPlayers().subscribe(e=>{console.log("Jugadores recuperados desde Firebase:",e),this.players=e||[],this.filteredPlayers=[...this.players]})}ngAfterViewInit(){console.log("Valores de jugadores pasados desde el padre:");for(let e in this.inputBDData)if(this.inputBDData.hasOwnProperty(e)){let n=this.inputBDData[e];console.log(`Player ${e}:`,n)}else console.log("Error al procesar jugadores")}selectPlayer(e){this.selectedPlayer=F({},e)}deselectPlayer(e){e&&e.stopPropagation(),this.selectedPlayer=null}addPlayer(){if(!this.newPlayer.nombre||!this.newPlayer.apellido){console.error("Nombre y apellido son obligatorios");return}console.log("A\xF1adiendo nuevo jugador:",this.newPlayer),this.firebaseService.addPlayer(this.newPlayer).then(()=>{console.log("Jugador a\xF1adido exitosamente"),this.loadPlayers(),this.showNewPlayerForm=!1}).catch(e=>{console.error("Error al a\xF1adir jugador:",e)})}deletePlayer(e){if(!e.firestoreId){console.error("Error: firestoreId es undefined");return}this.firebaseService.deletePlayer(e.firestoreId).then(()=>{this.loadPlayers(),this.cancelNewPlayer()}).catch(n=>{console.error("Error al eliminar jugador:",n)})}newPlayerForm(){this.newPlayer={id:0,nombre:"",apellido:"",edad:0,sexo:"",posicion:"",altura:0,partidos:0,img1:"",img2:"",video:"",firestoreId:""},this.showNewPlayerForm=!0}updatePlayers(e){this.firebaseService.updatePlayer(e).then(()=>{this.loadPlayers(),this.deselectPlayer()})}cancelNewPlayer(){this.newPlayer={id:0,nombre:"",apellido:"",altura:0,posicion:"",img1:"",img2:"",video:"",edad:0,sexo:"",partidos:0,firestoreId:""},this.showNewPlayerForm=!1}onNewPlayerImageUpload(e){let n=e.target.files[0];n&&this.newPlayer.firestoreId&&this.firebaseService.uploadFileAndUpdateDatabase(this.newPlayer.firestoreId,n,"image").then(()=>console.log("Imagen subida correctamente.")).catch(r=>console.error("Error al subir la imagen:",r))}onNewPlayerVideoUpload(e){let n=e.target.files[0];n&&this.newPlayer.firestoreId&&this.firebaseService.uploadFileAndUpdateDatabase(this.newPlayer.firestoreId,n,"video").then(()=>console.log("Video subido correctamente.")).catch(r=>console.error("Error al subir el video:",r))}viewDetails(e){this.viewOnlyPlayer=e}closeViewDetails(){this.viewOnlyPlayer=null}static \u0275fac=function(n){return new(n||t)(re(Wn))};static \u0275cmp=Ln({type:t,selectors:[["app-players-component"]],inputs:{inputBDData:"inputBDData"},standalone:!0,features:[Xt([Wn]),ar,Vn],decls:53,vars:14,consts:[[1,"col-12"],[1,"container","player-list"],["class","card",4,"ngIf"],["class","new-player-form card",4,"ngIf"],[4,"ngIf"],["id","viewDetailsModal","tabindex","-1","aria-labelledby","viewDetailsModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-lg"],[1,"modal-content"],[1,"modal-header"],["id","viewDetailsModalLabel",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"img-fluid",3,"src","alt"],["controls","","width","100%",3,"src"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"card"],[1,"card-header"],[1,"card-body"],[1,"search-filters"],["placeholder","Buscar por nombre",1,"form-control","mb-2",3,"ngModelChange","ngModel"],[1,"form-control","mb-2",3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary","mb-3",3,"click"],["type","button",1,"btn","btn-success","mb-3",3,"click"],[3,"value"],[1,"new-player-form","card"],[1,"mb-3"],["name","nombre","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","apellido","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","posicion","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","edad","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","sexo","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","altura","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","partidos","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","file",1,"form-control",3,"change"],["name","img2",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["class","player-card card mb-3",4,"ngFor","ngForOf"],[1,"player-card","card","mb-3"],[1,"player-image","mb-2",3,"src","alt"],["data-bs-toggle","modal","data-bs-target","#viewDetailsModal","title","Ver Detalles",1,"btn","btn-info","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-eye"],["d","M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zm-8 4a4 4 0 1 1 0-8 4 4 0 0 1 0 8z"],["d","M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5z"],["data-bs-toggle","tooltip","title","Editar",1,"btn","btn-primary","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-pencil-square"],["d","M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z"],["fill-rule","evenodd","d","M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5z"],["data-bs-toggle","tooltip","title","Eliminar",1,"btn","btn-danger","btn-sm",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-trash3"],["d","M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5M11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47M8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5"],[3,"closeDetailEvent","savePlayerEvent","selectedPlayer"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1),Ot(2,O4,14,3,"div",2)(3,F4,50,9,"div",3)(4,V4,3,5,"div",4),R(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"h5",9),k(10,"Detalles del Jugador"),x(),ke(11,"button",10),x(),R(12,"div",11)(13,"p")(14,"strong"),k(15,"Nombre:"),x(),k(16),x(),R(17,"p")(18,"strong"),k(19,"Apellido:"),x(),k(20),x(),R(21,"p")(22,"strong"),k(23,"Posici\xF3n:"),x(),k(24),x(),R(25,"p")(26,"strong"),k(27,"Edad:"),x(),k(28),x(),R(29,"p")(30,"strong"),k(31,"Sexo:"),x(),k(32),x(),R(33,"p")(34,"strong"),k(35,"Altura:"),x(),k(36),x(),R(37,"p")(38,"strong"),k(39,"Partidos:"),x(),k(40),x(),R(41,"p")(42,"strong"),k(43,"Imagen:"),x()(),ke(44,"img",12),R(45,"p")(46,"strong"),k(47,"Video:"),x()(),ke(48,"video",13),x(),R(49,"div",14)(50,"button",15),k(51,"Cerrar"),x()()()()(),Ot(52,U4,2,1,"div",4),x()()),n&2&&(V(2),ue("ngIf",!r.selectedPlayer&&!r.showNewPlayerForm),V(),ue("ngIf",r.showNewPlayerForm),V(),ue("ngIf",!r.selectedPlayer&&!r.showNewPlayerForm),V(12),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.nombre,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.apellido,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.posicion,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.edad,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.sexo,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.altura,""),V(4),Ze(" ",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.partidos,""),V(4),td("alt",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.nombre),ue("src",(r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.img1)||"default-image.jpg",Us),V(4),ue("src",r.viewOnlyPlayer==null?null:r.viewOnlyPlayer.video,Us),V(4),ue("ngIf",r.selectedPlayer))},dependencies:[fr,ad,$s,Id,vT,wd,Ed,Gs,xm,Ks,yd,fT,Rm,Oa,Am,Lh,Vh]})};var Sc={apiKey:"AIzaSyBW2TZzcM7tAAiS2zsBGvev4sPBdYnTkrw",authDomain:"producto2-63d62.firebaseapp.com",databaseURL:"https://producto2-63d62-default-rtdb.firebaseio.com",projectId:"producto2-63d62",storageBucket:"producto2-63d62.firebasestorage.app",messagingSenderId:"549088204019",appId:"1:549088204019:web:65790dda1e88fda43b1386",measurementId:"G-70LBQTLNL1"};var B4="FirebaseError",Ac=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=B4,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xc.prototype.create)}},xc=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?j4(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Ac(i,a,r)}};function j4(t,e){return t.replace($4,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var $4=/\{\$([^}]+)}/g;var jX=4*60*60*1e3;var Rc=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var px="@firebase/installations",vv="0.6.9";var gx=1e4,mx=`w:${vv}`,_x="FIS_v2",H4="https://firebaseinstallations.googleapis.com/v1",z4=60*60*1e3,W4="installations",q4="Installations";var G4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Gi=new xc(W4,q4,G4);function yx(t){return t instanceof Ac&&t.code.includes("request-failed")}function vx({projectId:t}){return`${H4}/projects/${t}/installations`}function wx(t){return{token:t.token,requestStatus:2,expiresIn:Q4(t.expiresIn),creationTime:Date.now()}}function Ex(t,e){return A(this,null,function*(){let r=(yield e.json()).error;return Gi.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})}function Ix({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function K4(t,{refreshToken:e}){let n=Ix(t);return n.append("Authorization",Y4(e)),n}function bx(t){return A(this,null,function*(){let e=yield t();return e.status>=500&&e.status<600?t():e})}function Q4(t){return Number(t.replace("s","000"))}function Y4(t){return`${_x} ${t}`}function J4(r,i){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},{fid:n}){let s=vx(t),o=Ix(t),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={fid:n,authVersion:_x,appId:t.appId,sdkVersion:mx},u={method:"POST",headers:o,body:JSON.stringify(l)},f=yield bx(()=>fetch(s,u));if(f.ok){let p=yield f.json();return{fid:p.fid||n,registrationStatus:2,refreshToken:p.refreshToken,authToken:wx(p.authToken)}}else throw yield Ex("Create Installation",f)})}function Cx(t){return new Promise(e=>{setTimeout(e,t)})}function Z4(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}var X4=/^[cdef][\w-]{21}$/,yv="";function ez(){try{let t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;let n=tz(t);return X4.test(n)?n:yv}catch{return yv}}function tz(t){return Z4(t).substr(0,22)}function Bh(t){return`${t.appName}!${t.appId}`}var Tx=new Map;function Dx(t,e){let n=Bh(t);Sx(n,e),nz(n,e)}function Sx(t,e){let n=Tx.get(t);if(n)for(let r of n)r(e)}function nz(t,e){let n=rz();n&&n.postMessage({key:t,fid:e}),iz()}var qi=null;function rz(){return!qi&&"BroadcastChannel"in self&&(qi=new BroadcastChannel("[Firebase] FID Change"),qi.onmessage=t=>{Sx(t.data.key,t.data.fid)}),qi}function iz(){Tx.size===0&&qi&&(qi.close(),qi=null)}var sz="firebase-installations-database",oz=1,Ki="firebase-installations-store",mv=null;function wv(){return mv||(mv=Ai(sz,oz,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ki)}}})),mv}function Uh(t,e){return A(this,null,function*(){let n=Bh(t),i=(yield wv()).transaction(Ki,"readwrite"),s=i.objectStore(Ki),o=yield s.get(n);return yield s.put(e,n),yield i.done,(!o||o.fid!==e.fid)&&Dx(t,e.fid),e})}function Ax(t){return A(this,null,function*(){let e=Bh(t),r=(yield wv()).transaction(Ki,"readwrite");yield r.objectStore(Ki).delete(e),yield r.done})}function jh(t,e){return A(this,null,function*(){let n=Bh(t),i=(yield wv()).transaction(Ki,"readwrite"),s=i.objectStore(Ki),o=yield s.get(n),a=e(o);return a===void 0?yield s.delete(n):yield s.put(a,n),yield i.done,a&&(!o||o.fid!==a.fid)&&Dx(t,a.fid),a})}function Ev(t){return A(this,null,function*(){let e,n=yield jh(t.appConfig,r=>{let i=az(r),s=cz(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===yv?{installationEntry:yield e}:{installationEntry:n,registrationPromise:e}})}function az(t){let e=t||{fid:ez(),registrationStatus:0};return xx(e)}function cz(t,e){if(e.registrationStatus===0){if(!navigator.onLine){let i=Promise.reject(Gi.create("app-offline"));return{installationEntry:e,registrationPromise:i}}let n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=lz(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:uz(t)}:{installationEntry:e}}function lz(t,e){return A(this,null,function*(){try{let n=yield J4(t,e);return Uh(t.appConfig,n)}catch(n){throw yx(n)&&n.customData.serverCode===409?yield Ax(t.appConfig):yield Uh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}})}function uz(t){return A(this,null,function*(){let e=yield hx(t.appConfig);for(;e.registrationStatus===1;)yield Cx(100),e=yield hx(t.appConfig);if(e.registrationStatus===0){let{installationEntry:n,registrationPromise:r}=yield Ev(t);return r||n}return e})}function hx(t){return jh(t,e=>{if(!e)throw Gi.create("installation-not-found");return xx(e)})}function xx(t){return dz(t)?{fid:t.fid,registrationStatus:0}:t}function dz(t){return t.registrationStatus===1&&t.registrationTime+gx<Date.now()}function hz(r,i){return A(this,arguments,function*({appConfig:t,heartbeatServiceProvider:e},n){let s=fz(t,n),o=K4(t,n),a=e.getImmediate({optional:!0});if(a){let p=yield a.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={installation:{sdkVersion:mx,appId:t.appId}},u={method:"POST",headers:o,body:JSON.stringify(l)},f=yield bx(()=>fetch(s,u));if(f.ok){let p=yield f.json();return wx(p)}else throw yield Ex("Generate Auth Token",f)})}function fz(t,{fid:e}){return`${vx(t)}/${e}/authTokens:generate`}function Iv(t,e=!1){return A(this,null,function*(){let n,r=yield jh(t.appConfig,s=>{if(!Rx(s))throw Gi.create("not-registered");let o=s.authToken;if(!e&&mz(o))return s;if(o.requestStatus===1)return n=pz(t,e),s;{if(!navigator.onLine)throw Gi.create("app-offline");let a=yz(s);return n=gz(t,a),a}});return n?yield n:r.authToken})}function pz(t,e){return A(this,null,function*(){let n=yield fx(t.appConfig);for(;n.authToken.requestStatus===1;)yield Cx(100),n=yield fx(t.appConfig);let r=n.authToken;return r.requestStatus===0?Iv(t,e):r})}function fx(t){return jh(t,e=>{if(!Rx(e))throw Gi.create("not-registered");let n=e.authToken;return vz(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function gz(t,e){return A(this,null,function*(){try{let n=yield hz(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return yield Uh(t.appConfig,r),n}catch(n){if(yx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))yield Ax(t.appConfig);else{let r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Uh(t.appConfig,r)}throw n}})}function Rx(t){return t!==void 0&&t.registrationStatus===2}function mz(t){return t.requestStatus===2&&!_z(t)}function _z(t){let e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+z4}function yz(t){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function vz(t){return t.requestStatus===1&&t.requestTime+gx<Date.now()}function wz(t){return A(this,null,function*(){let e=t,{installationEntry:n,registrationPromise:r}=yield Ev(e);return r?r.catch(console.error):Iv(e).catch(console.error),n.fid})}function Ez(t,e=!1){return A(this,null,function*(){let n=t;return yield Iz(n),(yield Iv(n,e)).token})}function Iz(t){return A(this,null,function*(){let{registrationPromise:e}=yield Ev(t);e&&(yield e)})}function bz(t){if(!t||!t.options)throw _v("App Configuration");if(!t.name)throw _v("App Name");let e=["projectId","apiKey","appId"];for(let n of e)if(!t.options[n])throw _v(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function _v(t){return Gi.create("missing-app-config-values",{valueName:t})}var Nx="installations",Cz="installations-internal",Tz=t=>{let e=t.getProvider("app").getImmediate(),n=bz(e),r=kt(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Dz=t=>{let e=t.getProvider("app").getImmediate(),n=kt(e,Nx).getImmediate();return{getId:()=>wz(n),getToken:i=>Ez(n,i)}};function Sz(){Ke(new Rc(Nx,Tz,"PUBLIC")),Ke(new Rc(Cz,Dz,"PRIVATE"))}Sz();Y(px,vv);Y(px,vv,"esm2017");function Mx(){try{return typeof indexedDB=="object"}catch{return!1}}function Px(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Ox(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var Az="FirebaseError",bv=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Az,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nc.prototype.create)}},Nc=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?xz(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bv(i,a,r)}};function xz(t,e){return t.replace(Rz,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Rz=/\{\$([^}]+)}/g;var XX=4*60*60*1e3;function $h(t){return t&&t._delegate?t._delegate:t}var Mc=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Nz="/firebase-messaging-sw.js",Mz="/firebase-cloud-messaging-push-scope",Bx="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Pz="https://fcmregistrations.googleapis.com/v1",jx="google.c.a.c_id",Oz="google.c.a.c_l",kz="google.c.a.ts",Fz="google.c.a.e";var Hh=function(t){return t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked",t}(Hh||{});function yr(t){let e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lz(t){let e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}var Cv="fcm_token_details_db",Vz=5,kx="fcm_token_object_Store";function Uz(t){return A(this,null,function*(){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(Cv))return null;let e=null;return(yield Ai(Cv,Vz,{upgrade:(r,i,s,o)=>A(this,null,function*(){var a;if(i<2||!r.objectStoreNames.contains(kx))return;let l=o.objectStore(kx),u=yield l.index("fcmSenderId").get(t);if(yield l.clear(),!!u){if(i===2){let f=u;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(a=f.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:yr(f.vapidKey)}}}else if(i===3){let f=u;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:yr(f.auth),p256dh:yr(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:yr(f.vapidKey)}}}else if(i===4){let f=u;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:yr(f.auth),p256dh:yr(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:yr(f.vapidKey)}}}}})})).close(),yield Sd(Cv),yield Sd("fcm_vapid_details_db"),yield Sd("undefined"),Bz(e)?e:null})}function Bz(t){if(!t||!t.subscriptionOptions)return!1;let{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}var jz="firebase-messaging-database",$z=1,Pc="firebase-messaging-store",Tv=null;function $x(){return Tv||(Tv=Ai(jz,$z,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pc)}}})),Tv}function Hz(t){return A(this,null,function*(){let e=Hx(t),r=yield(yield $x()).transaction(Pc).objectStore(Pc).get(e);if(r)return r;{let i=yield Uz(t.appConfig.senderId);if(i)return yield Av(t,i),i}})}function Av(t,e){return A(this,null,function*(){let n=Hx(t),i=(yield $x()).transaction(Pc,"readwrite");return yield i.objectStore(Pc).put(e,n),yield i.done,e})}function Hx({appConfig:t}){return t.appId}var zz={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},wt=new Nc("messaging","Messaging",zz);function Wz(t,e){return A(this,null,function*(){let n=yield Rv(t),r=zx(e),i={method:"POST",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(xv(t.appConfig),i)).json()}catch(o){throw wt.create("token-subscribe-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw wt.create("token-subscribe-failed",{errorInfo:o})}if(!s.token)throw wt.create("token-subscribe-no-token");return s.token})}function qz(t,e){return A(this,null,function*(){let n=yield Rv(t),r=zx(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},s;try{s=yield(yield fetch(`${xv(t.appConfig)}/${e.token}`,i)).json()}catch(o){throw wt.create("token-update-failed",{errorInfo:o?.toString()})}if(s.error){let o=s.error.message;throw wt.create("token-update-failed",{errorInfo:o})}if(!s.token)throw wt.create("token-update-no-token");return s.token})}function Gz(t,e){return A(this,null,function*(){let r={method:"DELETE",headers:yield Rv(t)};try{let s=yield(yield fetch(`${xv(t.appConfig)}/${e}`,r)).json();if(s.error){let o=s.error.message;throw wt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(i){throw wt.create("token-unsubscribe-failed",{errorInfo:i?.toString()})}})}function xv({projectId:t}){return`${Pz}/projects/${t}/registrations`}function Rv(n){return A(this,arguments,function*({appConfig:t,installations:e}){let r=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})})}function zx({p256dh:t,auth:e,endpoint:n,vapidKey:r}){let i={web:{endpoint:n,auth:e,p256dh:t}};return r!==Bx&&(i.web.applicationPubKey=r),i}var Kz=7*24*60*60*1e3;function Qz(t){return A(this,null,function*(){let e=yield Jz(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:yr(e.getKey("auth")),p256dh:yr(e.getKey("p256dh"))},r=yield Hz(t.firebaseDependencies);if(r){if(Zz(r.subscriptionOptions,n))return Date.now()>=r.createTime+Kz?Yz(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield Gz(t.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Fx(t.firebaseDependencies,n)}else return Fx(t.firebaseDependencies,n)})}function Yz(t,e){return A(this,null,function*(){try{let n=yield qz(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return yield Av(t.firebaseDependencies,r),n}catch(n){throw n}})}function Fx(t,e){return A(this,null,function*(){let r={token:yield Wz(t,e),createTime:Date.now(),subscriptionOptions:e};return yield Av(t,r),r.token})}function Jz(t,e){return A(this,null,function*(){let n=yield t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lz(e)})})}function Zz(t,e){let n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,i=e.auth===t.auth,s=e.p256dh===t.p256dh;return n&&r&&i&&s}function Lx(t){let e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return Xz(e,t),e3(e,t),t3(e,t),e}function Xz(t,e){if(!e.notification)return;t.notification={};let n=e.notification.title;n&&(t.notification.title=n);let r=e.notification.body;r&&(t.notification.body=r);let i=e.notification.image;i&&(t.notification.image=i);let s=e.notification.icon;s&&(t.notification.icon=s)}function e3(t,e){e.data&&(t.data=e.data)}function t3(t,e){var n,r,i,s,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};let a=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;a&&(t.fcmOptions.link=a);let l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}function n3(t){return typeof t=="object"&&!!t&&jx in t}r3("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");function r3(t,e){let n=[];for(let r=0;r<t.length;r++)n.push(t.charAt(r)),r<e.length&&n.push(e.charAt(r));return n.join("")}function i3(t){if(!t||!t.options)throw Dv("App Configuration Object");if(!t.name)throw Dv("App Name");let e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(let r of e)if(!n[r])throw Dv(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function Dv(t){return wt.create("missing-app-config-values",{valueName:t})}var Sv=class{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;let i=i3(e);this.firebaseDependencies={app:e,appConfig:i,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}};function s3(t){return A(this,null,function*(){try{t.swRegistration=yield navigator.serviceWorker.register(Nz,{scope:Mz}),t.swRegistration.update().catch(()=>{})}catch(e){throw wt.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}})}function o3(t,e){return A(this,null,function*(){if(!e&&!t.swRegistration&&(yield s3(t)),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw wt.create("invalid-sw-registration");t.swRegistration=e}})}function a3(t,e){return A(this,null,function*(){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=Bx)})}function Wx(t,e){return A(this,null,function*(){if(!navigator)throw wt.create("only-available-in-window");if(Notification.permission==="default"&&(yield Notification.requestPermission()),Notification.permission!=="granted")throw wt.create("permission-blocked");return yield a3(t,e?.vapidKey),yield o3(t,e?.serviceWorkerRegistration),Qz(t)})}function c3(t,e,n){return A(this,null,function*(){let r=l3(e);(yield t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[jx],message_name:n[Oz],message_time:n[kz],message_device_time:Math.floor(Date.now()/1e3)})})}function l3(t){switch(t){case Hh.NOTIFICATION_CLICKED:return"notification_open";case Hh.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function u3(t,e){return A(this,null,function*(){let n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Hh.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(Lx(n)):t.onMessageHandler.next(Lx(n)));let r=n.data;n3(r)&&r[Fz]==="1"&&(yield c3(t,n.messageType,r))})}var Vx="@firebase/messaging",Ux="0.12.12";var d3=t=>{let e=new Sv(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>u3(e,n)),e},h3=t=>{let e=t.getProvider("messaging").getImmediate();return{getToken:r=>Wx(e,r)}};function f3(){Ke(new Mc("messaging",d3,"PUBLIC")),Ke(new Mc("messaging-internal",h3,"PRIVATE")),Y(Vx,Ux),Y(Vx,Ux,"esm2017")}function Nv(){return A(this,null,function*(){try{yield Px()}catch{return!1}return typeof window<"u"&&Mx()&&Ox()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})}function p3(t,e){if(!navigator)throw wt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}function zh(t=$t()){return Nv().then(e=>{if(!e)throw wt.create("unsupported-browser")},e=>{throw wt.create("indexed-db-unsupported")}),kt($h(t),"messaging").getImmediate()}function Wh(t,e){return A(this,null,function*(){return t=$h(t),Wx(t,e)})}function qx(t,e){return t=$h(t),p3(t,e)}f3();var Oc=class{constructor(e){return e}},Gx="messaging",Mv=class{constructor(){return vn(Gx)}};var Kx="__angularfire_symbol__messagingIsSupported",Pv="__angularfire_symbol__messagingIsSupportedValue";globalThis[Kx]||=Nv().then(t=>globalThis[Pv]=t).catch(()=>globalThis[Pv]=!1);var qh={async:()=>globalThis[Kx],sync:()=>{let t=globalThis[Pv];if(t===void 0)throw new Error(qT("Messaging"));return t}},Ov=new U("angularfire2.messaging-instances");function g3(t,e){if(!qh.sync())return null;let n=mr(Gx,t,e);return n&&new Oc(n)}function m3(t){return(e,n)=>{if(!qh.sync())return null;let r=e.runOutsideAngular(()=>t(n));return new Oc(r)}}var _3={provide:Mv,deps:[[new Pe,Ov]]},y3={provide:Oc,useFactory:g3,deps:[[new Pe,Ov],Ht]};function Qx(t,...e){return Y("angularfire",rn.full,"fcm"),Bt([y3,_3,{provide:rd,useValue:qh.async,multi:!0},{provide:Ov,useFactory:m3(t),multi:!0,deps:[ve,ot,wn,En,...e]}])}var Eee=qh.async;var kc=Be(zh,!0),Yx=Be(Wh,!0),Jx=Be(qx,!1);var Gh=class t{constructor(){}requestPermission(){return A(this,null,function*(){let e=kc();try{(yield Notification.requestPermission())==="granted"?(console.log("Permiso concedido para notificaciones"),this.getDeviceToken(e)):console.error("Permiso denegado")}catch(n){console.error("Error al solicitar permisos:",n)}})}getDeviceToken(e){return A(this,null,function*(){try{let n=yield Yx(e,{vapidKey:"BCVruXR0pTgIqN7zIYCY_-ik6kTSuBOEOUVSBN-ChejltrmRAXN7_0SyZkMUjvHk6qbx5y39rYiwG9bJs3D9JBk"});n?console.log("Token del dispositivo:",n):console.warn("No se pudo obtener el token.")}catch(n){console.error("Error al obtener el token:",n)}})}listenForMessages(){let e=kc();Jx(e,n=>{console.log("Mensaje recibido:",n)})}static \u0275fac=function(n){return new(n||t)};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})};var Kh=class t{constructor(e){this.notificationService=e;this.db=Nh(this.app),this.generarConexion()}playersData=[];app=Hr(Sc);db;fcmToken=null;ngOnInit(){this.notificationService.requestPermission(),this.notificationService.listenForMessages(),this.getFCMToken()}generarConexion(){let e=xh(this.db,"jugadores");Jy(e).then(n=>{if(n.exists()){let r=n.val();this.playersData=r?Object.values(r):[],console.log("Jugadores data:",this.playersData)}else console.log("No hay datos disponibles."),this.playersData=[]}).catch(n=>{console.error("Error al obtener datos de jugadores:",n)})}getFCMToken(){let e=zh();Wh(e,{vapidKey:"BCVruXR0pTgIqN7zIYCY_-ik6kTSuBOEOUVSBN-ChejltrmRAXN7_0SyZkMUjvHk6qbx5y39rYiwG9bJs3D9JBk"}).then(n=>{n?(this.fcmToken=n,console.log("Token de FCM obtenido:",n)):console.log("No se pudo obtener el token")}).catch(n=>{console.log("Error al obtener el token FCM:",n)})}static \u0275fac=function(n){return new(n||t)(re(Gh))};static \u0275cmp=Ln({type:t,selectors:[["app-root"]],standalone:!0,features:[Xt([Wn]),Vn],decls:32,vars:1,consts:[[1,"row"],[1,"col-12","text-center"],[1,"container"],[1,"navbar","navbar-fixed-top","border","rounded"],["href","#",1,"navbar-brand"],["src","../assets/CodeCosmos.png","alt","Logo",2,"width","60px","height","60px"],[1,"mx-auto"],[1,"col-12"],[3,"inputBDData"],[1,"container","footerweb"],[1,"card"],[1,"card-body"],[1,"col-xs-12","col-sm-12","col-md-5","col-lg-5","col-xl-5","text-center","linea"],["src","../assets/CodeCosmos.png","alt","Code Cosmos Logo",2,"width","150px","height","150px","vertical-align","text-bottom"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"nav",3)(4,"a",4),ke(5,"img",5),x(),R(6,"div",6)(7,"p"),k(8,"FP067 (P) Desarrollo front-end con frameworks avanzados en entornos m\xF3viles"),x()()()()(),R(9,"div",0)(10,"div",7)(11,"div"),ke(12,"app-players-component",8),x()()(),R(13,"footer")(14,"div",0)(15,"div",1)(16,"div",9)(17,"div",10)(18,"div",11)(19,"div",12)(20,"p"),k(21,"Camelia Ancuta Moticeac"),ke(22,"br"),k(23," Sue Cajidos Ros"),ke(24,"br"),k(25," Alejandro Ar\xE9valo Rojas"),ke(26,"br"),k(27," Carlos Bravo Serrano"),ke(28,"br"),k(29," Liliana Diaz Iba\xF1ez"),x()(),R(30,"div",12),ke(31,"img",13),x()()()()()()()()),n&2&&(V(12),ue("inputBDData",r.playersData))},dependencies:[Eo,fr]})};var Xx=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},w3=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},eR={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,u=l?t[i+2]:0,f=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|u>>6,y=u&63;l||(y=64,o||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Xx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):w3(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let u=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||u==null||p==null)throw new kv;let m=s<<2|a>>4;if(r.push(m),u!==64){let y=a<<4&240|u>>2;if(r.push(y),p!==64){let b=u<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},kv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},E3=function(t){let e=Xx(t);return eR.encodeByteArray(e,!0)},Zx=function(t){return E3(t).replace(/\./g,"")},I3=function(t){try{return eR.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function b3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var C3=()=>b3().__FIREBASE_DEFAULTS__,T3=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},D3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&I3(t[1]);return e&&JSON.parse(e)},S3=()=>{try{return C3()||T3()||D3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},A3=t=>{var e,n;return(n=(e=S3())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},tR=t=>{let e=A3(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]};function nR(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zx(JSON.stringify(n)),Zx(JSON.stringify(o)),""].join(".")}var x3="FirebaseError",Fc=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=x3,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fv.prototype.create)}},Fv=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?R3(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Fc(i,a,r)}};function R3(t,e){return t.replace(N3,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var N3=/\{\$([^}]+)}/g;var Fee=4*60*60*1e3;var Qh=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var M3=[],De=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(De||{}),P3={debug:De.DEBUG,verbose:De.VERBOSE,info:De.INFO,warn:De.WARN,error:De.ERROR,silent:De.SILENT},O3=De.INFO,k3={[De.DEBUG]:"log",[De.VERBOSE]:"log",[De.INFO]:"info",[De.WARN]:"warn",[De.ERROR]:"error"},F3=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=k3[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Yh=class{constructor(e){this.name=e,this._logLevel=O3,this._logHandler=F3,this._userLogHandler=null,M3.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in De))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?P3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,De.DEBUG,...e),this._logHandler(this,De.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,De.VERBOSE,...e),this._logHandler(this,De.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,De.INFO,...e),this._logHandler(this,De.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,De.WARN,...e),this._logHandler(this,De.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,De.ERROR,...e),this._logHandler(this,De.ERROR,...e)}};var rR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iR={};var Lv,sR;(function(){var t;function e(I,_){function w(){}w.prototype=_.prototype,I.D=_.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(E,C,D){for(var v=Array(arguments.length-2),Qn=2;Qn<arguments.length;Qn++)v[Qn-2]=arguments[Qn];return _.prototype[C].apply(E,v)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,_,w){w||(w=0);var E=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)E[C]=_.charCodeAt(w++)|_.charCodeAt(w++)<<8|_.charCodeAt(w++)<<16|_.charCodeAt(w++)<<24;else for(C=0;16>C;++C)E[C]=_[w++]|_[w++]<<8|_[w++]<<16|_[w++]<<24;_=I.g[0],w=I.g[1],C=I.g[2];var D=I.g[3],v=_+(D^w&(C^D))+E[0]+3614090360&4294967295;_=w+(v<<7&4294967295|v>>>25),v=D+(C^_&(w^C))+E[1]+3905402710&4294967295,D=_+(v<<12&4294967295|v>>>20),v=C+(w^D&(_^w))+E[2]+606105819&4294967295,C=D+(v<<17&4294967295|v>>>15),v=w+(_^C&(D^_))+E[3]+3250441966&4294967295,w=C+(v<<22&4294967295|v>>>10),v=_+(D^w&(C^D))+E[4]+4118548399&4294967295,_=w+(v<<7&4294967295|v>>>25),v=D+(C^_&(w^C))+E[5]+1200080426&4294967295,D=_+(v<<12&4294967295|v>>>20),v=C+(w^D&(_^w))+E[6]+2821735955&4294967295,C=D+(v<<17&4294967295|v>>>15),v=w+(_^C&(D^_))+E[7]+4249261313&4294967295,w=C+(v<<22&4294967295|v>>>10),v=_+(D^w&(C^D))+E[8]+1770035416&4294967295,_=w+(v<<7&4294967295|v>>>25),v=D+(C^_&(w^C))+E[9]+2336552879&4294967295,D=_+(v<<12&4294967295|v>>>20),v=C+(w^D&(_^w))+E[10]+4294925233&4294967295,C=D+(v<<17&4294967295|v>>>15),v=w+(_^C&(D^_))+E[11]+2304563134&4294967295,w=C+(v<<22&4294967295|v>>>10),v=_+(D^w&(C^D))+E[12]+1804603682&4294967295,_=w+(v<<7&4294967295|v>>>25),v=D+(C^_&(w^C))+E[13]+4254626195&4294967295,D=_+(v<<12&4294967295|v>>>20),v=C+(w^D&(_^w))+E[14]+2792965006&4294967295,C=D+(v<<17&4294967295|v>>>15),v=w+(_^C&(D^_))+E[15]+1236535329&4294967295,w=C+(v<<22&4294967295|v>>>10),v=_+(C^D&(w^C))+E[1]+4129170786&4294967295,_=w+(v<<5&4294967295|v>>>27),v=D+(w^C&(_^w))+E[6]+3225465664&4294967295,D=_+(v<<9&4294967295|v>>>23),v=C+(_^w&(D^_))+E[11]+643717713&4294967295,C=D+(v<<14&4294967295|v>>>18),v=w+(D^_&(C^D))+E[0]+3921069994&4294967295,w=C+(v<<20&4294967295|v>>>12),v=_+(C^D&(w^C))+E[5]+3593408605&4294967295,_=w+(v<<5&4294967295|v>>>27),v=D+(w^C&(_^w))+E[10]+38016083&4294967295,D=_+(v<<9&4294967295|v>>>23),v=C+(_^w&(D^_))+E[15]+3634488961&4294967295,C=D+(v<<14&4294967295|v>>>18),v=w+(D^_&(C^D))+E[4]+3889429448&4294967295,w=C+(v<<20&4294967295|v>>>12),v=_+(C^D&(w^C))+E[9]+568446438&4294967295,_=w+(v<<5&4294967295|v>>>27),v=D+(w^C&(_^w))+E[14]+3275163606&4294967295,D=_+(v<<9&4294967295|v>>>23),v=C+(_^w&(D^_))+E[3]+4107603335&4294967295,C=D+(v<<14&4294967295|v>>>18),v=w+(D^_&(C^D))+E[8]+1163531501&4294967295,w=C+(v<<20&4294967295|v>>>12),v=_+(C^D&(w^C))+E[13]+2850285829&4294967295,_=w+(v<<5&4294967295|v>>>27),v=D+(w^C&(_^w))+E[2]+4243563512&4294967295,D=_+(v<<9&4294967295|v>>>23),v=C+(_^w&(D^_))+E[7]+1735328473&4294967295,C=D+(v<<14&4294967295|v>>>18),v=w+(D^_&(C^D))+E[12]+2368359562&4294967295,w=C+(v<<20&4294967295|v>>>12),v=_+(w^C^D)+E[5]+4294588738&4294967295,_=w+(v<<4&4294967295|v>>>28),v=D+(_^w^C)+E[8]+2272392833&4294967295,D=_+(v<<11&4294967295|v>>>21),v=C+(D^_^w)+E[11]+1839030562&4294967295,C=D+(v<<16&4294967295|v>>>16),v=w+(C^D^_)+E[14]+4259657740&4294967295,w=C+(v<<23&4294967295|v>>>9),v=_+(w^C^D)+E[1]+2763975236&4294967295,_=w+(v<<4&4294967295|v>>>28),v=D+(_^w^C)+E[4]+1272893353&4294967295,D=_+(v<<11&4294967295|v>>>21),v=C+(D^_^w)+E[7]+4139469664&4294967295,C=D+(v<<16&4294967295|v>>>16),v=w+(C^D^_)+E[10]+3200236656&4294967295,w=C+(v<<23&4294967295|v>>>9),v=_+(w^C^D)+E[13]+681279174&4294967295,_=w+(v<<4&4294967295|v>>>28),v=D+(_^w^C)+E[0]+3936430074&4294967295,D=_+(v<<11&4294967295|v>>>21),v=C+(D^_^w)+E[3]+3572445317&4294967295,C=D+(v<<16&4294967295|v>>>16),v=w+(C^D^_)+E[6]+76029189&4294967295,w=C+(v<<23&4294967295|v>>>9),v=_+(w^C^D)+E[9]+3654602809&4294967295,_=w+(v<<4&4294967295|v>>>28),v=D+(_^w^C)+E[12]+3873151461&4294967295,D=_+(v<<11&4294967295|v>>>21),v=C+(D^_^w)+E[15]+530742520&4294967295,C=D+(v<<16&4294967295|v>>>16),v=w+(C^D^_)+E[2]+3299628645&4294967295,w=C+(v<<23&4294967295|v>>>9),v=_+(C^(w|~D))+E[0]+4096336452&4294967295,_=w+(v<<6&4294967295|v>>>26),v=D+(w^(_|~C))+E[7]+1126891415&4294967295,D=_+(v<<10&4294967295|v>>>22),v=C+(_^(D|~w))+E[14]+2878612391&4294967295,C=D+(v<<15&4294967295|v>>>17),v=w+(D^(C|~_))+E[5]+4237533241&4294967295,w=C+(v<<21&4294967295|v>>>11),v=_+(C^(w|~D))+E[12]+1700485571&4294967295,_=w+(v<<6&4294967295|v>>>26),v=D+(w^(_|~C))+E[3]+2399980690&4294967295,D=_+(v<<10&4294967295|v>>>22),v=C+(_^(D|~w))+E[10]+4293915773&4294967295,C=D+(v<<15&4294967295|v>>>17),v=w+(D^(C|~_))+E[1]+2240044497&4294967295,w=C+(v<<21&4294967295|v>>>11),v=_+(C^(w|~D))+E[8]+1873313359&4294967295,_=w+(v<<6&4294967295|v>>>26),v=D+(w^(_|~C))+E[15]+4264355552&4294967295,D=_+(v<<10&4294967295|v>>>22),v=C+(_^(D|~w))+E[6]+2734768916&4294967295,C=D+(v<<15&4294967295|v>>>17),v=w+(D^(C|~_))+E[13]+1309151649&4294967295,w=C+(v<<21&4294967295|v>>>11),v=_+(C^(w|~D))+E[4]+4149444226&4294967295,_=w+(v<<6&4294967295|v>>>26),v=D+(w^(_|~C))+E[11]+3174756917&4294967295,D=_+(v<<10&4294967295|v>>>22),v=C+(_^(D|~w))+E[2]+718787259&4294967295,C=D+(v<<15&4294967295|v>>>17),v=w+(D^(C|~_))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(C+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var w=_-this.blockSize,E=this.B,C=this.h,D=0;D<_;){if(C==0)for(;D<=w;)i(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(E[C++]=I.charCodeAt(D++),C==this.blockSize){i(this,E),C=0;break}}else for(;D<_;)if(E[C++]=I[D++],C==this.blockSize){i(this,E),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var w=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=w&255,w/=256;for(this.u(I),I=Array(16),_=w=0;4>_;++_)for(var E=0;32>E;E+=8)I[w++]=this.g[_]>>>E&255;return I};function s(I,_){var w=a;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=_(I)}function o(I,_){this.h=_;for(var w=[],E=!0,C=I.length-1;0<=C;C--){var D=I[C]|0;E&&D==_||(w[C]=D,E=!1)}this.g=w}var a={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return P(u(-I));for(var _=[],w=1,E=0;I>=w;E++)_[E]=I/w|0,w*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return P(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=u(Math.pow(_,8)),E=p,C=0;C<I.length;C+=8){var D=Math.min(8,I.length-C),v=parseInt(I.substring(C,C+D),_);8>D?(D=u(Math.pow(_,D)),E=E.j(D).add(u(v))):(E=E.j(w),E=E.add(u(v)))}return E}var p=l(0),m=l(1),y=l(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();for(var I=0,_=1,w=0;w<this.g.length;w++){var E=this.i(w);I+=(0<=E?E:4294967296+E)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(N(this))return"-"+P(this).toString(I);for(var _=u(Math.pow(I,6)),w=this,E="";;){var C=ee(w,_).g;w=B(w,C.j(_));var D=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=C,b(w))return D+E;for(;6>D.length;)D="0"+D;E=D+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=B(this,I),N(I)?-1:b(I)?0:1};function P(I){for(var _=I.g.length,w=[],E=0;E<_;E++)w[E]=~I.g[E];return new o(w,~I.h).add(m)}t.abs=function(){return N(this)?P(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],E=0,C=0;C<=_;C++){var D=E+(this.i(C)&65535)+(I.i(C)&65535),v=(D>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);E=v>>>16,D&=65535,v&=65535,w[C]=v<<16|D}return new o(w,w[w.length-1]&-2147483648?-1:0)};function B(I,_){return I.add(P(_))}t.j=function(I){if(b(this)||b(I))return p;if(N(this))return N(I)?P(this).j(P(I)):P(P(this).j(I));if(N(I))return P(this.j(P(I)));if(0>this.l(y)&&0>I.l(y))return u(this.m()*I.m());for(var _=this.g.length+I.g.length,w=[],E=0;E<2*_;E++)w[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<I.g.length;C++){var D=this.i(E)>>>16,v=this.i(E)&65535,Qn=I.i(C)>>>16,Lo=I.i(C)&65535;w[2*E+2*C]+=v*Lo,Z(w,2*E+2*C),w[2*E+2*C+1]+=D*Lo,Z(w,2*E+2*C+1),w[2*E+2*C+1]+=v*Qn,Z(w,2*E+2*C+1),w[2*E+2*C+2]+=D*Qn,Z(w,2*E+2*C+2)}for(E=0;E<_;E++)w[E]=w[2*E+1]<<16|w[2*E];for(E=_;E<2*_;E++)w[E]=0;return new o(w,0)};function Z(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function z(I,_){this.g=I,this.h=_}function ee(I,_){if(b(_))throw Error("division by zero");if(b(I))return new z(p,p);if(N(I))return _=ee(P(I),_),new z(P(_.g),P(_.h));if(N(_))return _=ee(I,P(_)),new z(P(_.g),_.h);if(30<I.g.length){if(N(I)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var w=m,E=_;0>=E.l(I);)w=tt(w),E=tt(E);var C=_e(w,1),D=_e(E,1);for(E=_e(E,2),w=_e(w,2);!b(E);){var v=D.add(E);0>=v.l(I)&&(C=C.add(w),D=v),E=_e(E,1),w=_e(w,1)}return _=B(I,C.j(_)),new z(C,_)}for(C=p;0<=I.l(_);){for(w=Math.max(1,Math.floor(I.m()/_.m())),E=Math.ceil(Math.log(w)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),D=u(w),v=D.j(_);N(v)||0<v.l(I);)w-=E,D=u(w),v=D.j(_);b(D)&&(D=m),C=C.add(D),I=B(I,v)}return new z(C,I)}t.A=function(I){return ee(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)&I.i(E);return new o(w,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)|I.i(E);return new o(w,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),w=[],E=0;E<_;E++)w[E]=this.i(E)^I.i(E);return new o(w,this.h^I.h)};function tt(I){for(var _=I.g.length+1,w=[],E=0;E<_;E++)w[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(w,I.h)}function _e(I,_){var w=_>>5;_%=32;for(var E=I.g.length-w,C=[],D=0;D<E;D++)C[D]=0<_?I.i(D+w)>>>_|I.i(D+w+1)<<32-_:I.i(D+w);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,sR=iR.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,Lv=iR.Integer=o}).apply(typeof rR<"u"?rR:typeof self<"u"?self:typeof window<"u"?window:{});var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},vr={};var oR,L3,aR,cR,lR,uR,dR,hR,fR;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,h){return c==Array.prototype||c==Object.prototype||(c[d]=h.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Jh=="object"&&Jh];for(var d=0;d<c.length;++d){var h=c[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var h=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var T=c[g];if(!(T in h))break e;h=h[T]}c=c[c.length-1],g=h[c],d=d(g),d!=g&&d!=null&&e(h,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var h=0,g=!1,T={next:function(){if(!g&&h<c.length){var S=h++;return{value:d(S,c[S]),done:!1}}return g=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,h){return h})}});var o=o||{},a=this||self;function l(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function u(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function f(c,d,h){return c.call.apply(c.bind,arguments)}function p(c,d,h){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,g),c.apply(d,T)}}return function(){return c.apply(d,arguments)}}function m(c,d,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function y(c,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function h(){}h.prototype=d.prototype,c.aa=d.prototype,c.prototype=new h,c.prototype.constructor=c,c.Qb=function(g,T,S){for(var O=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)O[Se-2]=arguments[Se];return d.prototype[T].apply(g,O)}}function N(c){let d=c.length;if(0<d){let h=Array(d);for(let g=0;g<d;g++)h[g]=c[g];return h}return[]}function P(c,d){for(let h=1;h<arguments.length;h++){let g=arguments[h];if(l(g)){let T=c.length||0,S=g.length||0;c.length=T+S;for(let O=0;O<S;O++)c[T+O]=g[O]}else c.push(g)}}class B{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function Z(c){return/^[\s\xa0]*$/.test(c)}function z(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function ee(c){return ee[" "](c),c}ee[" "]=function(){};var tt=z().indexOf("Gecko")!=-1&&!(z().toLowerCase().indexOf("webkit")!=-1&&z().indexOf("Edge")==-1)&&!(z().indexOf("Trident")!=-1||z().indexOf("MSIE")!=-1)&&z().indexOf("Edge")==-1;function _e(c,d,h){for(let g in c)d.call(h,c[g],g,c)}function I(c,d){for(let h in c)d.call(void 0,c[h],h,c)}function _(c){let d={};for(let h in c)d[h]=c[h];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let h,g;for(let T=1;T<arguments.length;T++){g=arguments[T];for(h in g)c[h]=g[h];for(let S=0;S<w.length;S++)h=w[S],Object.prototype.hasOwnProperty.call(g,h)&&(c[h]=g[h])}}function C(c){var d=1;c=c.split(":");let h=[];for(;0<d&&c.length;)h.push(c.shift()),d--;return c.length&&h.push(c.join(":")),h}function D(c){a.setTimeout(()=>{throw c},0)}function v(){var c=Df;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class Qn{constructor(){this.h=this.g=null}add(d,h){let g=Lo.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Lo=new B(()=>new mN,c=>c.reset());class mN{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Vo,Uo=!1,Df=new Qn,Ww=()=>{let c=a.Promise.resolve(void 0);Vo=()=>{c.then(_N)}};var _N=()=>{for(var c;c=v();){try{c.h.call(c.g)}catch(h){D(h)}var d=Lo;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Uo=!1};function Ir(){this.s=this.s,this.C=this.C}Ir.prototype.s=!1,Ir.prototype.ma=function(){this.s||(this.s=!0,this.N())},Ir.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function mt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}mt.prototype.h=function(){this.defaultPrevented=!0};var yN=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let h=()=>{};a.addEventListener("test",h,d),a.removeEventListener("test",h,d)}catch{}return c}();function Bo(c,d){if(mt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var h=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(tt){e:{try{ee(d.nodeName);var T=!0;break e}catch{}T=!1}T||(d=null)}}else h=="mouseover"?d=c.fromElement:h=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:vN[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Bo.aa.h.call(this)}}b(Bo,mt);var vN={2:"touch",3:"pen",4:"mouse"};Bo.prototype.h=function(){Bo.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var jo="closure_listenable_"+(1e6*Math.random()|0),wN=0;function EN(c,d,h,g,T){this.listener=c,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=T,this.key=++wN,this.da=this.fa=!1}function ol(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function al(c){this.src=c,this.g={},this.h=0}al.prototype.add=function(c,d,h,g,T){var S=c.toString();c=this.g[S],c||(c=this.g[S]=[],this.h++);var O=Af(c,d,g,T);return-1<O?(d=c[O],h||(d.fa=!1)):(d=new EN(d,this.src,S,!!g,T),d.fa=h,c.push(d)),d};function Sf(c,d){var h=d.type;if(h in c.g){var g=c.g[h],T=Array.prototype.indexOf.call(g,d,void 0),S;(S=0<=T)&&Array.prototype.splice.call(g,T,1),S&&(ol(d),c.g[h].length==0&&(delete c.g[h],c.h--))}}function Af(c,d,h,g){for(var T=0;T<c.length;++T){var S=c[T];if(!S.da&&S.listener==d&&S.capture==!!h&&S.ha==g)return T}return-1}var xf="closure_lm_"+(1e6*Math.random()|0),Rf={};function qw(c,d,h,g,T){if(g&&g.once)return Kw(c,d,h,g,T);if(Array.isArray(d)){for(var S=0;S<d.length;S++)qw(c,d[S],h,g,T);return null}return h=Of(h),c&&c[jo]?c.K(d,h,u(g)?!!g.capture:!!g,T):Gw(c,d,h,!1,g,T)}function Gw(c,d,h,g,T,S){if(!d)throw Error("Invalid event type");var O=u(T)?!!T.capture:!!T,Se=Mf(c);if(Se||(c[xf]=Se=new al(c)),h=Se.add(d,h,g,O,S),h.proxy)return h;if(g=IN(),h.proxy=g,g.src=c,g.listener=h,c.addEventListener)yN||(T=O),T===void 0&&(T=!1),c.addEventListener(d.toString(),g,T);else if(c.attachEvent)c.attachEvent(Yw(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function IN(){function c(h){return d.call(c.src,c.listener,h)}let d=bN;return c}function Kw(c,d,h,g,T){if(Array.isArray(d)){for(var S=0;S<d.length;S++)Kw(c,d[S],h,g,T);return null}return h=Of(h),c&&c[jo]?c.L(d,h,u(g)?!!g.capture:!!g,T):Gw(c,d,h,!0,g,T)}function Qw(c,d,h,g,T){if(Array.isArray(d))for(var S=0;S<d.length;S++)Qw(c,d[S],h,g,T);else g=u(g)?!!g.capture:!!g,h=Of(h),c&&c[jo]?(c=c.i,d=String(d).toString(),d in c.g&&(S=c.g[d],h=Af(S,h,g,T),-1<h&&(ol(S[h]),Array.prototype.splice.call(S,h,1),S.length==0&&(delete c.g[d],c.h--)))):c&&(c=Mf(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Af(d,h,g,T)),(h=-1<c?d[c]:null)&&Nf(h))}function Nf(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[jo])Sf(d.i,c);else{var h=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(h,g,c.capture):d.detachEvent?d.detachEvent(Yw(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Mf(d))?(Sf(h,c),h.h==0&&(h.src=null,d[xf]=null)):ol(c)}}}function Yw(c){return c in Rf?Rf[c]:Rf[c]="on"+c}function bN(c,d){if(c.da)c=!0;else{d=new Bo(d,this);var h=c.listener,g=c.ha||c.src;c.fa&&Nf(c),c=h.call(g,d)}return c}function Mf(c){return c=c[xf],c instanceof al?c:null}var Pf="__closure_events_fn_"+(1e9*Math.random()>>>0);function Of(c){return typeof c=="function"?c:(c[Pf]||(c[Pf]=function(d){return c.handleEvent(d)}),c[Pf])}function _t(){Ir.call(this),this.i=new al(this),this.M=this,this.F=null}b(_t,Ir),_t.prototype[jo]=!0,_t.prototype.removeEventListener=function(c,d,h,g){Qw(this,c,d,h,g)};function Et(c,d){var h,g=c.F;if(g)for(h=[];g;g=g.F)h.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new mt(d,c);else if(d instanceof mt)d.target=d.target||c;else{var T=d;d=new mt(g,c),E(d,T)}if(T=!0,h)for(var S=h.length-1;0<=S;S--){var O=d.g=h[S];T=cl(O,g,!0,d)&&T}if(O=d.g=c,T=cl(O,g,!0,d)&&T,T=cl(O,g,!1,d)&&T,h)for(S=0;S<h.length;S++)O=d.g=h[S],T=cl(O,g,!1,d)&&T}_t.prototype.N=function(){if(_t.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var h=c.g[d],g=0;g<h.length;g++)ol(h[g]);delete c.g[d],c.h--}}this.F=null},_t.prototype.K=function(c,d,h,g){return this.i.add(String(c),d,!1,h,g)},_t.prototype.L=function(c,d,h,g){return this.i.add(String(c),d,!0,h,g)};function cl(c,d,h,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var T=!0,S=0;S<d.length;++S){var O=d[S];if(O&&!O.da&&O.capture==h){var Se=O.listener,at=O.ha||O.src;O.fa&&Sf(c.i,O),T=Se.call(at,g)!==!1&&T}}return T&&!g.defaultPrevented}function Jw(c,d,h){if(typeof c=="function")h&&(c=m(c,h));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function Zw(c){c.g=Jw(()=>{c.g=null,c.i&&(c.i=!1,Zw(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class CN extends Ir{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Zw(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function $o(c){Ir.call(this),this.h=c,this.g={}}b($o,Ir);var Xw=[];function eE(c){_e(c.g,function(d,h){this.g.hasOwnProperty(h)&&Nf(d)},c),c.g={}}$o.prototype.N=function(){$o.aa.N.call(this),eE(this)},$o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var kf=a.JSON.stringify,TN=a.JSON.parse,DN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ff(){}Ff.prototype.h=null;function tE(c){return c.h||(c.h=c.i())}function nE(){}var Ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Lf(){mt.call(this,"d")}b(Lf,mt);function Vf(){mt.call(this,"c")}b(Vf,mt);var ti={},rE=null;function ll(){return rE=rE||new _t}ti.La="serverreachability";function iE(c){mt.call(this,ti.La,c)}b(iE,mt);function zo(c){let d=ll();Et(d,new iE(d))}ti.STAT_EVENT="statevent";function sE(c,d){mt.call(this,ti.STAT_EVENT,c),this.stat=d}b(sE,mt);function It(c){let d=ll();Et(d,new sE(d,c))}ti.Ma="timingevent";function oE(c,d){mt.call(this,ti.Ma,c),this.size=d}b(oE,mt);function Wo(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function qo(){this.g=!0}qo.prototype.xa=function(){this.g=!1};function SN(c,d,h,g,T,S){c.info(function(){if(c.g)if(S)for(var O="",Se=S.split("&"),at=0;at<Se.length;at++){var ye=Se[at].split("=");if(1<ye.length){var yt=ye[0];ye=ye[1];var vt=yt.split("_");O=2<=vt.length&&vt[1]=="type"?O+(yt+"="+ye+"&"):O+(yt+"=redacted&")}}else O=null;else O=S;return"XMLHTTP REQ ("+g+") [attempt "+T+"]: "+d+`
`+h+`
`+O})}function AN(c,d,h,g,T,S,O){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+T+"]: "+d+`
`+h+`
`+S+" "+O})}function ns(c,d,h,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+RN(c,h)+(g?" "+g:"")})}function xN(c,d){c.info(function(){return"TIMEOUT: "+d})}qo.prototype.info=function(){};function RN(c,d){if(!c.g)return d;if(!d)return null;try{var h=JSON.parse(d);if(h){for(c=0;c<h.length;c++)if(Array.isArray(h[c])){var g=h[c];if(!(2>g.length)){var T=g[1];if(Array.isArray(T)&&!(1>T.length)){var S=T[0];if(S!="noop"&&S!="stop"&&S!="close")for(var O=1;O<T.length;O++)T[O]=""}}}}return kf(h)}catch{return d}}var ul={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},aE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Uf;function dl(){}b(dl,Ff),dl.prototype.g=function(){return new XMLHttpRequest},dl.prototype.i=function(){return{}},Uf=new dl;function br(c,d,h,g){this.j=c,this.i=d,this.l=h,this.R=g||1,this.U=new $o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cE}function cE(){this.i=null,this.g="",this.h=!1}var lE={},Bf={};function jf(c,d,h){c.L=1,c.v=gl(Yn(d)),c.m=h,c.P=!0,uE(c,null)}function uE(c,d){c.F=Date.now(),hl(c),c.A=Yn(c.v);var h=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),CE(h.i,"t",g),c.C=0,h=c.j.J,c.h=new cE,c.g=$E(c.j,h?d:null,!c.m),0<c.O&&(c.M=new CN(m(c.Y,c,c.g),c.O)),d=c.U,h=c.g,g=c.ca;var T="readystatechange";Array.isArray(T)||(T&&(Xw[0]=T.toString()),T=Xw);for(var S=0;S<T.length;S++){var O=qw(h,T[S],g||d.handleEvent,!1,d.h||d);if(!O)break;d.g[O.key]=O}d=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),zo(),SN(c.i,c.u,c.A,c.l,c.R,c.m)}br.prototype.ca=function(c){c=c.target;let d=this.M;d&&Jn(c)==3?d.j():this.Y(c)},br.prototype.Y=function(c){try{if(c==this.g)e:{let vt=Jn(this.g);var d=this.g.Ba();let ss=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||NE(this.g)))){this.J||vt!=4||d==7||(d==8||0>=ss?zo(3):zo(2)),$f(this);var h=this.g.Z();this.X=h;t:if(dE(this)){var g=NE(this.g);c="";var T=g.length,S=Jn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ni(this),Go(this);var O="";break t}this.h.i=new a.TextDecoder}for(d=0;d<T;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(S&&d==T-1)});g.length=0,this.h.g+=c,this.C=0,O=this.h.g}else O=this.g.oa();if(this.o=h==200,AN(this.i,this.u,this.A,this.l,this.R,vt,h),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,at=this.g;if((Se=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Z(Se)){var ye=Se;break t}}ye=null}if(h=ye)ns(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Hf(this,h);else{this.o=!1,this.s=3,It(12),ni(this),Go(this);break e}}if(this.P){h=!0;let ln;for(;!this.J&&this.C<O.length;)if(ln=NN(this,O),ln==Bf){vt==4&&(this.s=4,It(14),h=!1),ns(this.i,this.l,null,"[Incomplete Response]");break}else if(ln==lE){this.s=4,It(15),ns(this.i,this.l,O,"[Invalid Chunk]"),h=!1;break}else ns(this.i,this.l,ln,null),Hf(this,ln);if(dE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||O.length!=0||this.h.h||(this.s=1,It(16),h=!1),this.o=this.o&&h,!h)ns(this.i,this.l,O,"[Invalid Chunked Response]"),ni(this),Go(this);else if(0<O.length&&!this.W){this.W=!0;var yt=this.j;yt.g==this&&yt.ba&&!yt.M&&(yt.j.info("Great, no buffering proxy detected. Bytes received: "+O.length),Qf(yt),yt.M=!0,It(11))}}else ns(this.i,this.l,O,null),Hf(this,O);vt==4&&ni(this),this.o&&!this.J&&(vt==4?VE(this.j,this):(this.o=!1,hl(this)))}else KN(this.g),h==400&&0<O.indexOf("Unknown SID")?(this.s=3,It(12)):(this.s=0,It(13)),ni(this),Go(this)}}}catch{}finally{}};function dE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function NN(c,d){var h=c.C,g=d.indexOf(`
`,h);return g==-1?Bf:(h=Number(d.substring(h,g)),isNaN(h)?lE:(g+=1,g+h>d.length?Bf:(d=d.slice(g,g+h),c.C=g+h,d)))}br.prototype.cancel=function(){this.J=!0,ni(this)};function hl(c){c.S=Date.now()+c.I,hE(c,c.I)}function hE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Wo(m(c.ba,c),d)}function $f(c){c.B&&(a.clearTimeout(c.B),c.B=null)}br.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(xN(this.i,this.A),this.L!=2&&(zo(),It(17)),ni(this),this.s=2,Go(this)):hE(this,this.S-c)};function Go(c){c.j.G==0||c.J||VE(c.j,c)}function ni(c){$f(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,eE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Hf(c,d){try{var h=c.j;if(h.G!=0&&(h.g==c||zf(h.h,c))){if(!c.K&&zf(h.h,c)&&h.G==3){try{var g=h.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var T=g;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<c.F)wl(h),yl(h);else break e;Kf(h),It(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Wo(m(h.Za,h),6e3));if(1>=gE(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else ii(h,11)}else if((c.K||h.g==c)&&wl(h),!Z(d))for(T=h.Da.g.parse(d),d=0;d<T.length;d++){let ye=T[d];if(h.T=ye[0],ye=ye[1],h.G==2)if(ye[0]=="c"){h.K=ye[1],h.ia=ye[2];let yt=ye[3];yt!=null&&(h.la=yt,h.j.info("VER="+h.la));let vt=ye[4];vt!=null&&(h.Aa=vt,h.j.info("SVER="+h.Aa));let ss=ye[5];ss!=null&&typeof ss=="number"&&0<ss&&(g=1.5*ss,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let ln=c.g;if(ln){let Il=ln.g?ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var S=g.h;S.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(S.j=S.l,S.g=new Set,S.h&&(Wf(S,S.h),S.h=null))}if(g.D){let Yf=ln.g?ln.g.getResponseHeader("X-HTTP-Session-Id"):null;Yf&&(g.ya=Yf,Me(g.I,g.D,Yf))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-c.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var O=c;if(g.qa=jE(g,g.J?g.ia:null,g.W),O.K){mE(g.h,O);var Se=O,at=g.L;at&&(Se.I=at),Se.B&&($f(Se),hl(Se)),g.g=O}else FE(g);0<h.i.length&&vl(h)}else ye[0]!="stop"&&ye[0]!="close"||ii(h,7);else h.G==3&&(ye[0]=="stop"||ye[0]=="close"?ye[0]=="stop"?ii(h,7):Gf(h):ye[0]!="noop"&&h.l&&h.l.ta(ye),h.v=0)}}zo(4)}catch{}}var MN=class{constructor(c,d){this.g=c,this.map=d}};function fE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function pE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function gE(c){return c.h?1:c.g?c.g.size:0}function zf(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Wf(c,d){c.g?c.g.add(d):c.h=d}function mE(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}fE.prototype.cancel=function(){if(this.i=_E(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function _E(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let h of c.g.values())d=d.concat(h.D);return d}return N(c.i)}function PN(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var d=[],h=c.length,g=0;g<h;g++)d.push(c[g]);return d}d=[],h=0;for(g in c)d[h++]=c[g];return d}function ON(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var d=[];c=c.length;for(var h=0;h<c;h++)d.push(h);return d}d=[],h=0;for(let g in c)d[h++]=g;return d}}}function yE(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var h=ON(c),g=PN(c),T=g.length,S=0;S<T;S++)d.call(void 0,g[S],h&&h[S],c)}var vE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kN(c,d){if(c){c=c.split("&");for(var h=0;h<c.length;h++){var g=c[h].indexOf("="),T=null;if(0<=g){var S=c[h].substring(0,g);T=c[h].substring(g+1)}else S=c[h];d(S,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function ri(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof ri){this.h=c.h,fl(this,c.j),this.o=c.o,this.g=c.g,pl(this,c.s),this.l=c.l;var d=c.i,h=new Yo;h.i=d.i,d.g&&(h.g=new Map(d.g),h.h=d.h),wE(this,h),this.m=c.m}else c&&(d=String(c).match(vE))?(this.h=!1,fl(this,d[1]||"",!0),this.o=Ko(d[2]||""),this.g=Ko(d[3]||"",!0),pl(this,d[4]),this.l=Ko(d[5]||"",!0),wE(this,d[6]||"",!0),this.m=Ko(d[7]||"")):(this.h=!1,this.i=new Yo(null,this.h))}ri.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Qo(d,EE,!0),":");var h=this.g;return(h||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Qo(d,EE,!0),"@"),c.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&c.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&c.push("/"),c.push(Qo(h,h.charAt(0)=="/"?VN:LN,!0))),(h=this.i.toString())&&c.push("?",h),(h=this.m)&&c.push("#",Qo(h,BN)),c.join("")};function Yn(c){return new ri(c)}function fl(c,d,h){c.j=h?Ko(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function pl(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function wE(c,d,h){d instanceof Yo?(c.i=d,jN(c.i,c.h)):(h||(d=Qo(d,UN)),c.i=new Yo(d,c.h))}function Me(c,d,h){c.i.set(d,h)}function gl(c){return Me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Ko(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Qo(c,d,h){return typeof c=="string"?(c=encodeURI(c).replace(d,FN),h&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function FN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var EE=/[#\/\?@]/g,LN=/[#\?:]/g,VN=/[#\?]/g,UN=/[#\?@]/g,BN=/#/g;function Yo(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Cr(c){c.g||(c.g=new Map,c.h=0,c.i&&kN(c.i,function(d,h){c.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Yo.prototype,t.add=function(c,d){Cr(this),this.i=null,c=rs(this,c);var h=this.g.get(c);return h||this.g.set(c,h=[]),h.push(d),this.h+=1,this};function IE(c,d){Cr(c),d=rs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function bE(c,d){return Cr(c),d=rs(c,d),c.g.has(d)}t.forEach=function(c,d){Cr(this),this.g.forEach(function(h,g){h.forEach(function(T){c.call(d,T,g,this)},this)},this)},t.na=function(){Cr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),h=[];for(let g=0;g<d.length;g++){let T=c[g];for(let S=0;S<T.length;S++)h.push(d[g])}return h},t.V=function(c){Cr(this);let d=[];if(typeof c=="string")bE(this,c)&&(d=d.concat(this.g.get(rs(this,c))));else{c=Array.from(this.g.values());for(let h=0;h<c.length;h++)d=d.concat(c[h])}return d},t.set=function(c,d){return Cr(this),this.i=null,c=rs(this,c),bE(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function CE(c,d,h){IE(c,d),0<h.length&&(c.i=null,c.g.set(rs(c,d),N(h)),c.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var h=0;h<d.length;h++){var g=d[h];let S=encodeURIComponent(String(g)),O=this.V(g);for(g=0;g<O.length;g++){var T=S;O[g]!==""&&(T+="="+encodeURIComponent(String(O[g]))),c.push(T)}}return this.i=c.join("&")};function rs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function jN(c,d){d&&!c.j&&(Cr(c),c.i=null,c.g.forEach(function(h,g){var T=g.toLowerCase();g!=T&&(IE(this,g),CE(this,T,h))},c)),c.j=d}function $N(c,d){let h=new qo;if(a.Image){let g=new Image;g.onload=y(Tr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Tr,h,"TestLoadImage: error",!1,d,g),g.onabort=y(Tr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Tr,h,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function HN(c,d){let h=new qo,g=new AbortController,T=setTimeout(()=>{g.abort(),Tr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(S=>{clearTimeout(T),S.ok?Tr(h,"TestPingServer: ok",!0,d):Tr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(T),Tr(h,"TestPingServer: error",!1,d)})}function Tr(c,d,h,g,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),g(h)}catch{}}function zN(){this.g=new DN}function WN(c,d,h){let g=h||"";try{yE(c,function(T,S){let O=T;u(T)&&(O=kf(T)),d.push(g+S+"="+encodeURIComponent(O))})}catch(T){throw d.push(g+"type="+encodeURIComponent("_badmap")),T}}function Jo(c){this.l=c.Ub||null,this.j=c.eb||!1}b(Jo,Ff),Jo.prototype.g=function(){return new ml(this.l,this.j)},Jo.prototype.i=function(c){return function(){return c}}({});function ml(c,d){_t.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ml,_t),t=ml.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Xo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Xo(this)),this.g&&(this.readyState=3,Xo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;TE(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function TE(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Zo(this):Xo(this),this.readyState==3&&TE(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Zo(this))},t.Qa=function(c){this.g&&(this.response=c,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Xo(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,c.push(h[0]+": "+h[1]),h=d.next();return c.join(`\r
`)};function Xo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ml.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function DE(c){let d="";return _e(c,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function qf(c,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=DE(h),typeof c=="string"?h!=null&&encodeURIComponent(String(h)):Me(c,d,h))}function Ve(c){_t.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Ve,_t);var qN=/^https?$/i,GN=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Uf.g(),this.v=this.o?tE(this.o):tE(Uf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(S){SE(this,S);return}if(c=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var T in g)h.set(T,g[T]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let S of g.keys())h.set(S,g.get(S));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(S=>S.toLowerCase()=="content-type"),T=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(GN,d,void 0))||g||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[S,O]of h)this.g.setRequestHeader(S,O);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{RE(this),this.u=!0,this.g.send(c),this.u=!1}catch(S){SE(this,S)}};function SE(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,AE(c),_l(c)}function AE(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?xE(this):this.bb())},t.bb=function(){xE(this)};function xE(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Jn(c)!=4||c.Z()!=2)){if(c.u&&Jn(c)==4)Jw(c.Ea,0,c);else if(Et(c,"readystatechange"),Jn(c)==4){c.h=!1;try{let O=c.Z();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=O===0){var T=String(c.D).match(vE)[1]||null;!T&&a.self&&a.self.location&&(T=a.self.location.protocol.slice(0,-1)),g=!qN.test(T?T.toLowerCase():"")}h=g}if(h)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var S=2<Jn(c)?c.g.statusText:""}catch{S=""}c.l=S+" ["+c.Z()+"]",AE(c)}}finally{_l(c)}}}}function _l(c,d){if(c.g){RE(c);let h=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Et(c,"ready");try{h.onreadystatechange=g}catch{}}}function RE(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Jn(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Jn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),TN(d)}};function NE(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function KN(c){let d={};c=(c.g&&2<=Jn(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(Z(c[g]))continue;var h=C(c[g]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let S=d[T]||[];d[T]=S,S.push(h)}I(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ea(c,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[c]||d}function ME(c){this.Aa=0,this.i=[],this.j=new qo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ea("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ea("baseRetryDelayMs",5e3,c),this.cb=ea("retryDelaySeedMs",1e4,c),this.Wa=ea("forwardChannelMaxRetries",2,c),this.wa=ea("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new fE(c&&c.concurrentRequestLimit),this.Da=new zN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ME.prototype,t.la=8,t.G=1,t.connect=function(c,d,h,g){It(0),this.W=c,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=jE(this,null,this.W),vl(this)};function Gf(c){if(PE(c),c.G==3){var d=c.U++,h=Yn(c.I);if(Me(h,"SID",c.K),Me(h,"RID",d),Me(h,"TYPE","terminate"),ta(c,h),d=new br(c,c.j,d),d.L=2,d.v=gl(Yn(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!h&&a.Image&&(new Image().src=d.v,h=!0),h||(d.g=$E(d.j,null),d.g.ea(d.v)),d.F=Date.now(),hl(d)}BE(c)}function yl(c){c.g&&(Qf(c),c.g.cancel(),c.g=null)}function PE(c){yl(c),c.u&&(a.clearTimeout(c.u),c.u=null),wl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function vl(c){if(!pE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Vo||Ww(),Uo||(Vo(),Uo=!0),Df.add(d,c),c.B=0}}function QN(c,d){return gE(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Wo(m(c.Ga,c,d),UE(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let T=new br(this,this.j,c),S=this.o;if(this.S&&(S?(S=_(S),E(S,this.S)):S=this.S),this.m!==null||this.O||(T.H=S,S=null),this.P)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=kE(this,T,d),h=Yn(this.I),Me(h,"RID",c),Me(h,"CVER",22),this.D&&Me(h,"X-HTTP-Session-Id",this.D),ta(this,h),S&&(this.O?d="headers="+encodeURIComponent(String(DE(S)))+"&"+d:this.m&&qf(h,this.m,S)),Wf(this.h,T),this.Ua&&Me(h,"TYPE","init"),this.P?(Me(h,"$req",d),Me(h,"SID","null"),T.T=!0,jf(T,h,null)):jf(T,h,d),this.G=2}}else this.G==3&&(c?OE(this,c):this.i.length==0||pE(this.h)||OE(this))};function OE(c,d){var h;d?h=d.l:h=c.U++;let g=Yn(c.I);Me(g,"SID",c.K),Me(g,"RID",h),Me(g,"AID",c.T),ta(c,g),c.m&&c.o&&qf(g,c.m,c.o),h=new br(c,c.j,h,c.B+1),c.m===null&&(h.H=c.o),d&&(c.i=d.D.concat(c.i)),d=kE(c,h,1e3),h.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Wf(c.h,h),jf(h,g,d)}function ta(c,d){c.H&&_e(c.H,function(h,g){Me(d,g,h)}),c.l&&yE({},function(h,g){Me(d,g,h)})}function kE(c,d,h){h=Math.min(c.i.length,h);var g=c.l?m(c.l.Na,c.l,c):null;e:{var T=c.i;let S=-1;for(;;){let O=["count="+h];S==-1?0<h?(S=T[0].g,O.push("ofs="+S)):S=0:O.push("ofs="+S);let Se=!0;for(let at=0;at<h;at++){let ye=T[at].g,yt=T[at].map;if(ye-=S,0>ye)S=Math.max(0,T[at].g-100),Se=!1;else try{WN(yt,O,"req"+ye+"_")}catch{g&&g(yt)}}if(Se){g=O.join("&");break e}}}return c=c.i.splice(0,h),d.D=c,g}function FE(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Vo||Ww(),Uo||(Vo(),Uo=!0),Df.add(d,c),c.v=0}}function Kf(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Wo(m(c.Fa,c),UE(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,LE(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Wo(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,It(10),yl(this),LE(this))};function Qf(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function LE(c){c.g=new br(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=Yn(c.qa);Me(d,"RID","rpc"),Me(d,"SID",c.K),Me(d,"AID",c.T),Me(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Me(d,"TO",c.ja),Me(d,"TYPE","xmlhttp"),ta(c,d),c.m&&c.o&&qf(d,c.m,c.o),c.L&&(c.g.I=c.L);var h=c.g;c=c.ia,h.L=1,h.v=gl(Yn(d)),h.m=null,h.P=!0,uE(h,c)}t.Za=function(){this.C!=null&&(this.C=null,yl(this),Kf(this),It(19))};function wl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function VE(c,d){var h=null;if(c.g==d){wl(c),Qf(c),c.g=null;var g=2}else if(zf(c.h,d))h=d.D,mE(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){h=d.m?d.m.length:0,d=Date.now()-d.F;var T=c.B;g=ll(),Et(g,new oE(g,h)),vl(c)}else FE(c);else if(T=d.s,T==3||T==0&&0<d.X||!(g==1&&QN(c,d)||g==2&&Kf(c)))switch(h&&0<h.length&&(d=c.h,d.i=d.i.concat(h)),T){case 1:ii(c,5);break;case 4:ii(c,10);break;case 3:ii(c,6);break;default:ii(c,2)}}}function UE(c,d){let h=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(h*=2),h*d}function ii(c,d){if(c.j.info("Error code "+d),d==2){var h=m(c.fb,c),g=c.Xa;let T=!g;g=new ri(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||fl(g,"https"),gl(g),T?$N(g.toString(),h):HN(g.toString(),h)}else It(2);c.G=0,c.l&&c.l.sa(d),BE(c),PE(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function BE(c){if(c.G=0,c.ka=[],c.l){let d=_E(c.h);(d.length!=0||c.i.length!=0)&&(P(c.ka,d),P(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function jE(c,d,h){var g=h instanceof ri?Yn(h):new ri(h);if(g.g!="")d&&(g.g=d+"."+g.g),pl(g,g.s);else{var T=a.location;g=T.protocol,d=d?d+"."+T.hostname:T.hostname,T=+T.port;var S=new ri(null);g&&fl(S,g),d&&(S.g=d),T&&pl(S,T),h&&(S.l=h),g=S}return h=c.D,d=c.ya,h&&d&&Me(g,h,d),Me(g,"VER",c.la),ta(c,g),g}function $E(c,d,h){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new Ve(new Jo({eb:h})):new Ve(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function HE(){}t=HE.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function El(){}El.prototype.g=function(c,d){return new Lt(c,d)};function Lt(c,d){_t.call(this),this.g=new ME(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!Z(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!Z(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new is(this)}b(Lt,_t),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){Gf(this.g)},Lt.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var h={};h.__data__=c,c=h}else this.u&&(h={},h.__data__=kf(c),c=h);d.i.push(new MN(d.Ya++,c)),d.G==3&&vl(d)},Lt.prototype.N=function(){this.g.l=null,delete this.j,Gf(this.g),delete this.g,Lt.aa.N.call(this)};function zE(c){Lf.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let h in d){c=h;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(zE,Lf);function WE(){Vf.call(this),this.status=1}b(WE,Vf);function is(c){this.g=c}b(is,HE),is.prototype.ua=function(){Et(this.g,"a")},is.prototype.ta=function(c){Et(this.g,new zE(c))},is.prototype.sa=function(c){Et(this.g,new WE)},is.prototype.ra=function(){Et(this.g,"b")},El.prototype.createWebChannel=El.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,fR=vr.createWebChannelTransport=function(){return new El},hR=vr.getStatEventTarget=function(){return ll()},dR=vr.Event=ti,uR=vr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ul.NO_ERROR=0,ul.TIMEOUT=8,ul.HTTP_ERROR=6,lR=vr.ErrorCode=ul,aE.COMPLETE="complete",cR=vr.EventType=aE,nE.EventType=Ho,Ho.OPEN="a",Ho.CLOSE="b",Ho.ERROR="c",Ho.MESSAGE="d",_t.prototype.listen=_t.prototype.K,aR=vr.WebChannel=nE,L3=vr.FetchXmlHttpFactory=Jo,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,oR=vr.XhrIo=Ve}).apply(typeof Jh<"u"?Jh:typeof self<"u"?self:typeof window<"u"?window:{});var pR="@firebase/firestore";var ft=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");var Vc="10.14.0";var bo=new Yh("@firebase/firestore");function Sn(t,...e){if(bo.logLevel<=De.DEBUG){let n=e.map(Xv);bo.debug(`Firestore (${Vc}): ${t}`,...n)}}function vR(t,...e){if(bo.logLevel<=De.ERROR){let n=e.map(Xv);bo.error(`Firestore (${Vc}): ${t}`,...n)}}function V3(t,...e){if(bo.logLevel<=De.WARN){let n=e.map(Xv);bo.warn(`Firestore (${Vc}): ${t}`,...n)}}function Xv(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Ft(t="Unexpected state"){let e=`FIRESTORE (${Vc}) INTERNAL ASSERTION FAILED: `+t;throw vR(e),new Error(e)}function Qi(t,e){t||Ft()}var Rt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},pt=class extends Fc{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Yi=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Zh=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Uv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}},Bv=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},jv=class{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qi(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve(),s=new Yi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yi,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>A(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},a=l=>{Sn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?a(l):(Sn("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yi)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Sn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qi(typeof r.accessToken=="string"),new Zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Qi(e===null||typeof e=="string"),new ft(e)}},$v=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Hv=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new $v(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Wv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Qi(this.o===void 0);let r=s=>{s.error!=null&&Sn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Sn("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{Sn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):Sn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qi(typeof n.token=="string"),this.R=n.token,new zv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function wR(t,e){return t<e?-1:t>e?1:0}var qv=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Ft(),r===void 0?r=e.length-n:r>e.length-n&&Ft(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},Xr=class t extends qv{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new pt(Rt.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}};var Ji=class t{constructor(e){this.path=e}static fromPath(e){return new t(Xr.fromString(e))}static fromName(e){return new t(Xr.fromString(e).popFirst(5))}static empty(){return new t(Xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Xr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Xr.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Xr(e.slice()))}};var Gv=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Gv.UNKNOWN_ID=-1;function U3(t){return t.name==="IndexedDbTransactionError"}function B3(t){return t===0&&1/t==-1/0}var j3=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ite=[...j3,"documentOverlays"],$3=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],H3=$3,z3=[...H3,"indexConfiguration","indexState","indexEntries"];var ste=[...z3,"globals"];var Co=class t{constructor(e,n){this.comparator=e,this.root=n||Gn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Io(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Io(this.root,e,this.comparator,!1)}getReverseIterator(){return new Io(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Io(this.root,e,this.comparator,!0)}},Io=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Gn=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ft();let e=this.left.check();if(e!==this.right.check())throw Ft();return e+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ft()}get value(){throw Ft()}get color(){throw Ft()}get left(){throw Ft()}get right(){throw Ft()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Gn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Xh=class t{constructor(e){this.comparator=e,this.data=new Co(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ef(this.data.getIterator())}getIteratorFrom(e){return new ef(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},ef=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Kv=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var To=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Kv("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wR(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};To.EMPTY_BYTE_STRING=new To("");var W3=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function q3(t){if(Qi(!!t),typeof t=="string"){let e=0,n=W3.exec(t);if(Qi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Lc(t.seconds),nanos:Lc(t.nanos)}}function Lc(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function G3(t){return typeof t=="string"?To.fromBase64String(t):To.fromUint8Array(t)}var Qv=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};function K3(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Q3(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var ate=new Co(Ji.comparator);var cte=new Co(Ji.comparator);var lte=new Co(Ji.comparator),ute=new Xh(Ji.comparator);var dte=new Xh(wR);var gR,ge;(ge=gR||(gR={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var hte=new Lv([4294967295,4294967295],0);var tf=class{constructor(){}It(e,n){this.Tt(e,n),n.Et()}Tt(e,n){if("nullValue"in e)this.dt(n,5);else if("booleanValue"in e)this.dt(n,10),n.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(n,15),n.At(Lc(e.integerValue));else if("doubleValue"in e){let r=Lc(e.doubleValue);isNaN(r)?this.dt(n,13):(this.dt(n,15),B3(r)?n.At(0):n.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(n,20),typeof r=="string"&&(r=q3(r)),n.Rt(`${r.seconds||""}`),n.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,n),this.ft(n);else if("bytesValue"in e)this.dt(n,30),n.gt(G3(e.bytesValue)),this.ft(n);else if("referenceValue"in e)this.yt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(n,45),n.At(r.latitude||0),n.At(r.longitude||0)}else"mapValue"in e?Q3(e)?this.dt(n,Number.MAX_SAFE_INTEGER):K3(e)?this.wt(e.mapValue,n):(this.St(e.mapValue,n),this.ft(n)):"arrayValue"in e?(this.bt(e.arrayValue,n),this.ft(n)):Ft()}Vt(e,n){this.dt(n,25),this.Dt(e,n)}Dt(e,n){n.Rt(e)}St(e,n){let r=e.fields||{};this.dt(n,55);for(let i of Object.keys(r))this.Vt(i,n),this.Tt(r[i],n)}wt(e,n){var r,i;let s=e.fields||{};this.dt(n,53);let o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(n,15),n.At(Lc(a)),this.Vt(o,n),this.Tt(s[o],n)}bt(e,n){let r=e.values||[];this.dt(n,50);for(let i of r)this.Tt(i,n)}yt(e,n){this.dt(n,37),Ji.fromName(e).path.forEach(r=>{this.dt(n,60),this.Dt(r,n)})}dt(e,n){e.At(n)}ft(e){e.At(2)}};tf.vt=new tf;var fte=new Uint8Array(0);var qn=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};qn.DEFAULT_COLLECTION_PERCENTILE=10,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qn.DEFAULT=new qn(41943040,qn.DEFAULT_COLLECTION_PERCENTILE,qn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qn.DISABLED=new qn(-1,0,0);function Vv(){return typeof document<"u"?document:null}var Yv=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&Sn("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Jv=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Yi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pt(Rt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};var mR,_R;(_R=mR||(mR={})).ea="default",_R.Cache="cache";function Y3(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var yR=new Map;function J3(t,e,n,r){if(e===!0&&r===!0)throw new pt(Rt.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Z3(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ft()}function X3(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new pt(Rt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Z3(t);throw new pt(Rt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var nf=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pt(Rt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new pt(Rt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}J3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Y3((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new pt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new pt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new pt(Rt.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},rf=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new nf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pt(Rt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pt(Rt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new nf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Uv;switch(r.type){case"firstParty":return new Hv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pt(Rt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return A(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=yR.get(n);r&&(Sn("ComponentProvider","Removing Datastore"),yR.delete(n),r.terminate())}(this),Promise.resolve()}};function ER(t,e,n,r={}){var i;let s=(t=X3(t,rf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&V3("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=ft.MOCK_USER;else{a=nR(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new pt(Rt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ft(u)}t._authCredentials=new Bv(new Zh(a,l))}}var sf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Yv(this,"async_queue_retry"),this.Vu=()=>{let r=Vv();r&&Sn("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let n=Vv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let n=Vv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let n=new Yi;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return A(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!U3(e))throw e;Sn("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw vR("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);let i=Jv.createAndSchedule(this,e,n,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&Ft()}verifyOperationInProgress(){}wu(){return A(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let n=this.Tu.indexOf(e);this.Tu.splice(n,1)}};var Zv=class extends rf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new sf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return A(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new sf(e),this._firestoreClient=void 0,yield e}})}};function IR(t,e){let n=typeof t=="object"?t:$t(),r=typeof t=="string"?t:e||"(default)",i=kt(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=tR("firestore");s&&ER(i,...s)}return i}var pte=new RegExp("[~\\*/\\[\\]]");(function(e,n=!0){(function(i){Vc=i})(jt),Ke(new Qh("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new Zv(new jv(r.getProvider("auth-internal")),new Wv(r.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new pt(Rt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qv(u.options.projectId,f)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Y(pR,"4.7.3",e),Y(pR,"4.7.3","esm2017")})();var Uc=class{constructor(e){return e}},bR="firestore",ew=class{constructor(){return vn(bR)}};var tw=new U("angularfire2.firestore-instances");function e6(t,e){let n=mr(bR,t,e);return n&&new Uc(n)}function t6(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Uc(r)}}var n6={provide:ew,deps:[[new Pe,tw]]},r6={provide:Uc,useFactory:e6,deps:[[new Pe,tw],Ht]};function CR(t,...e){return Y("angularfire",rn.full,"fst"),Bt([r6,n6,{provide:tw,useFactory:t6(t),multi:!0,deps:[ve,ot,wn,En,[new Pe,Wr],[new Pe,gr],...e]}])}var TR=Be(IR,!0);var X="primary",nl=Symbol("RouteTitle"),ow=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function No(t){return new ow(t)}function i6(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o[0]===":")i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function s6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Kn(t[n],e[n]))return!1;return!0}function Kn(t,e){let n=t?aw(t):void 0,r=e?aw(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!PR(t[i],e[i]))return!1;return!0}function aw(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function PR(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function OR(t){return t.length>0?t[t.length-1]:null}function ei(t){return _p(t)?t:Ii(t)?ze(Promise.resolve(t)):G(t)}var o6={exact:FR,subset:LR},kR={exact:a6,subset:c6,ignored:()=>!0};function DR(t,e,n){return o6[n.paths](t.root,e.root,n.matrixParams)&&kR[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function a6(t,e){return Kn(t,e)}function FR(t,e,n){if(!Xi(t.segments,e.segments)||!cf(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!FR(t.children[r],e.children[r],n))return!1;return!0}function c6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>PR(t[n],e[n]))}function LR(t,e,n){return VR(t,e,e.segments,n)}function VR(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Xi(i,n)||e.hasChildren()||!cf(i,n,r))}else if(t.segments.length===n.length){if(!Xi(t.segments,n)||!cf(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!LR(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Xi(t.segments,i)||!cf(t.segments,i,r)||!t.children[X]?!1:VR(t.children[X],e,s,r)}}function cf(t,e,n){return e.every((r,i)=>kR[n](t[i].parameters,r.parameters))}var Er=class{constructor(e=new Ce([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=No(this.queryParams),this._queryParamMap}toString(){return d6.serialize(this)}},Ce=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return lf(this)}},Zi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=No(this.parameters),this._parameterMap}toString(){return BR(this)}};function l6(t,e){return Xi(t,e)&&t.every((n,r)=>Kn(n.parameters,e[r].parameters))}function Xi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function u6(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===X&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==X&&(n=n.concat(e(i,r)))}),n}var Pw=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>new qc,providedIn:"root"})}}return t})(),qc=class{parse(e){let n=new lw(e);return new Er(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Bc(e.root,!0)}`,r=p6(e.queryParams),i=typeof e.fragment=="string"?`#${h6(e.fragment)}`:"";return`${n}${r}${i}`}},d6=new qc;function lf(t){return t.segments.map(e=>BR(e)).join("/")}function Bc(t,e){if(!t.hasChildren())return lf(t);if(e){let n=t.children[X]?Bc(t.children[X],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==X&&r.push(`${i}:${Bc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=u6(t,(r,i)=>i===X?[Bc(t.children[X],!1)]:[`${i}:${Bc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[X]!=null?`${lf(t)}/${n[0]}`:`${lf(t)}/(${n.join("//")})`}}function UR(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function of(t){return UR(t).replace(/%3B/gi,";")}function h6(t){return encodeURI(t)}function cw(t){return UR(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function uf(t){return decodeURIComponent(t)}function SR(t){return uf(t.replace(/\+/g,"%20"))}function BR(t){return`${cw(t.path)}${f6(t.parameters)}`}function f6(t){return Object.entries(t).map(([e,n])=>`;${cw(e)}=${cw(n)}`).join("")}function p6(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${of(n)}=${of(i)}`).join("&"):`${of(n)}=${of(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var g6=/^[^\/()?;#]+/;function nw(t){let e=t.match(g6);return e?e[0]:""}var m6=/^[^\/()?;=#]+/;function _6(t){let e=t.match(m6);return e?e[0]:""}var y6=/^[^=?&#]+/;function v6(t){let e=t.match(y6);return e?e[0]:""}var w6=/^[^&#]+/;function E6(t){let e=t.match(w6);return e?e[0]:""}var lw=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ce([],{}):new Ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[X]=new Ce(e,n)),r}parseSegment(){let e=nw(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(e),new Zi(uf(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=_6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=nw(this.remaining);i&&(r=i,this.capture(r))}e[uf(n)]=uf(r)}parseQueryParam(e){let n=v6(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=E6(this.remaining);o&&(r=o,this.capture(r))}let i=SR(n),s=SR(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=nw(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new j(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=X);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[X]:new Ce([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new j(4011,!1)}};function jR(t){return t.segments.length>0?new Ce([],{[X]:t}):t}function $R(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=$R(i);if(r===X&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Ce(t.segments,e);return I6(n)}function I6(t){if(t.numberOfChildren===1&&t.children[X]){let e=t.children[X];return new Ce(t.segments.concat(e.segments),e.children)}return t}function Gc(t){return t instanceof Er}function b6(t,e,n=null,r=null){let i=HR(t);return zR(i,e,n,r)}function HR(t){let e;function n(s){let o={};for(let l of s.children){let u=n(l);o[l.outlet]=u}let a=new Ce(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=jR(r);return e??i}function zR(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return rw(i,i,i,n,r);let s=C6(e);if(s.toRoot())return rw(i,i,new Ce([],{}),n,r);let o=T6(s,i,t),a=o.processChildren?Hc(o.segmentGroup,o.index,s.commands):qR(o.segmentGroup,o.index,s.commands);return rw(i,o.segmentGroup,a,n,r)}function df(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Kc(t){return typeof t=="object"&&t!=null&&t.outlets}function rw(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([l,u])=>{s[l]=Array.isArray(u)?u.map(f=>`${f}`):`${u}`});let o;t===e?o=n:o=WR(t,e,n);let a=jR($R(o));return new Er(a,s,i)}function WR(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=WR(s,e,n)}),new Ce(t.segments,r)}var hf=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&df(r[0]))throw new j(4003,!1);let i=r.find(Kc);if(i&&i!==OR(r))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function C6(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new hf(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new hf(n,e,r)}var Ao=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function T6(t,e,n){if(t.isAbsolute)return new Ao(e,!0,0);if(!n)return new Ao(e,!1,NaN);if(n.parent===null)return new Ao(n,!0,0);let r=df(t.commands[0])?0:1,i=n.segments.length-1+r;return D6(n,i,t.numberOfDoubleDots)}function D6(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new j(4005,!1);i=r.segments.length}return new Ao(r,!1,i-s)}function S6(t){return Kc(t[0])?t[0].outlets:{[X]:t}}function qR(t,e,n){if(t??=new Ce([],{}),t.segments.length===0&&t.hasChildren())return Hc(t,e,n);let r=A6(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Ce(t.segments.slice(0,r.pathIndex),{});return s.children[X]=new Ce(t.segments.slice(r.pathIndex),t.children),Hc(s,0,i)}else return r.match&&i.length===0?new Ce(t.segments,{}):r.match&&!t.hasChildren()?uw(t,e,n):r.match?Hc(t,0,i):uw(t,e,n)}function Hc(t,e,n){if(n.length===0)return new Ce(t.segments,{});{let r=S6(n),i={};if(Object.keys(r).some(s=>s!==X)&&t.children[X]&&t.numberOfChildren===1&&t.children[X].segments.length===0){let s=Hc(t.children[X],e,n);return new Ce(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=qR(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Ce(t.segments,i)}}function A6(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Kc(a))break;let l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!xR(l,u,o))return s;r+=2}else{if(!xR(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function uw(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Kc(s)){let l=x6(s.outlets);return new Ce(r,l)}if(i===0&&df(n[0])){let l=t.segments[e];r.push(new Zi(l.path,AR(n[0]))),i++;continue}let o=Kc(s)?s.outlets[X]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&df(a)?(r.push(new Zi(o,AR(a))),i+=2):(r.push(new Zi(o,{})),i++)}return new Ce(r,{})}function x6(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=uw(new Ce([],{}),0,r))}),e}function AR(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function xR(t,e,n){return t==n.path&&Kn(e,n.parameters)}var zc="imperative",gt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(gt||{}),cn=class{constructor(e,n){this.id=e,this.url=n}},Qc=class extends cn{constructor(e,n,r="imperative",i=null){super(e,n),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},es=class extends cn{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Wt||{}),dw=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(dw||{}),wr=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ts=class extends cn{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},Yc=class extends cn{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ff=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hw=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},fw=class extends cn{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},pw=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},gw=class extends cn{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mw=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},_w=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},yw=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vw=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ww=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ew=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Jc=class{},Mo=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function R6(t,e){return t.providers&&!t._injector&&(t._injector=sm(t.providers,e,`Route: ${t.path}`)),t._injector??e}function An(t){return t.outlet||X}function N6(t,e){let n=t.filter(r=>An(r)===e);return n.push(...t.filter(r=>An(r)!==e)),n}function rl(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Iw=class{get injector(){return rl(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new wf(this.rootInjector),this.attachRef=null}},wf=(()=>{class t{constructor(n){this.rootInjector=n,this.contexts=new Map}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Iw(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static{this.\u0275fac=function(r){return new(r||t)(te(Qt))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),pf=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=bw(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=bw(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Cw(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Cw(e,this._root).map(n=>n.value)}};function bw(t,e){if(t===e.value)return e;for(let n of e.children){let r=bw(t,n);if(r)return r}return null}function Cw(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Cw(t,n);if(r.length)return r.unshift(e),r}return[]}var zt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function So(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var gf=class extends pf{constructor(e,n){super(e),this.snapshot=n,Ow(this,e)}toString(){return this.snapshot.toString()}};function GR(t){let e=M6(t),n=new lt([new Zi("",{})]),r=new lt({}),i=new lt({}),s=new lt({}),o=new lt(""),a=new Po(n,r,s,o,i,X,t,e.root);return a.snapshot=e.root,new gf(new zt(a,[]),e)}function M6(t){let e={},n={},r={},i="",s=new xo([],e,r,i,n,X,t,null,{});return new _f("",new zt(s,[]))}var Po=class{constructor(e,n,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ce(u=>u[nl]))??G(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ce(e=>No(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ce(e=>No(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function mf(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:F(F({},e.params),t.params),data:F(F({},e.data),t.data),resolve:F(F(F(F({},t.data),e.data),i?.data),t._resolvedData)}:r={params:F({},t.params),data:F({},t.data),resolve:F(F({},t.data),t._resolvedData??{})},i&&QR(i)&&(r.resolve[nl]=i.title),r}var xo=class{get title(){return this.data?.[nl]}constructor(e,n,r,i,s,o,a,l,u){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=No(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=No(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},_f=class extends pf{constructor(e,n){super(n),this.url=e,Ow(this,n)}toString(){return KR(this._root)}};function Ow(t,e){e.value._routerState=t,e.children.forEach(n=>Ow(t,n))}function KR(t){let e=t.children.length>0?` { ${t.children.map(KR).join(", ")} } `:"";return`${t.value}${e}`}function iw(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Kn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Kn(e.params,n.params)||t.paramsSubject.next(n.params),s6(e.url,n.url)||t.urlSubject.next(n.url),Kn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Tw(t,e){let n=Kn(t.params,e.params)&&l6(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Tw(t.parent,e.parent))}function QR(t){return typeof t.title=="string"||t.title===null}var P6=(()=>{class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=X,this.activateEvents=new Le,this.deactivateEvents=new Le,this.attachEvents=new Le,this.detachEvents=new Le,this.parentContexts=L(wf),this.location=L(Bs),this.changeDetector=L(Ci),this.inputBinder=L(kw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new j(4013,!1);this._activatedRoute=n;let i=this.location,o=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new Dw(n,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275dir=We({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ar]})}}return t})(),Dw=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Po?this.route:e===wf?this.childContexts:this.parent.get(e,n)}},kw=new U("");function O6(t,e,n){let r=Zc(t,e._root,n?n._root:void 0);return new gf(r,e)}function Zc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=k6(t,e,n);return new zt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Zc(t,a)),o}}let r=F6(e.value),i=e.children.map(s=>Zc(t,s));return new zt(r,i)}}function k6(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return Zc(t,r,i);return Zc(t,r)})}function F6(t){return new Po(new lt(t.url),new lt(t.params),new lt(t.queryParams),new lt(t.fragment),new lt(t.data),t.outlet,t.component,t)}var Xc=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},YR="ngNavigationCancelingError";function yf(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Gc(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=JR(!1,Wt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function JR(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[YR]=!0,n.cancellationCode=e,n}function L6(t){return ZR(t)&&Gc(t.url)}function ZR(t){return!!t&&t[YR]}var V6=(t,e,n,r)=>ce(i=>(new Sw(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Sw=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),iw(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=So(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=So(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=So(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=So(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ew(s.value.snapshot))}),e.children.length&&this.forwardEvent(new vw(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(iw(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),iw(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,r)}},vf=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ro=class{constructor(e,n){this.component=e,this.route=n}};function U6(t,e,n){let r=t._root,i=e?e._root:null;return jc(r,i,n,[r.value])}function B6(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ko(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!E0(t)?t:e.get(t):r}function jc(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=So(e);return t.children.forEach(o=>{j6(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Wc(a,n.getContext(o),i)),i}function j6(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=$6(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new vf(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?jc(t,e,a?a.children:null,r,i):jc(t,e,n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ro(a.outlet.component,o))}else o&&Wc(e,a,i),i.canActivateChecks.push(new vf(r)),s.component?jc(t,null,a?a.children:null,r,i):jc(t,null,n,r,i);return i}function $6(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Xi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Xi(t.url,e.url)||!Kn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Tw(t,e)||!Kn(t.queryParams,e.queryParams);case"paramsChange":default:return!Tw(t,e)}}function Wc(t,e,n){let r=So(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Wc(o,e.children.getContext(s),n):Wc(o,null,n):Wc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ro(e.outlet.component,i)):n.canDeactivateChecks.push(new Ro(null,i)):n.canDeactivateChecks.push(new Ro(null,i))}function il(t){return typeof t=="function"}function H6(t){return typeof t=="boolean"}function z6(t){return t&&il(t.canLoad)}function W6(t){return t&&il(t.canActivate)}function q6(t){return t&&il(t.canActivateChild)}function G6(t){return t&&il(t.canDeactivate)}function K6(t){return t&&il(t.canMatch)}function XR(t){return t instanceof Xn||t?.name==="EmptyError"}var af=Symbol("INITIAL_VALUE");function Oo(){return hn(t=>Jl(t.map(e=>e.pipe(er(1),bp(af)))).pipe(ce(e=>{for(let n of e)if(n!==!0){if(n===af)return af;if(n===!1||Q6(n))return n}return!0}),dn(e=>e!==af),er(1)))}function Q6(t){return Gc(t)||t instanceof Xc}function Y6(t,e){return rt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?G(se(F({},n),{guardsResult:!0})):J6(o,r,i,t).pipe(rt(a=>a&&H6(a)?Z6(r,s,t,e):G(a)),ce(a=>se(F({},n),{guardsResult:a})))})}function J6(t,e,n,r){return ze(t).pipe(rt(i=>rW(i.component,i.route,n,e,r)),xn(i=>i!==!0,!0))}function Z6(t,e,n,r){return ze(e).pipe(ys(i=>_s(eW(i.route.parent,r),X6(i.route,r),nW(t,i.path,n),tW(t,i.route,n))),xn(i=>i!==!0,!0))}function X6(t,e){return t!==null&&e&&e(new ww(t)),G(!0)}function eW(t,e){return t!==null&&e&&e(new yw(t)),G(!0)}function tW(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return G(!0);let i=r.map(s=>Zl(()=>{let o=rl(e)??n,a=ko(s,o),l=W6(a)?a.canActivate(e,t):ir(o,()=>a(e,t));return ei(l).pipe(xn())}));return G(i).pipe(Oo())}function nW(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>B6(o)).filter(o=>o!==null).map(o=>Zl(()=>{let a=o.guards.map(l=>{let u=rl(o.node)??n,f=ko(l,u),p=q6(f)?f.canActivateChild(r,t):ir(u,()=>f(r,t));return ei(p).pipe(xn())});return G(a).pipe(Oo())}));return G(s).pipe(Oo())}function rW(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return G(!0);let o=s.map(a=>{let l=rl(e)??i,u=ko(a,l),f=G6(u)?u.canDeactivate(t,e,n,r):ir(l,()=>u(t,e,n,r));return ei(f).pipe(xn())});return G(o).pipe(Oo())}function iW(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return G(!0);let s=i.map(o=>{let a=ko(o,t),l=z6(a)?a.canLoad(e,n):ir(t,()=>a(e,n));return ei(l)});return G(s).pipe(Oo(),eN(r))}function eN(t){return lp(it(e=>{if(typeof e!="boolean")throw yf(t,e)}),ce(e=>e===!0))}function sW(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return G(!0);let s=i.map(o=>{let a=ko(o,t),l=K6(a)?a.canMatch(e,n):ir(t,()=>a(e,n));return ei(l)});return G(s).pipe(Oo(),eN(r))}var el=class{constructor(e){this.segmentGroup=e||null}},tl=class extends Error{constructor(e){super(),this.urlTree=e}};function Do(t){return ms(new el(t))}function oW(t){return ms(new j(4e3,!1))}function aW(t){return ms(JR(!1,Wt.GuardRejected))}var Aw=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return G(r);if(i.numberOfChildren>1||!i.children[X])return oW(`${e.redirectTo}`);i=i.children[X]}}applyRedirectCommands(e,n,r,i,s){if(typeof n!="string"){let a=n,{queryParams:l,fragment:u,routeConfig:f,url:p,outlet:m,params:y,data:b,title:N}=i,P=ir(s,()=>a({params:y,data:b,queryParams:l,fragment:u,routeConfig:f,url:p,outlet:m,title:N}));if(P instanceof Er)throw new tl(P);n=P}let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n[0]==="/")throw new tl(o);return o}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new Er(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Ce(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path[0]===":"?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new j(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},xw={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function cW(t,e,n,r,i){let s=tN(t,e,n);return s.matched?(r=R6(e,r),sW(r,e,n,i).pipe(ce(o=>o===!0?s:F({},xw)))):G(s)}function tN(t,e,n){if(e.path==="**")return lW(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?F({},xw):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||i6)(n,t,e);if(!i)return F({},xw);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?F(F({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function lW(t){return{matched:!0,parameters:t.length>0?OR(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function RR(t,e,n,r){return n.length>0&&hW(t,n,r)?{segmentGroup:new Ce(e,dW(r,new Ce(n,t.children))),slicedSegments:[]}:n.length===0&&fW(t,n,r)?{segmentGroup:new Ce(t.segments,uW(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Ce(t.segments,t.children),slicedSegments:n}}function uW(t,e,n,r){let i={};for(let s of n)if(Ef(t,e,s)&&!r[An(s)]){let o=new Ce([],{});i[An(s)]=o}return F(F({},r),i)}function dW(t,e){let n={};n[X]=e;for(let r of t)if(r.path===""&&An(r)!==X){let i=new Ce([],{});n[An(r)]=i}return n}function hW(t,e,n){return n.some(r=>Ef(t,e,r)&&An(r)!==X)}function fW(t,e,n){return n.some(r=>Ef(t,e,r))}function Ef(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function pW(t,e,n){return e.length===0&&!t.children[n]}var Rw=class{};function gW(t,e,n,r,i,s,o="emptyOnly"){return new Nw(t,e,n,r,i,o,s).recognize()}var mW=31,Nw=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Aw(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new j(4002,`'${e.segmentGroup}'`)}recognize(){let e=RR(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ce(({children:n,rootSnapshot:r})=>{let i=new zt(r,n),s=new _f("",i),o=b6(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let n=new xo([],Object.freeze({}),Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),X,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,X,n).pipe(ce(r=>({children:r,rootSnapshot:n})),xr(r=>{if(r instanceof tl)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof el?this.noMatchError(r):r}))}processSegmentGroup(e,n,r,i,s){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r,s):this.processSegment(e,n,r,r.segments,i,!0,s).pipe(ce(o=>o instanceof zt?[o]:[]))}processChildren(e,n,r,i){let s=[];for(let o of Object.keys(r.children))o==="primary"?s.unshift(o):s.push(o);return ze(s).pipe(ys(o=>{let a=r.children[o],l=N6(n,o);return this.processSegmentGroup(e,l,a,o,i)}),Ip((o,a)=>(o.push(...a),o)),Rr(null),Ep(),rt(o=>{if(o===null)return Do(r);let a=nN(o);return _W(a),G(a)}))}processSegment(e,n,r,i,s,o,a){return ze(n).pipe(ys(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,r,i,s,o,a).pipe(xr(u=>{if(u instanceof el)return G(null);throw u}))),xn(l=>!!l),xr(l=>{if(XR(l))return pW(r,i,s)?G(new Rw):Do(r);throw l}))}processSegmentAgainstRoute(e,n,r,i,s,o,a,l){return An(r)!==o&&(o===X||!Ef(i,s,r))?Do(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o,l):Do(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o,a){let{matched:l,parameters:u,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=tN(n,i,s);if(!l)return Do(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>mW&&(this.allowRedirects=!1));let y=new xo(s,u,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,NR(i),An(i),i.component??i._loadedComponent??null,i,MR(i)),b=mf(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let N=this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,N).pipe(rt(P=>this.processSegment(e,r,n,P.concat(m),o,!1,a)))}matchSegmentAgainstRoute(e,n,r,i,s,o){let a=cW(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),a.pipe(hn(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(hn(({routes:u})=>{let f=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=l,b=new xo(m,p,Object.freeze(F({},this.urlTree.queryParams)),this.urlTree.fragment,NR(r),An(r),r.component??r._loadedComponent??null,r,MR(r)),N=mf(b,o,this.paramsInheritanceStrategy);b.params=Object.freeze(N.params),b.data=Object.freeze(N.data);let{segmentGroup:P,slicedSegments:B}=RR(n,m,y,u);if(B.length===0&&P.hasChildren())return this.processChildren(f,u,P,b).pipe(ce(z=>new zt(b,z)));if(u.length===0&&B.length===0)return G(new zt(b,[]));let Z=An(r)===s;return this.processSegment(f,u,P,B,Z?X:s,!0,b).pipe(ce(z=>new zt(b,z instanceof zt?[z]:[])))}))):Do(n)))}getChildConfig(e,n,r){return n.children?G({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?G({routes:n._loadedRoutes,injector:n._loadedInjector}):iW(e,n,r,this.urlSerializer).pipe(rt(i=>i?this.configLoader.loadChildren(e,n).pipe(it(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):aW(n))):G({routes:[],injector:e})}};function _W(t){t.sort((e,n)=>e.value.outlet===X?-1:n.value.outlet===X?1:e.value.outlet.localeCompare(n.value.outlet))}function yW(t){let e=t.value.routeConfig;return e&&e.path===""}function nN(t){let e=[],n=new Set;for(let r of t){if(!yW(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=nN(r.children);e.push(new zt(r.value,i))}return e.filter(r=>!n.has(r))}function NR(t){return t.data||{}}function MR(t){return t.resolve||{}}function vW(t,e,n,r,i,s){return rt(o=>gW(t,e,n,r,o.extractedUrl,i,s).pipe(ce(({state:a,tree:l})=>se(F({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function wW(t,e){return rt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return G(n);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let u of rN(l))o.add(u);let a=0;return ze(o).pipe(ys(l=>s.has(l)?EW(l,r,t,e):(l.data=mf(l,l.parent,t).resolve,G(void 0))),it(()=>a++),vs(1),rt(l=>a===o.size?G(n):Ut))})}function rN(t){let e=t.children.map(n=>rN(n)).flat();return[t,...e]}function EW(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!QR(i)&&(s[nl]=i.title),IW(s,t,e,r).pipe(ce(o=>(t._resolvedData=o,t.data=mf(t,t.parent,n).resolve,null)))}function IW(t,e,n,r){let i=aw(t);if(i.length===0)return G({});let s={};return ze(i).pipe(rt(o=>bW(t[o],e,n,r).pipe(xn(),it(a=>{if(a instanceof Xc)throw yf(new qc,a);s[o]=a}))),vs(1),wp(s),xr(o=>XR(o)?Ut:ms(o)))}function bW(t,e,n,r){let i=rl(e)??r,s=ko(t,i),o=s.resolve?s.resolve(e,n):ir(i,()=>s(e,n));return ei(o)}function sw(t){return hn(e=>{let n=t(e);return n?ze(n).pipe(ce(()=>e)):G(e)})}var iN=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===X);return r}getResolvedTitleForRoute(n){return n.data[nl]}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(CW),providedIn:"root"})}}return t})(),CW=(()=>{class t extends iN{constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||t)(te(YC))}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),Fw=new U("",{providedIn:"root",factory:()=>({})}),TW=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=Ln({type:t,selectors:[["ng-component"]],standalone:!0,features:[Vn],decls:1,vars:0,template:function(r,i){r&1&&ke(0,"router-outlet")},dependencies:[P6],encapsulation:2})}}return t})();function Lw(t){let e=t.children&&t.children.map(Lw),n=e?se(F({},t),{children:e}):F({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==X&&(n.component=TW),n}var Vw=new U(""),DW=(()=>{class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=L(cm)}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return G(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);let r=ei(n.loadComponent()).pipe(ce(sN),it(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),oa(()=>{this.componentLoaders.delete(n)})),i=new hs(r,()=>new ct).pipe(ds());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return G({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=SW(r,this.compiler,n,this.onLoadEndListener).pipe(oa(()=>{this.childrenLoaders.delete(r)})),o=new hs(s,()=>new ct).pipe(ds());return this.childrenLoaders.set(r,o),o}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function SW(t,e,n,r){return ei(t.loadChildren()).pipe(ce(sN),rt(i=>i instanceof ga||Array.isArray(i)?G(i):ze(e.compileModuleAsync(i))),ce(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Vw,[],{optional:!0,self:!0}).flat()),{routes:o.map(Lw),injector:s}}))}function AW(t){return t&&typeof t=="object"&&"default"in t}function sN(t){return AW(t)?t.default:t}var Uw=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(xW),providedIn:"root"})}}return t})(),xW=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),RW=new U("");var NW=new U(""),MW=(()=>{class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ct,this.transitionAbortSubject=new ct,this.configLoader=L(DW),this.environmentInjector=L(Qt),this.urlSerializer=L(Pw),this.rootContexts=L(wf),this.location=L(ba),this.inputBindingEnabled=L(kw,{optional:!0})!==null,this.titleStrategy=L(iN),this.options=L(Fw,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=L(Uw),this.createViewTransition=L(RW,{optional:!0}),this.navigationErrorHandler=L(NW,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>G(void 0),this.rootComponentType=null;let n=i=>this.events.next(new mw(i)),r=i=>this.events.next(new _w(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;this.transitions?.next(se(F(F({},this.transitions.value),n),{id:r}))}setupNavigations(n,r,i){return this.transitions=new lt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:zc,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(dn(s=>s.id!==0),ce(s=>se(F({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),hn(s=>{let o=!1,a=!1;return G(s).pipe(hn(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Wt.SupersededByNewNavigation),Ut;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?se(F({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=l.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&f!=="reload"){let p="";return this.events.next(new ts(l.id,this.urlSerializer.serialize(l.rawUrl),p,dw.IgnoredSameUrlNavigation)),l.resolve(!1),Ut}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return G(l).pipe(hn(p=>{let m=this.transitions?.getValue();return this.events.next(new Qc(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Ut:Promise.resolve(p)}),vW(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy),it(p=>{s.targetSnapshot=p.targetSnapshot,s.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=se(F({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new ff(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:N}=l,P=new Qc(p,this.urlSerializer.serialize(m),y,b);this.events.next(P);let B=GR(this.rootComponentType).snapshot;return this.currentTransition=s=se(F({},l),{targetSnapshot:B,urlAfterRedirects:m,extras:se(F({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,G(s)}else{let p="";return this.events.next(new ts(l.id,this.urlSerializer.serialize(l.extractedUrl),p,dw.IgnoredByUrlHandlingStrategy)),l.resolve(!1),Ut}}),it(l=>{let u=new hw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ce(l=>(this.currentTransition=s=se(F({},l),{guards:U6(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),Y6(this.environmentInjector,l=>this.events.next(l)),it(l=>{if(s.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw yf(this.urlSerializer,l.guardsResult);let u=new fw(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(u)}),dn(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Wt.GuardRejected),!1)),sw(l=>{if(l.guards.canActivateChecks.length)return G(l).pipe(it(u=>{let f=new pw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}),hn(u=>{let f=!1;return G(u).pipe(wW(this.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(u,"",Wt.NoDataFromResolver)}}))}),it(u=>{let f=new gw(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(f)}))}),sw(l=>{let u=f=>{let p=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(f.routeConfig).pipe(it(m=>{f.component=m}),ce(()=>{})));for(let m of f.children)p.push(...u(m));return p};return Jl(u(l.targetSnapshot.root)).pipe(Rr(null),er(1))}),sw(()=>this.afterPreactivation()),hn(()=>{let{currentSnapshot:l,targetSnapshot:u}=s,f=this.createViewTransition?.(this.environmentInjector,l.root,u.root);return f?ze(f).pipe(ce(()=>s)):G(s)}),ce(l=>{let u=O6(n.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=se(F({},l),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),it(()=>{this.events.next(new Jc)}),V6(this.rootContexts,n.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),er(1),it({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new es(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),Cp(this.transitionAbortSubject.pipe(it(l=>{throw l}))),oa(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),xr(l=>{if(a=!0,ZR(l))this.events.next(new wr(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),L6(l)?this.events.next(new Mo(l.url,l.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Yc(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0);try{let f=ir(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(f instanceof Xc){let{message:p,cancellationCode:m}=yf(this.urlSerializer,f);this.events.next(new wr(s.id,this.urlSerializer.serialize(s.extractedUrl),p,m)),this.events.next(new Mo(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(u);let p=n.errorHandler(l);s.resolve(!!p)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Ut}))}))}cancelNavigationTransition(n,r,i){let s=new wr(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(s),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return n.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function PW(t){return t!==zc}var OW=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(kW),providedIn:"root"})}}return t})(),Mw=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},kW=(()=>{class t extends Mw{static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),oN=(()=>{class t{static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:()=>L(FW),providedIn:"root"})}}return t})(),FW=(()=>{class t extends oN{constructor(){super(...arguments),this.location=L(ba),this.urlSerializer=L(Pw),this.options=L(Fw,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=L(Uw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Er,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=GR(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&n(r.url,r.state)})}handleRouterEvent(n,r){if(n instanceof Qc)this.stateMemento=this.createStateMemento();else if(n instanceof ts)this.rawUrlTree=r.initialUrl;else if(n instanceof ff){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else n instanceof Jc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):n instanceof wr&&(n.code===Wt.GuardRejected||n.code===Wt.NoDataFromResolver)?this.restoreHistory(r):n instanceof Yc?this.restoreHistory(r,!0):n instanceof es&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,r){let i=n instanceof Er?this.urlSerializer.serialize(n):n;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let s=this.browserPageId,o=F(F({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(i,"",o)}else{let s=F(F({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===n.finalUrl&&s===0&&(this.resetState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=cr(t)))(i||t)}})()}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$c=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}($c||{});function LW(t,e){t.events.pipe(dn(n=>n instanceof es||n instanceof wr||n instanceof Yc||n instanceof ts),ce(n=>n instanceof es||n instanceof ts?$c.COMPLETE:(n instanceof wr?n.code===Wt.Redirect||n.code===Wt.SupersededByNewNavigation:!1)?$c.REDIRECTING:$c.FAILED),dn(n=>n!==$c.REDIRECTING),er(1)).subscribe(()=>{e()})}function VW(t){throw t}var UW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},aN=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=L(nd),this.stateManager=L(oN),this.options=L(Fw,{optional:!0})||{},this.pendingTasks=L(Vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=L(MW),this.urlSerializer=L(Pw),this.location=L(ba),this.urlHandlingStrategy=L(Uw),this._events=new ct,this.errorHandler=this.options.errorHandler||VW,this.navigated=!1,this.routeReuseStrategy=L(OW),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=L(Vw,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!L(kw,{optional:!0}),this.eventsSubscription=new Ue,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof wr&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof es)this.navigated=!0;else if(r instanceof Mo){let o=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=F({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||PW(i.source)},o);this.scheduleNavigation(a,zc,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}$W(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(n,"popstate",r)},0)})}navigateToSyncWithBrowser(n,r,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=F({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Lw),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=l?this.currentUrlTree.fragment:o,f=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":f=F(F({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=HR(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return zR(p,n,f,u??null)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Gc(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,zc,null,r)}navigate(n,r={skipLocationChange:!1}){return jW(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=F({},UW):r===!1?i=F({},BW):i=r,Gc(n))return DR(this.currentUrlTree,n,i);let s=this.parseUrl(n);return DR(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,s])=>(s!=null&&(r[i]=s),r),{})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((p,m)=>{a=p,l=m});let f=this.pendingTasks.add();return LW(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function jW(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new j(4008,!1)}function $W(t){return!(t instanceof Jc)&&!(t instanceof Mo)}var HW=new U("");function cN(t,...e){return Bt([{provide:Vw,multi:!0,useValue:t},[],{provide:Po,useFactory:zW,deps:[aN]},{provide:am,multi:!0,useFactory:WW},e.map(n=>n.\u0275providers)])}function zW(t){return t.routerState.root}function WW(){let t=L(ot);return e=>{let n=t.get(bi);if(e!==n.components[0])return;let r=t.get(aN),i=t.get(qW);t.get(GW)===1&&r.initialNavigation(),t.get(KW,null,ie.Optional)?.setUpPreloading(),t.get(HW,null,ie.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var qW=new U("",{factory:()=>new ct}),GW=new U("",{providedIn:"root",factory:()=>1});var KW=new U("");function QW(t,e){if(t&1){let n=Zt();R(0,"div",2)(1,"h4"),k(2),x(),R(3,"video",3,0),ke(5,"source",4),k(6," Your browser does not support the video tag. "),x(),ke(7,"br"),R(8,"button",5),Ee("click",function(){K(n);let i=js(4),s=H();return Q(s.playVideo(i))}),k(9,"Play"),x(),R(10,"button",5),Ee("click",function(){K(n);let i=js(4),s=H();return Q(s.pauseVideo(i))}),k(11,"Pause"),x(),R(12,"button",5),Ee("click",function(){K(n);let i=js(4),s=H();return Q(s.stopVideo(i))}),k(13,"Stop"),x(),ke(14,"br")(15,"br"),R(16,"input",6),Ee("input",function(i){K(n);let s=js(4),o=H();return Q(o.seekVideo(s,i))}),x(),ke(17,"br"),R(18,"input",7),Ee("input",function(i){K(n);let s=js(4),o=H();return Q(o.setVolume(s,i))}),x(),k(19,` Volume
`),x()}if(t&2){let n=H();V(2),Ze("Player Video: ",n.selectedPlayer.nombre,""),V(3),ue("src",n.selectedPlayer.video,Us)}}var If=class t{selectedPlayer=null;playVideo(e){e.play()}pauseVideo(e){e.pause()}stopVideo(e){e.pause(),e.currentTime=0}seekVideo(e,n){let r=n.target.value,i=e.duration*(r/100);e.currentTime=i}setVolume(e,n){let r=n.target.value;e.volume=r}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Ln({type:t,selectors:[["app-media-component"]],inputs:{selectedPlayer:"selectedPlayer"},standalone:!0,features:[Vn],decls:11,vars:6,consts:[["videoPlayer",""],["class","video-container",4,"ngIf"],[1,"video-container"],["controls",""],["type","video/mp4",3,"src"],[3,"click"],["type","range","min","0","max","100",3,"input"],["type","range","min","0","max","1","step","0.01",3,"input"]],template:function(n,r){n&1&&(R(0,"h4"),k(1),x(),R(2,"p"),k(3),x(),R(4,"p"),k(5),x(),R(6,"p"),k(7),x(),R(8,"p"),k(9),x(),Ot(10,QW,20,2,"div",1)),n&2&&(V(),Ze("Player Details: ",r.selectedPlayer.nombre,""),V(2),Ze("Last Name: ",r.selectedPlayer.apellido,""),V(2),Ze("Team: ",r.selectedPlayer.equipo,""),V(2),Ze("Position: ",r.selectedPlayer.posicion,""),V(2),Ze("Games Played: ",r.selectedPlayer.partidos,""),V(),ue("ngIf",r.selectedPlayer))},dependencies:[fr,$s]})};var lN=[{path:"",component:Eo},{path:"media",component:If}];function sl(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!YW(n)||(t[n]=sl(t[n],e[n]));return t}function YW(t){return t!=="__proto__"}function uN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var JW="FirebaseError",jw=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=JW,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fo.prototype.create)}},Fo=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?ZW(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new jw(i,a,r)}};function ZW(t,e){return t.replace(XW,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var XW=/\{\$([^}]+)}/g;function Hw(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function dN(t,e){let n=new $w(t,e);return n.subscribe.bind(n)}var $w=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eq(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bw),i.error===void 0&&(i.error=Bw),i.complete===void 0&&(i.complete=Bw);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function eq(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bw(){}var vre=4*60*60*1e3;var bf=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var tq=[],Fe=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(Fe||{}),nq={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},rq=Fe.INFO,iq={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},sq=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=iq[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Cf=class{constructor(e){this.name=e,this._logLevel=rq,this._logHandler=sq,this._userLogHandler=null,tq.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?nq[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}};var zw=class{constructor(e,n){this._delegate=e,this.firebase=n,Js(e,new bf("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Ua(this._delegate)))}_getService(e,n=Un){var r;this._delegate.checkDestroyed();let i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Un){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Js(this._delegate,e)}_addOrOverwriteComponent(e){Km(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}};var oq={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},hN=new Fo("app-compat","Firebase",oq);function aq(t){let e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:Y,setLogLevel:Nd,onLog:Rd,apps:null,SDK_VERSION:jt,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:Qm}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function i(u){if(u=u||Un,!Hw(e,u))throw hN.create("no-app",{appName:u});return e[u]}i.App=t;function s(u,f={}){let p=Hr(u,f);if(Hw(e,p.name))return e[p.name];let m=new t(p,n);return e[p.name]=m,m}function o(){return Object.keys(e).map(u=>e[u])}function a(u){let f=u.name,p=f.replace("-compat","");if(Ke(u)&&u.type==="PUBLIC"){let m=(y=i())=>{if(typeof y[p]!="function")throw hN.create("invalid-app-argument",{appName:f});return y[p]()};u.serviceProps!==void 0&&sl(m,u.serviceProps),n[p]=m,t.prototype[p]=function(...y){return this._getService.bind(this,f).apply(this,u.multipleInstances?y:[])}}return u.type==="PUBLIC"?n[p]:null}function l(u,f){return f==="serverAuth"?null:f}return n}function pN(){let t=aq(zw);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:pN,extendNamespace:e,createSubscribe:dN,ErrorFactory:Fo,deepExtend:sl});function e(n){sl(t,n)}return t}var cq=pN();var fN=new Cf("@firebase/app-compat"),lq="@firebase/app-compat",uq="0.2.43";function dq(t){Y(lq,uq,t)}try{let t=uN();if(t.firebase!==void 0){fN.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);let e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&fN.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}var Tf=cq;dq();var hq="firebase",fq="10.14.1";Tf.registerVersion(hq,fq,"app-compat");var gN=new U("angularfire2.app.options");var Ure=typeof module<"u"&&!!module.hot;globalThis.\u0275AngularfireInstanceCache||=[];QC(Kh,{providers:[cN(lN),GT(()=>KT(Sc)),IA(()=>bA()),CR(()=>TR()),ox(()=>cx()),Qx(()=>kc()),{provide:gN,useValue:Sc}]}).catch(t=>console.error(t));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log("Service Worker registrado con \xE9xito:",t)}).catch(t=>{console.error("Error al registrar el Service Worker:",t)});
